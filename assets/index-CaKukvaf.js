function i0(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Hh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Uh={exports:{}},qs={},Wh={exports:{}},$={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lo=Symbol.for("react.element"),o0=Symbol.for("react.portal"),s0=Symbol.for("react.fragment"),l0=Symbol.for("react.strict_mode"),a0=Symbol.for("react.profiler"),u0=Symbol.for("react.provider"),c0=Symbol.for("react.context"),d0=Symbol.for("react.forward_ref"),f0=Symbol.for("react.suspense"),h0=Symbol.for("react.memo"),p0=Symbol.for("react.lazy"),cd=Symbol.iterator;function m0(t){return t===null||typeof t!="object"?null:(t=cd&&t[cd]||t["@@iterator"],typeof t=="function"?t:null)}var Kh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jh=Object.assign,qh={};function Gr(t,e,n){this.props=t,this.context=e,this.refs=qh,this.updater=n||Kh}Gr.prototype.isReactComponent={};Gr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qh(){}Qh.prototype=Gr.prototype;function Vu(t,e,n){this.props=t,this.context=e,this.refs=qh,this.updater=n||Kh}var Hu=Vu.prototype=new Qh;Hu.constructor=Vu;Jh(Hu,Gr.prototype);Hu.isPureReactComponent=!0;var dd=Array.isArray,Gh=Object.prototype.hasOwnProperty,Uu={current:null},Yh={key:!0,ref:!0,__self:!0,__source:!0};function Xh(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Gh.call(e,r)&&!Yh.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:lo,type:t,key:o,ref:s,props:i,_owner:Uu.current}}function g0(t,e){return{$$typeof:lo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wu(t){return typeof t=="object"&&t!==null&&t.$$typeof===lo}function y0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fd=/\/+/g;function bl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?y0(""+t.key):e.toString(36)}function Ho(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case lo:case o0:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+bl(s,0):r,dd(i)?(n="",t!=null&&(n=t.replace(fd,"$&/")+"/"),Ho(i,e,n,"",function(u){return u})):i!=null&&(Wu(i)&&(i=g0(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(fd,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",dd(t))for(var l=0;l<t.length;l++){o=t[l];var a=r+bl(o,l);s+=Ho(o,e,n,a,i)}else if(a=m0(t),typeof a=="function")for(t=a.call(t),l=0;!(o=t.next()).done;)o=o.value,a=r+bl(o,l++),s+=Ho(o,e,n,a,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function vo(t,e,n){if(t==null)return t;var r=[],i=0;return Ho(t,r,"","",function(o){return e.call(n,o,i++)}),r}function v0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fe={current:null},Uo={transition:null},k0={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:Uo,ReactCurrentOwner:Uu};function Zh(){throw Error("act(...) is not supported in production builds of React.")}$.Children={map:vo,forEach:function(t,e,n){vo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vo(t,function(){e++}),e},toArray:function(t){return vo(t,function(e){return e})||[]},only:function(t){if(!Wu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$.Component=Gr;$.Fragment=s0;$.Profiler=a0;$.PureComponent=Vu;$.StrictMode=l0;$.Suspense=f0;$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k0;$.act=Zh;$.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Jh({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Uu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Gh.call(e,a)&&!Yh.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:lo,type:t.type,key:i,ref:o,props:r,_owner:s}};$.createContext=function(t){return t={$$typeof:c0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:u0,_context:t},t.Consumer=t};$.createElement=Xh;$.createFactory=function(t){var e=Xh.bind(null,t);return e.type=t,e};$.createRef=function(){return{current:null}};$.forwardRef=function(t){return{$$typeof:d0,render:t}};$.isValidElement=Wu;$.lazy=function(t){return{$$typeof:p0,_payload:{_status:-1,_result:t},_init:v0}};$.memo=function(t,e){return{$$typeof:h0,type:t,compare:e===void 0?null:e}};$.startTransition=function(t){var e=Uo.transition;Uo.transition={};try{t()}finally{Uo.transition=e}};$.unstable_act=Zh;$.useCallback=function(t,e){return Fe.current.useCallback(t,e)};$.useContext=function(t){return Fe.current.useContext(t)};$.useDebugValue=function(){};$.useDeferredValue=function(t){return Fe.current.useDeferredValue(t)};$.useEffect=function(t,e){return Fe.current.useEffect(t,e)};$.useId=function(){return Fe.current.useId()};$.useImperativeHandle=function(t,e,n){return Fe.current.useImperativeHandle(t,e,n)};$.useInsertionEffect=function(t,e){return Fe.current.useInsertionEffect(t,e)};$.useLayoutEffect=function(t,e){return Fe.current.useLayoutEffect(t,e)};$.useMemo=function(t,e){return Fe.current.useMemo(t,e)};$.useReducer=function(t,e,n){return Fe.current.useReducer(t,e,n)};$.useRef=function(t){return Fe.current.useRef(t)};$.useState=function(t){return Fe.current.useState(t)};$.useSyncExternalStore=function(t,e,n){return Fe.current.useSyncExternalStore(t,e,n)};$.useTransition=function(){return Fe.current.useTransition()};$.version="18.3.1";Wh.exports=$;var M=Wh.exports;const Ne=Hh(M),x0=i0({__proto__:null,default:Ne},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0=M,w0=Symbol.for("react.element"),C0=Symbol.for("react.fragment"),E0=Object.prototype.hasOwnProperty,M0=S0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N0={key:!0,ref:!0,__self:!0,__source:!0};function ep(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)E0.call(e,r)&&!N0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:w0,type:t,key:o,ref:s,props:i,_owner:M0.current}}qs.Fragment=C0;qs.jsx=ep;qs.jsxs=ep;Uh.exports=qs;var S=Uh.exports,tp={exports:{}},Ze={},np={exports:{}},rp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,B){var j=P.length;P.push(B);e:for(;0<j;){var ee=j-1>>>1,ae=P[ee];if(0<i(ae,B))P[ee]=B,P[j]=ae,j=ee;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var B=P[0],j=P.pop();if(j!==B){P[0]=j;e:for(var ee=0,ae=P.length,go=ae>>>1;ee<go;){var Dn=2*(ee+1)-1,Ol=P[Dn],Pn=Dn+1,yo=P[Pn];if(0>i(Ol,j))Pn<ae&&0>i(yo,Ol)?(P[ee]=yo,P[Pn]=j,ee=Pn):(P[ee]=Ol,P[Dn]=j,ee=Dn);else if(Pn<ae&&0>i(yo,j))P[ee]=yo,P[Pn]=j,ee=Pn;else break e}}return B}function i(P,B){var j=P.sortIndex-B.sortIndex;return j!==0?j:P.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var a=[],u=[],c=1,d=null,f=3,h=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(P){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=P)r(u),B.sortIndex=B.expirationTime,e(a,B);else break;B=n(u)}}function x(P){if(g=!1,k(P),!p)if(n(a)!==null)p=!0,Nl(w);else{var B=n(u);B!==null&&Tl(x,B.startTime-P)}}function w(P,B){p=!1,g&&(g=!1,m(O),O=-1),h=!0;var j=f;try{for(k(B),d=n(a);d!==null&&(!(d.expirationTime>B)||P&&!we());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,f=d.priorityLevel;var ae=ee(d.expirationTime<=B);B=t.unstable_now(),typeof ae=="function"?d.callback=ae:d===n(a)&&r(a),k(B)}else r(a);d=n(a)}if(d!==null)var go=!0;else{var Dn=n(u);Dn!==null&&Tl(x,Dn.startTime-B),go=!1}return go}finally{d=null,f=j,h=!1}}var E=!1,T=null,O=-1,I=5,z=-1;function we(){return!(t.unstable_now()-z<I)}function bn(){if(T!==null){var P=t.unstable_now();z=P;var B=!0;try{B=T(!0,P)}finally{B?ti():(E=!1,T=null)}}else E=!1}var ti;if(typeof y=="function")ti=function(){y(bn)};else if(typeof MessageChannel<"u"){var ud=new MessageChannel,r0=ud.port2;ud.port1.onmessage=bn,ti=function(){r0.postMessage(null)}}else ti=function(){v(bn,0)};function Nl(P){T=P,E||(E=!0,ti())}function Tl(P,B){O=v(function(){P(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,Nl(w))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var j=f;f=B;try{return P()}finally{f=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var j=f;f=P;try{return B()}finally{f=j}},t.unstable_scheduleCallback=function(P,B,j){var ee=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?ee+j:ee):j=ee,P){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=j+ae,P={id:c++,callback:B,priorityLevel:P,startTime:j,expirationTime:ae,sortIndex:-1},j>ee?(P.sortIndex=j,e(u,P),n(a)===null&&P===n(u)&&(g?(m(O),O=-1):g=!0,Tl(x,j-ee))):(P.sortIndex=ae,e(a,P),p||h||(p=!0,Nl(w))),P},t.unstable_shouldYield=we,t.unstable_wrapCallback=function(P){var B=f;return function(){var j=f;f=B;try{return P.apply(this,arguments)}finally{f=j}}}})(rp);np.exports=rp;var T0=np.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0=M,Xe=T0;function N(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ip=new Set,Ii={};function ir(t,e){Br(t,e),Br(t+"Capture",e)}function Br(t,e){for(Ii[t]=e,t=0;t<e.length;t++)ip.add(e[t])}var jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Na=Object.prototype.hasOwnProperty,b0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hd={},pd={};function D0(t){return Na.call(pd,t)?!0:Na.call(hd,t)?!1:b0.test(t)?pd[t]=!0:(hd[t]=!0,!1)}function P0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function A0(t,e,n,r){if(e===null||typeof e>"u"||P0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _e(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xe[t]=new _e(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xe[e]=new _e(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xe[t]=new _e(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xe[t]=new _e(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xe[t]=new _e(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xe[t]=new _e(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xe[t]=new _e(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xe[t]=new _e(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xe[t]=new _e(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ku=/[\-:]([a-z])/g;function Ju(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ku,Ju);xe[e]=new _e(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ku,Ju);xe[e]=new _e(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ku,Ju);xe[e]=new _e(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xe[t]=new _e(t,1,!1,t.toLowerCase(),null,!1,!1)});xe.xlinkHref=new _e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xe[t]=new _e(t,1,!1,t.toLowerCase(),null,!0,!0)});function qu(t,e,n,r){var i=xe.hasOwnProperty(e)?xe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(A0(e,n,i,r)&&(n=null),r||i===null?D0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wt=O0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ko=Symbol.for("react.element"),hr=Symbol.for("react.portal"),pr=Symbol.for("react.fragment"),Qu=Symbol.for("react.strict_mode"),Ta=Symbol.for("react.profiler"),op=Symbol.for("react.provider"),sp=Symbol.for("react.context"),Gu=Symbol.for("react.forward_ref"),Oa=Symbol.for("react.suspense"),ba=Symbol.for("react.suspense_list"),Yu=Symbol.for("react.memo"),qt=Symbol.for("react.lazy"),lp=Symbol.for("react.offscreen"),md=Symbol.iterator;function ni(t){return t===null||typeof t!="object"?null:(t=md&&t[md]||t["@@iterator"],typeof t=="function"?t:null)}var Y=Object.assign,Dl;function di(t){if(Dl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dl=e&&e[1]||""}return`
`+Dl+t}var Pl=!1;function Al(t,e){if(!t||Pl)return"";Pl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=s&&0<=l);break}}}finally{Pl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?di(t):""}function I0(t){switch(t.tag){case 5:return di(t.type);case 16:return di("Lazy");case 13:return di("Suspense");case 19:return di("SuspenseList");case 0:case 2:case 15:return t=Al(t.type,!1),t;case 11:return t=Al(t.type.render,!1),t;case 1:return t=Al(t.type,!0),t;default:return""}}function Da(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pr:return"Fragment";case hr:return"Portal";case Ta:return"Profiler";case Qu:return"StrictMode";case Oa:return"Suspense";case ba:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sp:return(t.displayName||"Context")+".Consumer";case op:return(t._context.displayName||"Context")+".Provider";case Gu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Yu:return e=t.displayName||null,e!==null?e:Da(t.type)||"Memo";case qt:e=t._payload,t=t._init;try{return Da(t(e))}catch{}}return null}function R0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Da(e);case 8:return e===Qu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ap(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function z0(t){var e=ap(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xo(t){t._valueTracker||(t._valueTracker=z0(t))}function up(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ap(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function us(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pa(t,e){var n=e.checked;return Y({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cp(t,e){e=e.checked,e!=null&&qu(t,"checked",e,!1)}function Aa(t,e){cp(t,e);var n=xn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ia(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ia(t,e.type,xn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ia(t,e,n){(e!=="number"||us(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fi=Array.isArray;function Tr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ra(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return Y({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(N(92));if(fi(n)){if(1<n.length)throw Error(N(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xn(n)}}function dp(t,e){var n=xn(e.value),r=xn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function kd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function za(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var So,hp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(So=So||document.createElement("div"),So.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=So.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ri(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L0=["Webkit","ms","Moz","O"];Object.keys(vi).forEach(function(t){L0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vi[e]=vi[t]})});function pp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vi.hasOwnProperty(t)&&vi[t]?(""+e).trim():e+"px"}function mp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=pp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var B0=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function La(t,e){if(e){if(B0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function Ba(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fa=null;function Xu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _a=null,Or=null,br=null;function xd(t){if(t=co(t)){if(typeof _a!="function")throw Error(N(280));var e=t.stateNode;e&&(e=Zs(e),_a(t.stateNode,t.type,e))}}function gp(t){Or?br?br.push(t):br=[t]:Or=t}function yp(){if(Or){var t=Or,e=br;if(br=Or=null,xd(t),e)for(t=0;t<e.length;t++)xd(e[t])}}function vp(t,e){return t(e)}function kp(){}var Il=!1;function xp(t,e,n){if(Il)return t(e,n);Il=!0;try{return vp(t,e,n)}finally{Il=!1,(Or!==null||br!==null)&&(kp(),yp())}}function zi(t,e){var n=t.stateNode;if(n===null)return null;var r=Zs(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(N(231,e,typeof n));return n}var ja=!1;if(jt)try{var ri={};Object.defineProperty(ri,"passive",{get:function(){ja=!0}}),window.addEventListener("test",ri,ri),window.removeEventListener("test",ri,ri)}catch{ja=!1}function F0(t,e,n,r,i,o,s,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var ki=!1,cs=null,ds=!1,$a=null,_0={onError:function(t){ki=!0,cs=t}};function j0(t,e,n,r,i,o,s,l,a){ki=!1,cs=null,F0.apply(_0,arguments)}function $0(t,e,n,r,i,o,s,l,a){if(j0.apply(this,arguments),ki){if(ki){var u=cs;ki=!1,cs=null}else throw Error(N(198));ds||(ds=!0,$a=u)}}function or(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sd(t){if(or(t)!==t)throw Error(N(188))}function V0(t){var e=t.alternate;if(!e){if(e=or(t),e===null)throw Error(N(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Sd(i),t;if(o===r)return Sd(i),e;o=o.sibling}throw Error(N(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(N(189))}}if(n.alternate!==r)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?t:e}function wp(t){return t=V0(t),t!==null?Cp(t):null}function Cp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Cp(t);if(e!==null)return e;t=t.sibling}return null}var Ep=Xe.unstable_scheduleCallback,wd=Xe.unstable_cancelCallback,H0=Xe.unstable_shouldYield,U0=Xe.unstable_requestPaint,te=Xe.unstable_now,W0=Xe.unstable_getCurrentPriorityLevel,Zu=Xe.unstable_ImmediatePriority,Mp=Xe.unstable_UserBlockingPriority,fs=Xe.unstable_NormalPriority,K0=Xe.unstable_LowPriority,Np=Xe.unstable_IdlePriority,Qs=null,Nt=null;function J0(t){if(Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(Qs,t,void 0,(t.current.flags&128)===128)}catch{}}var yt=Math.clz32?Math.clz32:G0,q0=Math.log,Q0=Math.LN2;function G0(t){return t>>>=0,t===0?32:31-(q0(t)/Q0|0)|0}var wo=64,Co=4194304;function hi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=hi(l):(o&=s,o!==0&&(r=hi(o)))}else s=n&~i,s!==0?r=hi(s):o!==0&&(r=hi(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yt(e),i=1<<n,r|=t[n],e&=~i;return r}function Y0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-yt(o),l=1<<s,a=i[s];a===-1?(!(l&n)||l&r)&&(i[s]=Y0(l,e)):a<=e&&(t.expiredLanes|=l),o&=~l}}function Va(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tp(){var t=wo;return wo<<=1,!(wo&4194240)&&(wo=64),t}function Rl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ao(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yt(e),t[e]=n}function Z0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-yt(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function ec(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var H=0;function Op(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bp,tc,Dp,Pp,Ap,Ha=!1,Eo=[],an=null,un=null,cn=null,Li=new Map,Bi=new Map,Xt=[],e1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cd(t,e){switch(t){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":Li.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bi.delete(e.pointerId)}}function ii(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=co(e),e!==null&&tc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function t1(t,e,n,r,i){switch(e){case"focusin":return an=ii(an,t,e,n,r,i),!0;case"dragenter":return un=ii(un,t,e,n,r,i),!0;case"mouseover":return cn=ii(cn,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Li.set(o,ii(Li.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Bi.set(o,ii(Bi.get(o)||null,t,e,n,r,i)),!0}return!1}function Ip(t){var e=Ln(t.target);if(e!==null){var n=or(e);if(n!==null){if(e=n.tag,e===13){if(e=Sp(n),e!==null){t.blockedOn=e,Ap(t.priority,function(){Dp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ua(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fa=r,n.target.dispatchEvent(r),Fa=null}else return e=co(n),e!==null&&tc(e),t.blockedOn=n,!1;e.shift()}return!0}function Ed(t,e,n){Wo(t)&&n.delete(e)}function n1(){Ha=!1,an!==null&&Wo(an)&&(an=null),un!==null&&Wo(un)&&(un=null),cn!==null&&Wo(cn)&&(cn=null),Li.forEach(Ed),Bi.forEach(Ed)}function oi(t,e){t.blockedOn===e&&(t.blockedOn=null,Ha||(Ha=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,n1)))}function Fi(t){function e(i){return oi(i,t)}if(0<Eo.length){oi(Eo[0],t);for(var n=1;n<Eo.length;n++){var r=Eo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(an!==null&&oi(an,t),un!==null&&oi(un,t),cn!==null&&oi(cn,t),Li.forEach(e),Bi.forEach(e),n=0;n<Xt.length;n++)r=Xt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xt.length&&(n=Xt[0],n.blockedOn===null);)Ip(n),n.blockedOn===null&&Xt.shift()}var Dr=Wt.ReactCurrentBatchConfig,ps=!0;function r1(t,e,n,r){var i=H,o=Dr.transition;Dr.transition=null;try{H=1,nc(t,e,n,r)}finally{H=i,Dr.transition=o}}function i1(t,e,n,r){var i=H,o=Dr.transition;Dr.transition=null;try{H=4,nc(t,e,n,r)}finally{H=i,Dr.transition=o}}function nc(t,e,n,r){if(ps){var i=Ua(t,e,n,r);if(i===null)Ul(t,e,r,ms,n),Cd(t,r);else if(t1(i,t,e,n,r))r.stopPropagation();else if(Cd(t,r),e&4&&-1<e1.indexOf(t)){for(;i!==null;){var o=co(i);if(o!==null&&bp(o),o=Ua(t,e,n,r),o===null&&Ul(t,e,r,ms,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Ul(t,e,r,null,n)}}var ms=null;function Ua(t,e,n,r){if(ms=null,t=Xu(r),t=Ln(t),t!==null)if(e=or(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ms=t,null}function Rp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W0()){case Zu:return 1;case Mp:return 4;case fs:case K0:return 16;case Np:return 536870912;default:return 16}default:return 16}}var tn=null,rc=null,Ko=null;function zp(){if(Ko)return Ko;var t,e=rc,n=e.length,r,i="value"in tn?tn.value:tn.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Ko=i.slice(t,1<r?1-r:void 0)}function Jo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mo(){return!0}function Md(){return!1}function et(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Mo:Md,this.isPropagationStopped=Md,this}return Y(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mo)},persist:function(){},isPersistent:Mo}),e}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ic=et(Yr),uo=Y({},Yr,{view:0,detail:0}),o1=et(uo),zl,Ll,si,Gs=Y({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==si&&(si&&t.type==="mousemove"?(zl=t.screenX-si.screenX,Ll=t.screenY-si.screenY):Ll=zl=0,si=t),zl)},movementY:function(t){return"movementY"in t?t.movementY:Ll}}),Nd=et(Gs),s1=Y({},Gs,{dataTransfer:0}),l1=et(s1),a1=Y({},uo,{relatedTarget:0}),Bl=et(a1),u1=Y({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),c1=et(u1),d1=Y({},Yr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),f1=et(d1),h1=Y({},Yr,{data:0}),Td=et(h1),p1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=g1[t])?!!e[t]:!1}function oc(){return y1}var v1=Y({},uo,{key:function(t){if(t.key){var e=p1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?m1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oc,charCode:function(t){return t.type==="keypress"?Jo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),k1=et(v1),x1=Y({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Od=et(x1),S1=Y({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oc}),w1=et(S1),C1=Y({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),E1=et(C1),M1=Y({},Gs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),N1=et(M1),T1=[9,13,27,32],sc=jt&&"CompositionEvent"in window,xi=null;jt&&"documentMode"in document&&(xi=document.documentMode);var O1=jt&&"TextEvent"in window&&!xi,Lp=jt&&(!sc||xi&&8<xi&&11>=xi),bd=" ",Dd=!1;function Bp(t,e){switch(t){case"keyup":return T1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mr=!1;function b1(t,e){switch(t){case"compositionend":return Fp(e);case"keypress":return e.which!==32?null:(Dd=!0,bd);case"textInput":return t=e.data,t===bd&&Dd?null:t;default:return null}}function D1(t,e){if(mr)return t==="compositionend"||!sc&&Bp(t,e)?(t=zp(),Ko=rc=tn=null,mr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lp&&e.locale!=="ko"?null:e.data;default:return null}}var P1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!P1[t.type]:e==="textarea"}function _p(t,e,n,r){gp(r),e=gs(e,"onChange"),0<e.length&&(n=new ic("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Si=null,_i=null;function A1(t){Gp(t,0)}function Ys(t){var e=vr(t);if(up(e))return t}function I1(t,e){if(t==="change")return e}var jp=!1;if(jt){var Fl;if(jt){var _l="oninput"in document;if(!_l){var Ad=document.createElement("div");Ad.setAttribute("oninput","return;"),_l=typeof Ad.oninput=="function"}Fl=_l}else Fl=!1;jp=Fl&&(!document.documentMode||9<document.documentMode)}function Id(){Si&&(Si.detachEvent("onpropertychange",$p),_i=Si=null)}function $p(t){if(t.propertyName==="value"&&Ys(_i)){var e=[];_p(e,_i,t,Xu(t)),xp(A1,e)}}function R1(t,e,n){t==="focusin"?(Id(),Si=e,_i=n,Si.attachEvent("onpropertychange",$p)):t==="focusout"&&Id()}function z1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ys(_i)}function L1(t,e){if(t==="click")return Ys(e)}function B1(t,e){if(t==="input"||t==="change")return Ys(e)}function F1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kt=typeof Object.is=="function"?Object.is:F1;function ji(t,e){if(kt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Na.call(e,i)||!kt(t[i],e[i]))return!1}return!0}function Rd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zd(t,e){var n=Rd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rd(n)}}function Vp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Vp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hp(){for(var t=window,e=us();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=us(t.document)}return e}function lc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _1(t){var e=Hp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Vp(n.ownerDocument.documentElement,n)){if(r!==null&&lc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=zd(n,o);var s=zd(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var j1=jt&&"documentMode"in document&&11>=document.documentMode,gr=null,Wa=null,wi=null,Ka=!1;function Ld(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ka||gr==null||gr!==us(r)||(r=gr,"selectionStart"in r&&lc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wi&&ji(wi,r)||(wi=r,r=gs(Wa,"onSelect"),0<r.length&&(e=new ic("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gr)))}function No(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yr={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionend:No("Transition","TransitionEnd")},jl={},Up={};jt&&(Up=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function Xs(t){if(jl[t])return jl[t];if(!yr[t])return t;var e=yr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Up)return jl[t]=e[n];return t}var Wp=Xs("animationend"),Kp=Xs("animationiteration"),Jp=Xs("animationstart"),qp=Xs("transitionend"),Qp=new Map,Bd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(t,e){Qp.set(t,e),ir(e,[t])}for(var $l=0;$l<Bd.length;$l++){var Vl=Bd[$l],$1=Vl.toLowerCase(),V1=Vl[0].toUpperCase()+Vl.slice(1);Cn($1,"on"+V1)}Cn(Wp,"onAnimationEnd");Cn(Kp,"onAnimationIteration");Cn(Jp,"onAnimationStart");Cn("dblclick","onDoubleClick");Cn("focusin","onFocus");Cn("focusout","onBlur");Cn(qp,"onTransitionEnd");Br("onMouseEnter",["mouseout","mouseover"]);Br("onMouseLeave",["mouseout","mouseover"]);Br("onPointerEnter",["pointerout","pointerover"]);Br("onPointerLeave",["pointerout","pointerover"]);ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ir("onBeforeInput",["compositionend","keypress","textInput","paste"]);ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H1=new Set("cancel close invalid load scroll toggle".split(" ").concat(pi));function Fd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,$0(r,e,void 0,t),t.currentTarget=null}function Gp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;Fd(i,l,u),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,u=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;Fd(i,l,u),o=a}}}if(ds)throw t=$a,ds=!1,$a=null,t}function K(t,e){var n=e[Ya];n===void 0&&(n=e[Ya]=new Set);var r=t+"__bubble";n.has(r)||(Yp(e,t,2,!1),n.add(r))}function Hl(t,e,n){var r=0;e&&(r|=4),Yp(n,t,r,e)}var To="_reactListening"+Math.random().toString(36).slice(2);function $i(t){if(!t[To]){t[To]=!0,ip.forEach(function(n){n!=="selectionchange"&&(H1.has(n)||Hl(n,!1,t),Hl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[To]||(e[To]=!0,Hl("selectionchange",!1,e))}}function Yp(t,e,n,r){switch(Rp(e)){case 1:var i=r1;break;case 4:i=i1;break;default:i=nc}n=i.bind(null,e,n,t),i=void 0,!ja||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ul(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Ln(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}xp(function(){var u=o,c=Xu(n),d=[];e:{var f=Qp.get(t);if(f!==void 0){var h=ic,p=t;switch(t){case"keypress":if(Jo(n)===0)break e;case"keydown":case"keyup":h=k1;break;case"focusin":p="focus",h=Bl;break;case"focusout":p="blur",h=Bl;break;case"beforeblur":case"afterblur":h=Bl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=l1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=w1;break;case Wp:case Kp:case Jp:h=c1;break;case qp:h=E1;break;case"scroll":h=o1;break;case"wheel":h=N1;break;case"copy":case"cut":case"paste":h=f1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Od}var g=(e&4)!==0,v=!g&&t==="scroll",m=g?f!==null?f+"Capture":null:f;g=[];for(var y=u,k;y!==null;){k=y;var x=k.stateNode;if(k.tag===5&&x!==null&&(k=x,m!==null&&(x=zi(y,m),x!=null&&g.push(Vi(y,x,k)))),v)break;y=y.return}0<g.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Fa&&(p=n.relatedTarget||n.fromElement)&&(Ln(p)||p[$t]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Ln(p):null,p!==null&&(v=or(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(g=Nd,x="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=Od,x="onPointerLeave",m="onPointerEnter",y="pointer"),v=h==null?f:vr(h),k=p==null?f:vr(p),f=new g(x,y+"leave",h,n,c),f.target=v,f.relatedTarget=k,x=null,Ln(c)===u&&(g=new g(m,y+"enter",p,n,c),g.target=k,g.relatedTarget=v,x=g),v=x,h&&p)t:{for(g=h,m=p,y=0,k=g;k;k=ar(k))y++;for(k=0,x=m;x;x=ar(x))k++;for(;0<y-k;)g=ar(g),y--;for(;0<k-y;)m=ar(m),k--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=ar(g),m=ar(m)}g=null}else g=null;h!==null&&_d(d,f,h,g,!1),p!==null&&v!==null&&_d(d,v,p,g,!0)}}e:{if(f=u?vr(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var w=I1;else if(Pd(f))if(jp)w=B1;else{w=z1;var E=R1}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=L1);if(w&&(w=w(t,u))){_p(d,w,n,c);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Ia(f,"number",f.value)}switch(E=u?vr(u):window,t){case"focusin":(Pd(E)||E.contentEditable==="true")&&(gr=E,Wa=u,wi=null);break;case"focusout":wi=Wa=gr=null;break;case"mousedown":Ka=!0;break;case"contextmenu":case"mouseup":case"dragend":Ka=!1,Ld(d,n,c);break;case"selectionchange":if(j1)break;case"keydown":case"keyup":Ld(d,n,c)}var T;if(sc)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else mr?Bp(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(Lp&&n.locale!=="ko"&&(mr||O!=="onCompositionStart"?O==="onCompositionEnd"&&mr&&(T=zp()):(tn=c,rc="value"in tn?tn.value:tn.textContent,mr=!0)),E=gs(u,O),0<E.length&&(O=new Td(O,t,null,n,c),d.push({event:O,listeners:E}),T?O.data=T:(T=Fp(n),T!==null&&(O.data=T)))),(T=O1?b1(t,n):D1(t,n))&&(u=gs(u,"onBeforeInput"),0<u.length&&(c=new Td("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=T))}Gp(d,e)})}function Vi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gs(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=zi(t,n),o!=null&&r.unshift(Vi(t,o,i)),o=zi(t,e),o!=null&&r.push(Vi(t,o,i))),t=t.return}return r}function ar(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _d(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=zi(n,o),a!=null&&s.unshift(Vi(n,a,l))):i||(a=zi(n,o),a!=null&&s.push(Vi(n,a,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var U1=/\r\n?/g,W1=/\u0000|\uFFFD/g;function jd(t){return(typeof t=="string"?t:""+t).replace(U1,`
`).replace(W1,"")}function Oo(t,e,n){if(e=jd(e),jd(t)!==e&&n)throw Error(N(425))}function ys(){}var Ja=null,qa=null;function Qa(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ga=typeof setTimeout=="function"?setTimeout:void 0,K1=typeof clearTimeout=="function"?clearTimeout:void 0,$d=typeof Promise=="function"?Promise:void 0,J1=typeof queueMicrotask=="function"?queueMicrotask:typeof $d<"u"?function(t){return $d.resolve(null).then(t).catch(q1)}:Ga;function q1(t){setTimeout(function(){throw t})}function Wl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Fi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fi(e)}function dn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Vd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xr=Math.random().toString(36).slice(2),Et="__reactFiber$"+Xr,Hi="__reactProps$"+Xr,$t="__reactContainer$"+Xr,Ya="__reactEvents$"+Xr,Q1="__reactListeners$"+Xr,G1="__reactHandles$"+Xr;function Ln(t){var e=t[Et];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$t]||n[Et]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vd(t);t!==null;){if(n=t[Et])return n;t=Vd(t)}return e}t=n,n=t.parentNode}return null}function co(t){return t=t[Et]||t[$t],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(N(33))}function Zs(t){return t[Hi]||null}var Xa=[],kr=-1;function En(t){return{current:t}}function J(t){0>kr||(t.current=Xa[kr],Xa[kr]=null,kr--)}function W(t,e){kr++,Xa[kr]=t.current,t.current=e}var Sn={},be=En(Sn),Ve=En(!1),Gn=Sn;function Fr(t,e){var n=t.type.contextTypes;if(!n)return Sn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function He(t){return t=t.childContextTypes,t!=null}function vs(){J(Ve),J(be)}function Hd(t,e,n){if(be.current!==Sn)throw Error(N(168));W(be,e),W(Ve,n)}function Xp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(N(108,R0(t)||"Unknown",i));return Y({},n,r)}function ks(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sn,Gn=be.current,W(be,t),W(Ve,Ve.current),!0}function Ud(t,e,n){var r=t.stateNode;if(!r)throw Error(N(169));n?(t=Xp(t,e,Gn),r.__reactInternalMemoizedMergedChildContext=t,J(Ve),J(be),W(be,t)):J(Ve),W(Ve,n)}var Rt=null,el=!1,Kl=!1;function Zp(t){Rt===null?Rt=[t]:Rt.push(t)}function Y1(t){el=!0,Zp(t)}function Mn(){if(!Kl&&Rt!==null){Kl=!0;var t=0,e=H;try{var n=Rt;for(H=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rt=null,el=!1}catch(i){throw Rt!==null&&(Rt=Rt.slice(t+1)),Ep(Zu,Mn),i}finally{H=e,Kl=!1}}return null}var xr=[],Sr=0,xs=null,Ss=0,nt=[],rt=0,Yn=null,zt=1,Lt="";function An(t,e){xr[Sr++]=Ss,xr[Sr++]=xs,xs=t,Ss=e}function em(t,e,n){nt[rt++]=zt,nt[rt++]=Lt,nt[rt++]=Yn,Yn=t;var r=zt;t=Lt;var i=32-yt(r)-1;r&=~(1<<i),n+=1;var o=32-yt(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,zt=1<<32-yt(e)+i|n<<i|r,Lt=o+t}else zt=1<<o|n<<i|r,Lt=t}function ac(t){t.return!==null&&(An(t,1),em(t,1,0))}function uc(t){for(;t===xs;)xs=xr[--Sr],xr[Sr]=null,Ss=xr[--Sr],xr[Sr]=null;for(;t===Yn;)Yn=nt[--rt],nt[rt]=null,Lt=nt[--rt],nt[rt]=null,zt=nt[--rt],nt[rt]=null}var Ye=null,Ge=null,q=!1,mt=null;function tm(t,e){var n=ot(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Wd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ye=t,Ge=dn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ye=t,Ge=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yn!==null?{id:zt,overflow:Lt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ot(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ye=t,Ge=null,!0):!1;default:return!1}}function Za(t){return(t.mode&1)!==0&&(t.flags&128)===0}function eu(t){if(q){var e=Ge;if(e){var n=e;if(!Wd(t,e)){if(Za(t))throw Error(N(418));e=dn(n.nextSibling);var r=Ye;e&&Wd(t,e)?tm(r,n):(t.flags=t.flags&-4097|2,q=!1,Ye=t)}}else{if(Za(t))throw Error(N(418));t.flags=t.flags&-4097|2,q=!1,Ye=t}}}function Kd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ye=t}function bo(t){if(t!==Ye)return!1;if(!q)return Kd(t),q=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qa(t.type,t.memoizedProps)),e&&(e=Ge)){if(Za(t))throw nm(),Error(N(418));for(;e;)tm(t,e),e=dn(e.nextSibling)}if(Kd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ge=dn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ge=null}}else Ge=Ye?dn(t.stateNode.nextSibling):null;return!0}function nm(){for(var t=Ge;t;)t=dn(t.nextSibling)}function _r(){Ge=Ye=null,q=!1}function cc(t){mt===null?mt=[t]:mt.push(t)}var X1=Wt.ReactCurrentBatchConfig;function li(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var r=n.stateNode}if(!r)throw Error(N(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,t))}return t}function Do(t,e){throw t=Object.prototype.toString.call(e),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jd(t){var e=t._init;return e(t._payload)}function rm(t){function e(m,y){if(t){var k=m.deletions;k===null?(m.deletions=[y],m.flags|=16):k.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=mn(m,y),m.index=0,m.sibling=null,m}function o(m,y,k){return m.index=k,t?(k=m.alternate,k!==null?(k=k.index,k<y?(m.flags|=2,y):k):(m.flags|=2,y)):(m.flags|=1048576,y)}function s(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,y,k,x){return y===null||y.tag!==6?(y=Zl(k,m.mode,x),y.return=m,y):(y=i(y,k),y.return=m,y)}function a(m,y,k,x){var w=k.type;return w===pr?c(m,y,k.props.children,x,k.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===qt&&Jd(w)===y.type)?(x=i(y,k.props),x.ref=li(m,y,k),x.return=m,x):(x=es(k.type,k.key,k.props,null,m.mode,x),x.ref=li(m,y,k),x.return=m,x)}function u(m,y,k,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==k.containerInfo||y.stateNode.implementation!==k.implementation?(y=ea(k,m.mode,x),y.return=m,y):(y=i(y,k.children||[]),y.return=m,y)}function c(m,y,k,x,w){return y===null||y.tag!==7?(y=Hn(k,m.mode,x,w),y.return=m,y):(y=i(y,k),y.return=m,y)}function d(m,y,k){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Zl(""+y,m.mode,k),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ko:return k=es(y.type,y.key,y.props,null,m.mode,k),k.ref=li(m,null,y),k.return=m,k;case hr:return y=ea(y,m.mode,k),y.return=m,y;case qt:var x=y._init;return d(m,x(y._payload),k)}if(fi(y)||ni(y))return y=Hn(y,m.mode,k,null),y.return=m,y;Do(m,y)}return null}function f(m,y,k,x){var w=y!==null?y.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return w!==null?null:l(m,y,""+k,x);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ko:return k.key===w?a(m,y,k,x):null;case hr:return k.key===w?u(m,y,k,x):null;case qt:return w=k._init,f(m,y,w(k._payload),x)}if(fi(k)||ni(k))return w!==null?null:c(m,y,k,x,null);Do(m,k)}return null}function h(m,y,k,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(k)||null,l(y,m,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ko:return m=m.get(x.key===null?k:x.key)||null,a(y,m,x,w);case hr:return m=m.get(x.key===null?k:x.key)||null,u(y,m,x,w);case qt:var E=x._init;return h(m,y,k,E(x._payload),w)}if(fi(x)||ni(x))return m=m.get(k)||null,c(y,m,x,w,null);Do(y,x)}return null}function p(m,y,k,x){for(var w=null,E=null,T=y,O=y=0,I=null;T!==null&&O<k.length;O++){T.index>O?(I=T,T=null):I=T.sibling;var z=f(m,T,k[O],x);if(z===null){T===null&&(T=I);break}t&&T&&z.alternate===null&&e(m,T),y=o(z,y,O),E===null?w=z:E.sibling=z,E=z,T=I}if(O===k.length)return n(m,T),q&&An(m,O),w;if(T===null){for(;O<k.length;O++)T=d(m,k[O],x),T!==null&&(y=o(T,y,O),E===null?w=T:E.sibling=T,E=T);return q&&An(m,O),w}for(T=r(m,T);O<k.length;O++)I=h(T,m,O,k[O],x),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?O:I.key),y=o(I,y,O),E===null?w=I:E.sibling=I,E=I);return t&&T.forEach(function(we){return e(m,we)}),q&&An(m,O),w}function g(m,y,k,x){var w=ni(k);if(typeof w!="function")throw Error(N(150));if(k=w.call(k),k==null)throw Error(N(151));for(var E=w=null,T=y,O=y=0,I=null,z=k.next();T!==null&&!z.done;O++,z=k.next()){T.index>O?(I=T,T=null):I=T.sibling;var we=f(m,T,z.value,x);if(we===null){T===null&&(T=I);break}t&&T&&we.alternate===null&&e(m,T),y=o(we,y,O),E===null?w=we:E.sibling=we,E=we,T=I}if(z.done)return n(m,T),q&&An(m,O),w;if(T===null){for(;!z.done;O++,z=k.next())z=d(m,z.value,x),z!==null&&(y=o(z,y,O),E===null?w=z:E.sibling=z,E=z);return q&&An(m,O),w}for(T=r(m,T);!z.done;O++,z=k.next())z=h(T,m,O,z.value,x),z!==null&&(t&&z.alternate!==null&&T.delete(z.key===null?O:z.key),y=o(z,y,O),E===null?w=z:E.sibling=z,E=z);return t&&T.forEach(function(bn){return e(m,bn)}),q&&An(m,O),w}function v(m,y,k,x){if(typeof k=="object"&&k!==null&&k.type===pr&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case ko:e:{for(var w=k.key,E=y;E!==null;){if(E.key===w){if(w=k.type,w===pr){if(E.tag===7){n(m,E.sibling),y=i(E,k.props.children),y.return=m,m=y;break e}}else if(E.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===qt&&Jd(w)===E.type){n(m,E.sibling),y=i(E,k.props),y.ref=li(m,E,k),y.return=m,m=y;break e}n(m,E);break}else e(m,E);E=E.sibling}k.type===pr?(y=Hn(k.props.children,m.mode,x,k.key),y.return=m,m=y):(x=es(k.type,k.key,k.props,null,m.mode,x),x.ref=li(m,y,k),x.return=m,m=x)}return s(m);case hr:e:{for(E=k.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===k.containerInfo&&y.stateNode.implementation===k.implementation){n(m,y.sibling),y=i(y,k.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=ea(k,m.mode,x),y.return=m,m=y}return s(m);case qt:return E=k._init,v(m,y,E(k._payload),x)}if(fi(k))return p(m,y,k,x);if(ni(k))return g(m,y,k,x);Do(m,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,k),y.return=m,m=y):(n(m,y),y=Zl(k,m.mode,x),y.return=m,m=y),s(m)):n(m,y)}return v}var jr=rm(!0),im=rm(!1),ws=En(null),Cs=null,wr=null,dc=null;function fc(){dc=wr=Cs=null}function hc(t){var e=ws.current;J(ws),t._currentValue=e}function tu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Pr(t,e){Cs=t,dc=wr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($e=!0),t.firstContext=null)}function ct(t){var e=t._currentValue;if(dc!==t)if(t={context:t,memoizedValue:e,next:null},wr===null){if(Cs===null)throw Error(N(308));wr=t,Cs.dependencies={lanes:0,firstContext:t}}else wr=wr.next=t;return e}var Bn=null;function pc(t){Bn===null?Bn=[t]:Bn.push(t)}function om(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,pc(e)):(n.next=i.next,i.next=n),e.interleaved=n,Vt(t,r)}function Vt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qt=!1;function mc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ft(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,V&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vt(t,n)}return i=r.interleaved,i===null?(e.next=e,pc(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vt(t,n)}function qo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ec(t,n)}}function qd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Es(t,e,n,r){var i=t.updateQueue;Qt=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,s===null?o=u:s.next=u,s=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==s&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(o!==null){var d=i.baseState;s=0,c=u=a=null,l=o;do{var f=l.lane,h=l.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,g=l;switch(f=e,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Y({},d,f);break e;case 2:Qt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else h={eventTime:h,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=h,a=d):c=c.next=h,s|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Zn|=s,t.lanes=s,t.memoizedState=d}}function Qd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(N(191,i));i.call(r)}}}var fo={},Tt=En(fo),Ui=En(fo),Wi=En(fo);function Fn(t){if(t===fo)throw Error(N(174));return t}function gc(t,e){switch(W(Wi,e),W(Ui,t),W(Tt,fo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:za(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=za(e,t)}J(Tt),W(Tt,e)}function $r(){J(Tt),J(Ui),J(Wi)}function lm(t){Fn(Wi.current);var e=Fn(Tt.current),n=za(e,t.type);e!==n&&(W(Ui,t),W(Tt,n))}function yc(t){Ui.current===t&&(J(Tt),J(Ui))}var Q=En(0);function Ms(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jl=[];function vc(){for(var t=0;t<Jl.length;t++)Jl[t]._workInProgressVersionPrimary=null;Jl.length=0}var Qo=Wt.ReactCurrentDispatcher,ql=Wt.ReactCurrentBatchConfig,Xn=0,G=null,ie=null,ue=null,Ns=!1,Ci=!1,Ki=0,Z1=0;function Ce(){throw Error(N(321))}function kc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!kt(t[n],e[n]))return!1;return!0}function xc(t,e,n,r,i,o){if(Xn=o,G=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qo.current=t===null||t.memoizedState===null?rv:iv,t=n(r,i),Ci){o=0;do{if(Ci=!1,Ki=0,25<=o)throw Error(N(301));o+=1,ue=ie=null,e.updateQueue=null,Qo.current=ov,t=n(r,i)}while(Ci)}if(Qo.current=Ts,e=ie!==null&&ie.next!==null,Xn=0,ue=ie=G=null,Ns=!1,e)throw Error(N(300));return t}function Sc(){var t=Ki!==0;return Ki=0,t}function wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ue===null?G.memoizedState=ue=t:ue=ue.next=t,ue}function dt(){if(ie===null){var t=G.alternate;t=t!==null?t.memoizedState:null}else t=ie.next;var e=ue===null?G.memoizedState:ue.next;if(e!==null)ue=e,ie=t;else{if(t===null)throw Error(N(310));ie=t,t={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},ue===null?G.memoizedState=ue=t:ue=ue.next=t}return ue}function Ji(t,e){return typeof e=="function"?e(t):e}function Ql(t){var e=dt(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var r=ie,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,u=o;do{var c=u.lane;if((Xn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,s=r):a=a.next=d,G.lanes|=c,Zn|=c}u=u.next}while(u!==null&&u!==o);a===null?s=r:a.next=l,kt(r,e.memoizedState)||($e=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,G.lanes|=o,Zn|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gl(t){var e=dt(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);kt(o,e.memoizedState)||($e=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function am(){}function um(t,e){var n=G,r=dt(),i=e(),o=!kt(r.memoizedState,i);if(o&&(r.memoizedState=i,$e=!0),r=r.queue,wc(fm.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ue!==null&&ue.memoizedState.tag&1){if(n.flags|=2048,qi(9,dm.bind(null,n,r,i,e),void 0,null),de===null)throw Error(N(349));Xn&30||cm(n,e,i)}return i}function cm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=G.updateQueue,e===null?(e={lastEffect:null,stores:null},G.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dm(t,e,n,r){e.value=n,e.getSnapshot=r,hm(e)&&pm(t)}function fm(t,e,n){return n(function(){hm(e)&&pm(t)})}function hm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kt(t,n)}catch{return!0}}function pm(t){var e=Vt(t,1);e!==null&&vt(e,t,1,-1)}function Gd(t){var e=wt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:t},e.queue=t,t=t.dispatch=nv.bind(null,G,t),[e.memoizedState,t]}function qi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=G.updateQueue,e===null?(e={lastEffect:null,stores:null},G.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function mm(){return dt().memoizedState}function Go(t,e,n,r){var i=wt();G.flags|=t,i.memoizedState=qi(1|e,n,void 0,r===void 0?null:r)}function tl(t,e,n,r){var i=dt();r=r===void 0?null:r;var o=void 0;if(ie!==null){var s=ie.memoizedState;if(o=s.destroy,r!==null&&kc(r,s.deps)){i.memoizedState=qi(e,n,o,r);return}}G.flags|=t,i.memoizedState=qi(1|e,n,o,r)}function Yd(t,e){return Go(8390656,8,t,e)}function wc(t,e){return tl(2048,8,t,e)}function gm(t,e){return tl(4,2,t,e)}function ym(t,e){return tl(4,4,t,e)}function vm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function km(t,e,n){return n=n!=null?n.concat([t]):null,tl(4,4,vm.bind(null,e,t),n)}function Cc(){}function xm(t,e){var n=dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Sm(t,e){var n=dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function wm(t,e,n){return Xn&21?(kt(n,e)||(n=Tp(),G.lanes|=n,Zn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$e=!0),t.memoizedState=n)}function ev(t,e){var n=H;H=n!==0&&4>n?n:4,t(!0);var r=ql.transition;ql.transition={};try{t(!1),e()}finally{H=n,ql.transition=r}}function Cm(){return dt().memoizedState}function tv(t,e,n){var r=pn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Em(t))Mm(e,n);else if(n=om(t,e,n,r),n!==null){var i=Ie();vt(n,t,r,i),Nm(n,e,r)}}function nv(t,e,n){var r=pn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Em(t))Mm(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,kt(l,s)){var a=e.interleaved;a===null?(i.next=i,pc(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=om(t,e,i,r),n!==null&&(i=Ie(),vt(n,t,r,i),Nm(n,e,r))}}function Em(t){var e=t.alternate;return t===G||e!==null&&e===G}function Mm(t,e){Ci=Ns=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Nm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ec(t,n)}}var Ts={readContext:ct,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},rv={readContext:ct,useCallback:function(t,e){return wt().memoizedState=[t,e===void 0?null:e],t},useContext:ct,useEffect:Yd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Go(4194308,4,vm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Go(4194308,4,t,e)},useInsertionEffect:function(t,e){return Go(4,2,t,e)},useMemo:function(t,e){var n=wt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tv.bind(null,G,t),[r.memoizedState,t]},useRef:function(t){var e=wt();return t={current:t},e.memoizedState=t},useState:Gd,useDebugValue:Cc,useDeferredValue:function(t){return wt().memoizedState=t},useTransition:function(){var t=Gd(!1),e=t[0];return t=ev.bind(null,t[1]),wt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=G,i=wt();if(q){if(n===void 0)throw Error(N(407));n=n()}else{if(n=e(),de===null)throw Error(N(349));Xn&30||cm(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Yd(fm.bind(null,r,o,t),[t]),r.flags|=2048,qi(9,dm.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=wt(),e=de.identifierPrefix;if(q){var n=Lt,r=zt;n=(r&~(1<<32-yt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ki++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Z1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iv={readContext:ct,useCallback:xm,useContext:ct,useEffect:wc,useImperativeHandle:km,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:Sm,useReducer:Ql,useRef:mm,useState:function(){return Ql(Ji)},useDebugValue:Cc,useDeferredValue:function(t){var e=dt();return wm(e,ie.memoizedState,t)},useTransition:function(){var t=Ql(Ji)[0],e=dt().memoizedState;return[t,e]},useMutableSource:am,useSyncExternalStore:um,useId:Cm,unstable_isNewReconciler:!1},ov={readContext:ct,useCallback:xm,useContext:ct,useEffect:wc,useImperativeHandle:km,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:Sm,useReducer:Gl,useRef:mm,useState:function(){return Gl(Ji)},useDebugValue:Cc,useDeferredValue:function(t){var e=dt();return ie===null?e.memoizedState=t:wm(e,ie.memoizedState,t)},useTransition:function(){var t=Gl(Ji)[0],e=dt().memoizedState;return[t,e]},useMutableSource:am,useSyncExternalStore:um,useId:Cm,unstable_isNewReconciler:!1};function ht(t,e){if(t&&t.defaultProps){e=Y({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Y({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nl={isMounted:function(t){return(t=t._reactInternals)?or(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ie(),i=pn(t),o=Ft(r,i);o.payload=e,n!=null&&(o.callback=n),e=fn(t,o,i),e!==null&&(vt(e,t,i,r),qo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ie(),i=pn(t),o=Ft(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=fn(t,o,i),e!==null&&(vt(e,t,i,r),qo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ie(),r=pn(t),i=Ft(n,r);i.tag=2,e!=null&&(i.callback=e),e=fn(t,i,r),e!==null&&(vt(e,t,r,n),qo(e,t,r))}};function Xd(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!ji(n,r)||!ji(i,o):!0}function Tm(t,e,n){var r=!1,i=Sn,o=e.contextType;return typeof o=="object"&&o!==null?o=ct(o):(i=He(e)?Gn:be.current,r=e.contextTypes,o=(r=r!=null)?Fr(t,i):Sn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Zd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&nl.enqueueReplaceState(e,e.state,null)}function ru(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},mc(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ct(o):(o=He(e)?Gn:be.current,i.context=Fr(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(nu(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&nl.enqueueReplaceState(i,i.state,null),Es(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Vr(t,e){try{var n="",r=e;do n+=I0(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Yl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function iu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sv=typeof WeakMap=="function"?WeakMap:Map;function Om(t,e,n){n=Ft(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){bs||(bs=!0,pu=r),iu(t,e)},n}function bm(t,e,n){n=Ft(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){iu(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){iu(t,e),typeof r!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function ef(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sv;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=xv.bind(null,t,e,n),e.then(t,t))}function tf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function nf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ft(-1,1),e.tag=2,fn(n,e,1))),n.lanes|=1),t)}var lv=Wt.ReactCurrentOwner,$e=!1;function Ae(t,e,n,r){e.child=t===null?im(e,null,n,r):jr(e,t.child,n,r)}function rf(t,e,n,r,i){n=n.render;var o=e.ref;return Pr(e,i),r=xc(t,e,n,r,o,i),n=Sc(),t!==null&&!$e?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ht(t,e,i)):(q&&n&&ac(e),e.flags|=1,Ae(t,e,r,i),e.child)}function of(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Pc(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Dm(t,e,o,r,i)):(t=es(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:ji,n(s,r)&&t.ref===e.ref)return Ht(t,e,i)}return e.flags|=1,t=mn(o,r),t.ref=e.ref,t.return=e,e.child=t}function Dm(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(ji(o,r)&&t.ref===e.ref)if($e=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&($e=!0);else return e.lanes=t.lanes,Ht(t,e,i)}return ou(t,e,n,r,i)}function Pm(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},W(Er,qe),qe|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,W(Er,qe),qe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,W(Er,qe),qe|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,W(Er,qe),qe|=r;return Ae(t,e,i,n),e.child}function Am(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ou(t,e,n,r,i){var o=He(n)?Gn:be.current;return o=Fr(e,o),Pr(e,i),n=xc(t,e,n,r,o,i),r=Sc(),t!==null&&!$e?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ht(t,e,i)):(q&&r&&ac(e),e.flags|=1,Ae(t,e,n,i),e.child)}function sf(t,e,n,r,i){if(He(n)){var o=!0;ks(e)}else o=!1;if(Pr(e,i),e.stateNode===null)Yo(t,e),Tm(e,n,r),ru(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=ct(u):(u=He(n)?Gn:be.current,u=Fr(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Zd(e,s,r,u),Qt=!1;var f=e.memoizedState;s.state=f,Es(e,r,s,i),a=e.memoizedState,l!==r||f!==a||Ve.current||Qt?(typeof c=="function"&&(nu(e,n,c,r),a=e.memoizedState),(l=Qt||Xd(e,n,l,r,f,a,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=u,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,sm(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:ht(e.type,l),s.props=u,d=e.pendingProps,f=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=ct(a):(a=He(n)?Gn:be.current,a=Fr(e,a));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==d||f!==a)&&Zd(e,s,r,a),Qt=!1,f=e.memoizedState,s.state=f,Es(e,r,s,i);var p=e.memoizedState;l!==d||f!==p||Ve.current||Qt?(typeof h=="function"&&(nu(e,n,h,r),p=e.memoizedState),(u=Qt||Xd(e,n,u,r,f,p,a)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=a,r=u):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return su(t,e,n,r,o,i)}function su(t,e,n,r,i,o){Am(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Ud(e,n,!1),Ht(t,e,o);r=e.stateNode,lv.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=jr(e,t.child,null,o),e.child=jr(e,null,l,o)):Ae(t,e,l,o),e.memoizedState=r.state,i&&Ud(e,n,!0),e.child}function Im(t){var e=t.stateNode;e.pendingContext?Hd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hd(t,e.context,!1),gc(t,e.containerInfo)}function lf(t,e,n,r,i){return _r(),cc(i),e.flags|=256,Ae(t,e,n,r),e.child}var lu={dehydrated:null,treeContext:null,retryLane:0};function au(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rm(t,e,n){var r=e.pendingProps,i=Q.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),W(Q,i&1),t===null)return eu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=ol(s,r,0,null),t=Hn(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=au(n),e.memoizedState=lu,t):Ec(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return av(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=mn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=mn(l,o):(o=Hn(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?au(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=lu,r}return o=t.child,t=o.sibling,r=mn(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ec(t,e){return e=ol({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Po(t,e,n,r){return r!==null&&cc(r),jr(e,t.child,null,n),t=Ec(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function av(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Yl(Error(N(422))),Po(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=ol({mode:"visible",children:r.children},i,0,null),o=Hn(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&jr(e,t.child,null,s),e.child.memoizedState=au(s),e.memoizedState=lu,o);if(!(e.mode&1))return Po(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(N(419)),r=Yl(o,r,void 0),Po(t,e,s,r)}if(l=(s&t.childLanes)!==0,$e||l){if(r=de,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Vt(t,i),vt(r,t,i,-1))}return Dc(),r=Yl(Error(N(421))),Po(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Sv.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ge=dn(i.nextSibling),Ye=e,q=!0,mt=null,t!==null&&(nt[rt++]=zt,nt[rt++]=Lt,nt[rt++]=Yn,zt=t.id,Lt=t.overflow,Yn=e),e=Ec(e,r.children),e.flags|=4096,e)}function af(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tu(t.return,e,n)}function Xl(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function zm(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ae(t,e,r.children,n),r=Q.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&af(t,n,e);else if(t.tag===19)af(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(W(Q,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ms(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Xl(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ms(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Xl(e,!0,n,null,o);break;case"together":Xl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ht(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(N(153));if(e.child!==null){for(t=e.child,n=mn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=mn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uv(t,e,n){switch(e.tag){case 3:Im(e),_r();break;case 5:lm(e);break;case 1:He(e.type)&&ks(e);break;case 4:gc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;W(ws,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(W(Q,Q.current&1),e.flags|=128,null):n&e.child.childLanes?Rm(t,e,n):(W(Q,Q.current&1),t=Ht(t,e,n),t!==null?t.sibling:null);W(Q,Q.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),W(Q,Q.current),r)break;return null;case 22:case 23:return e.lanes=0,Pm(t,e,n)}return Ht(t,e,n)}var Lm,uu,Bm,Fm;Lm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uu=function(){};Bm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fn(Tt.current);var o=null;switch(n){case"input":i=Pa(t,i),r=Pa(t,r),o=[];break;case"select":i=Y({},i,{value:void 0}),r=Y({},r,{value:void 0}),o=[];break;case"textarea":i=Ra(t,i),r=Ra(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ys)}La(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ii.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(o||(o=[]),o.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ii.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&K("scroll",t),o||l===a||(o=[])):(o=o||[]).push(u,a))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};Fm=function(t,e,n,r){n!==r&&(e.flags|=4)};function ai(t,e){if(!q)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ee(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cv(t,e,n){var r=e.pendingProps;switch(uc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(e),null;case 1:return He(e.type)&&vs(),Ee(e),null;case 3:return r=e.stateNode,$r(),J(Ve),J(be),vc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mt!==null&&(yu(mt),mt=null))),uu(t,e),Ee(e),null;case 5:yc(e);var i=Fn(Wi.current);if(n=e.type,t!==null&&e.stateNode!=null)Bm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(N(166));return Ee(e),null}if(t=Fn(Tt.current),bo(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Et]=e,r[Hi]=o,t=(e.mode&1)!==0,n){case"dialog":K("cancel",r),K("close",r);break;case"iframe":case"object":case"embed":K("load",r);break;case"video":case"audio":for(i=0;i<pi.length;i++)K(pi[i],r);break;case"source":K("error",r);break;case"img":case"image":case"link":K("error",r),K("load",r);break;case"details":K("toggle",r);break;case"input":gd(r,o),K("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},K("invalid",r);break;case"textarea":vd(r,o),K("invalid",r)}La(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Oo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Oo(r.textContent,l,t),i=["children",""+l]):Ii.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&K("scroll",r)}switch(n){case"input":xo(r),yd(r,o,!0);break;case"textarea":xo(r),kd(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ys)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Et]=e,t[Hi]=r,Lm(t,e,!1,!1),e.stateNode=t;e:{switch(s=Ba(n,r),n){case"dialog":K("cancel",t),K("close",t),i=r;break;case"iframe":case"object":case"embed":K("load",t),i=r;break;case"video":case"audio":for(i=0;i<pi.length;i++)K(pi[i],t);i=r;break;case"source":K("error",t),i=r;break;case"img":case"image":case"link":K("error",t),K("load",t),i=r;break;case"details":K("toggle",t),i=r;break;case"input":gd(t,r),i=Pa(t,r),K("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Y({},r,{value:void 0}),K("invalid",t);break;case"textarea":vd(t,r),i=Ra(t,r),K("invalid",t);break;default:i=r}La(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?mp(t,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&hp(t,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Ri(t,a):typeof a=="number"&&Ri(t,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ii.hasOwnProperty(o)?a!=null&&o==="onScroll"&&K("scroll",t):a!=null&&qu(t,o,a,s))}switch(n){case"input":xo(t),yd(t,r,!1);break;case"textarea":xo(t),kd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xn(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Tr(t,!!r.multiple,o,!1):r.defaultValue!=null&&Tr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ys)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ee(e),null;case 6:if(t&&e.stateNode!=null)Fm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(N(166));if(n=Fn(Wi.current),Fn(Tt.current),bo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Et]=e,(o=r.nodeValue!==n)&&(t=Ye,t!==null))switch(t.tag){case 3:Oo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Oo(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Et]=e,e.stateNode=r}return Ee(e),null;case 13:if(J(Q),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(q&&Ge!==null&&e.mode&1&&!(e.flags&128))nm(),_r(),e.flags|=98560,o=!1;else if(o=bo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(N(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(N(317));o[Et]=e}else _r(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ee(e),o=!1}else mt!==null&&(yu(mt),mt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Q.current&1?se===0&&(se=3):Dc())),e.updateQueue!==null&&(e.flags|=4),Ee(e),null);case 4:return $r(),uu(t,e),t===null&&$i(e.stateNode.containerInfo),Ee(e),null;case 10:return hc(e.type._context),Ee(e),null;case 17:return He(e.type)&&vs(),Ee(e),null;case 19:if(J(Q),o=e.memoizedState,o===null)return Ee(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)ai(o,!1);else{if(se!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Ms(t),s!==null){for(e.flags|=128,ai(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return W(Q,Q.current&1|2),e.child}t=t.sibling}o.tail!==null&&te()>Hr&&(e.flags|=128,r=!0,ai(o,!1),e.lanes=4194304)}else{if(!r)if(t=Ms(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ai(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!q)return Ee(e),null}else 2*te()-o.renderingStartTime>Hr&&n!==1073741824&&(e.flags|=128,r=!0,ai(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=te(),e.sibling=null,n=Q.current,W(Q,r?n&1|2:n&1),e):(Ee(e),null);case 22:case 23:return bc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qe&1073741824&&(Ee(e),e.subtreeFlags&6&&(e.flags|=8192)):Ee(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function dv(t,e){switch(uc(e),e.tag){case 1:return He(e.type)&&vs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $r(),J(Ve),J(be),vc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yc(e),null;case 13:if(J(Q),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(N(340));_r()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return J(Q),null;case 4:return $r(),null;case 10:return hc(e.type._context),null;case 22:case 23:return bc(),null;case 24:return null;default:return null}}var Ao=!1,Te=!1,fv=typeof WeakSet=="function"?WeakSet:Set,D=null;function Cr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){X(t,e,r)}else n.current=null}function cu(t,e,n){try{n()}catch(r){X(t,e,r)}}var uf=!1;function hv(t,e){if(Ja=ps,t=Hp(),lc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,a=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(l=s+i),d!==o||r!==0&&d.nodeType!==3||(a=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++u===i&&(l=s),f===o&&++c===r&&(a=s),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(qa={focusedElem:t,selectionRange:n},ps=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:ht(e.type,g),v);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(x){X(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return p=uf,uf=!1,p}function Ei(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&cu(e,n,o)}i=i.next}while(i!==r)}}function rl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function du(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _m(t){var e=t.alternate;e!==null&&(t.alternate=null,_m(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Et],delete e[Hi],delete e[Ya],delete e[Q1],delete e[G1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jm(t){return t.tag===5||t.tag===3||t.tag===4}function cf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ys));else if(r!==4&&(t=t.child,t!==null))for(fu(t,e,n),t=t.sibling;t!==null;)fu(t,e,n),t=t.sibling}function hu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(hu(t,e,n),t=t.sibling;t!==null;)hu(t,e,n),t=t.sibling}var me=null,pt=!1;function Kt(t,e,n){for(n=n.child;n!==null;)$m(t,e,n),n=n.sibling}function $m(t,e,n){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(Qs,n)}catch{}switch(n.tag){case 5:Te||Cr(n,e);case 6:var r=me,i=pt;me=null,Kt(t,e,n),me=r,pt=i,me!==null&&(pt?(t=me,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):me.removeChild(n.stateNode));break;case 18:me!==null&&(pt?(t=me,n=n.stateNode,t.nodeType===8?Wl(t.parentNode,n):t.nodeType===1&&Wl(t,n),Fi(t)):Wl(me,n.stateNode));break;case 4:r=me,i=pt,me=n.stateNode.containerInfo,pt=!0,Kt(t,e,n),me=r,pt=i;break;case 0:case 11:case 14:case 15:if(!Te&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&cu(n,e,s),i=i.next}while(i!==r)}Kt(t,e,n);break;case 1:if(!Te&&(Cr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){X(n,e,l)}Kt(t,e,n);break;case 21:Kt(t,e,n);break;case 22:n.mode&1?(Te=(r=Te)||n.memoizedState!==null,Kt(t,e,n),Te=r):Kt(t,e,n);break;default:Kt(t,e,n)}}function df(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fv),e.forEach(function(r){var i=wv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ft(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:me=l.stateNode,pt=!1;break e;case 3:me=l.stateNode.containerInfo,pt=!0;break e;case 4:me=l.stateNode.containerInfo,pt=!0;break e}l=l.return}if(me===null)throw Error(N(160));$m(o,s,i),me=null,pt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){X(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Vm(e,t),e=e.sibling}function Vm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ft(e,t),St(t),r&4){try{Ei(3,t,t.return),rl(3,t)}catch(g){X(t,t.return,g)}try{Ei(5,t,t.return)}catch(g){X(t,t.return,g)}}break;case 1:ft(e,t),St(t),r&512&&n!==null&&Cr(n,n.return);break;case 5:if(ft(e,t),St(t),r&512&&n!==null&&Cr(n,n.return),t.flags&32){var i=t.stateNode;try{Ri(i,"")}catch(g){X(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&cp(i,o),Ba(l,s);var u=Ba(l,o);for(s=0;s<a.length;s+=2){var c=a[s],d=a[s+1];c==="style"?mp(i,d):c==="dangerouslySetInnerHTML"?hp(i,d):c==="children"?Ri(i,d):qu(i,c,d,u)}switch(l){case"input":Aa(i,o);break;case"textarea":dp(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Tr(i,!!o.multiple,h,!1):f!==!!o.multiple&&(o.defaultValue!=null?Tr(i,!!o.multiple,o.defaultValue,!0):Tr(i,!!o.multiple,o.multiple?[]:"",!1))}i[Hi]=o}catch(g){X(t,t.return,g)}}break;case 6:if(ft(e,t),St(t),r&4){if(t.stateNode===null)throw Error(N(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){X(t,t.return,g)}}break;case 3:if(ft(e,t),St(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fi(e.containerInfo)}catch(g){X(t,t.return,g)}break;case 4:ft(e,t),St(t);break;case 13:ft(e,t),St(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Tc=te())),r&4&&df(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Te=(u=Te)||c,ft(e,t),Te=u):ft(e,t),St(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(D=t,c=t.child;c!==null;){for(d=D=c;D!==null;){switch(f=D,h=f.child,f.tag){case 0:case 11:case 14:case 15:Ei(4,f,f.return);break;case 1:Cr(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){X(r,n,g)}}break;case 5:Cr(f,f.return);break;case 22:if(f.memoizedState!==null){hf(d);continue}}h!==null?(h.return=f,D=h):hf(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,a=d.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=pp("display",s))}catch(g){X(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){X(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ft(e,t),St(t),r&4&&df(t);break;case 21:break;default:ft(e,t),St(t)}}function St(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jm(n)){var r=n;break e}n=n.return}throw Error(N(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ri(i,""),r.flags&=-33);var o=cf(t);hu(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=cf(t);fu(t,l,s);break;default:throw Error(N(161))}}catch(a){X(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pv(t,e,n){D=t,Hm(t)}function Hm(t,e,n){for(var r=(t.mode&1)!==0;D!==null;){var i=D,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Ao;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Te;l=Ao;var u=Te;if(Ao=s,(Te=a)&&!u)for(D=i;D!==null;)s=D,a=s.child,s.tag===22&&s.memoizedState!==null?pf(i):a!==null?(a.return=s,D=a):pf(i);for(;o!==null;)D=o,Hm(o),o=o.sibling;D=i,Ao=l,Te=u}ff(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,D=o):ff(t)}}function ff(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Te||rl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Te)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ht(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Qd(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qd(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Fi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Te||e.flags&512&&du(e)}catch(f){X(e,e.return,f)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function hf(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function pf(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(a){X(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){X(e,i,a)}}var o=e.return;try{du(e)}catch(a){X(e,o,a)}break;case 5:var s=e.return;try{du(e)}catch(a){X(e,s,a)}}}catch(a){X(e,e.return,a)}if(e===t){D=null;break}var l=e.sibling;if(l!==null){l.return=e.return,D=l;break}D=e.return}}var mv=Math.ceil,Os=Wt.ReactCurrentDispatcher,Mc=Wt.ReactCurrentOwner,lt=Wt.ReactCurrentBatchConfig,V=0,de=null,ne=null,ke=0,qe=0,Er=En(0),se=0,Qi=null,Zn=0,il=0,Nc=0,Mi=null,je=null,Tc=0,Hr=1/0,At=null,bs=!1,pu=null,hn=null,Io=!1,nn=null,Ds=0,Ni=0,mu=null,Xo=-1,Zo=0;function Ie(){return V&6?te():Xo!==-1?Xo:Xo=te()}function pn(t){return t.mode&1?V&2&&ke!==0?ke&-ke:X1.transition!==null?(Zo===0&&(Zo=Tp()),Zo):(t=H,t!==0||(t=window.event,t=t===void 0?16:Rp(t.type)),t):1}function vt(t,e,n,r){if(50<Ni)throw Ni=0,mu=null,Error(N(185));ao(t,n,r),(!(V&2)||t!==de)&&(t===de&&(!(V&2)&&(il|=n),se===4&&Zt(t,ke)),Ue(t,r),n===1&&V===0&&!(e.mode&1)&&(Hr=te()+500,el&&Mn()))}function Ue(t,e){var n=t.callbackNode;X0(t,e);var r=hs(t,t===de?ke:0);if(r===0)n!==null&&wd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&wd(n),e===1)t.tag===0?Y1(mf.bind(null,t)):Zp(mf.bind(null,t)),J1(function(){!(V&6)&&Mn()}),n=null;else{switch(Op(r)){case 1:n=Zu;break;case 4:n=Mp;break;case 16:n=fs;break;case 536870912:n=Np;break;default:n=fs}n=Ym(n,Um.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Um(t,e){if(Xo=-1,Zo=0,V&6)throw Error(N(327));var n=t.callbackNode;if(Ar()&&t.callbackNode!==n)return null;var r=hs(t,t===de?ke:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ps(t,r);else{e=r;var i=V;V|=2;var o=Km();(de!==t||ke!==e)&&(At=null,Hr=te()+500,Vn(t,e));do try{vv();break}catch(l){Wm(t,l)}while(!0);fc(),Os.current=o,V=i,ne!==null?e=0:(de=null,ke=0,e=se)}if(e!==0){if(e===2&&(i=Va(t),i!==0&&(r=i,e=gu(t,i))),e===1)throw n=Qi,Vn(t,0),Zt(t,r),Ue(t,te()),n;if(e===6)Zt(t,r);else{if(i=t.current.alternate,!(r&30)&&!gv(i)&&(e=Ps(t,r),e===2&&(o=Va(t),o!==0&&(r=o,e=gu(t,o))),e===1))throw n=Qi,Vn(t,0),Zt(t,r),Ue(t,te()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(N(345));case 2:In(t,je,At);break;case 3:if(Zt(t,r),(r&130023424)===r&&(e=Tc+500-te(),10<e)){if(hs(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ie(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ga(In.bind(null,t,je,At),e);break}In(t,je,At);break;case 4:if(Zt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-yt(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=te()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mv(r/1960))-r,10<r){t.timeoutHandle=Ga(In.bind(null,t,je,At),r);break}In(t,je,At);break;case 5:In(t,je,At);break;default:throw Error(N(329))}}}return Ue(t,te()),t.callbackNode===n?Um.bind(null,t):null}function gu(t,e){var n=Mi;return t.current.memoizedState.isDehydrated&&(Vn(t,e).flags|=256),t=Ps(t,e),t!==2&&(e=je,je=n,e!==null&&yu(e)),t}function yu(t){je===null?je=t:je.push.apply(je,t)}function gv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!kt(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zt(t,e){for(e&=~Nc,e&=~il,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yt(e),r=1<<n;t[n]=-1,e&=~r}}function mf(t){if(V&6)throw Error(N(327));Ar();var e=hs(t,0);if(!(e&1))return Ue(t,te()),null;var n=Ps(t,e);if(t.tag!==0&&n===2){var r=Va(t);r!==0&&(e=r,n=gu(t,r))}if(n===1)throw n=Qi,Vn(t,0),Zt(t,e),Ue(t,te()),n;if(n===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,In(t,je,At),Ue(t,te()),null}function Oc(t,e){var n=V;V|=1;try{return t(e)}finally{V=n,V===0&&(Hr=te()+500,el&&Mn())}}function er(t){nn!==null&&nn.tag===0&&!(V&6)&&Ar();var e=V;V|=1;var n=lt.transition,r=H;try{if(lt.transition=null,H=1,t)return t()}finally{H=r,lt.transition=n,V=e,!(V&6)&&Mn()}}function bc(){qe=Er.current,J(Er)}function Vn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,K1(n)),ne!==null)for(n=ne.return;n!==null;){var r=n;switch(uc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vs();break;case 3:$r(),J(Ve),J(be),vc();break;case 5:yc(r);break;case 4:$r();break;case 13:J(Q);break;case 19:J(Q);break;case 10:hc(r.type._context);break;case 22:case 23:bc()}n=n.return}if(de=t,ne=t=mn(t.current,null),ke=qe=e,se=0,Qi=null,Nc=il=Zn=0,je=Mi=null,Bn!==null){for(e=0;e<Bn.length;e++)if(n=Bn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Bn=null}return t}function Wm(t,e){do{var n=ne;try{if(fc(),Qo.current=Ts,Ns){for(var r=G.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ns=!1}if(Xn=0,ue=ie=G=null,Ci=!1,Ki=0,Mc.current=null,n===null||n.return===null){se=1,Qi=e,ne=null;break}e:{var o=t,s=n.return,l=n,a=e;if(e=ke,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=tf(s);if(h!==null){h.flags&=-257,nf(h,s,l,o,e),h.mode&1&&ef(o,u,e),e=h,a=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(a),e.updateQueue=g}else p.add(a);break e}else{if(!(e&1)){ef(o,u,e),Dc();break e}a=Error(N(426))}}else if(q&&l.mode&1){var v=tf(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),nf(v,s,l,o,e),cc(Vr(a,l));break e}}o=a=Vr(a,l),se!==4&&(se=2),Mi===null?Mi=[o]:Mi.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var m=Om(o,a,e);qd(o,m);break e;case 1:l=a;var y=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(hn===null||!hn.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var x=bm(o,l,e);qd(o,x);break e}}o=o.return}while(o!==null)}qm(n)}catch(w){e=w,ne===n&&n!==null&&(ne=n=n.return);continue}break}while(!0)}function Km(){var t=Os.current;return Os.current=Ts,t===null?Ts:t}function Dc(){(se===0||se===3||se===2)&&(se=4),de===null||!(Zn&268435455)&&!(il&268435455)||Zt(de,ke)}function Ps(t,e){var n=V;V|=2;var r=Km();(de!==t||ke!==e)&&(At=null,Vn(t,e));do try{yv();break}catch(i){Wm(t,i)}while(!0);if(fc(),V=n,Os.current=r,ne!==null)throw Error(N(261));return de=null,ke=0,se}function yv(){for(;ne!==null;)Jm(ne)}function vv(){for(;ne!==null&&!H0();)Jm(ne)}function Jm(t){var e=Gm(t.alternate,t,qe);t.memoizedProps=t.pendingProps,e===null?qm(t):ne=e,Mc.current=null}function qm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dv(n,e),n!==null){n.flags&=32767,ne=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{se=6,ne=null;return}}else if(n=cv(n,e,qe),n!==null){ne=n;return}if(e=e.sibling,e!==null){ne=e;return}ne=e=t}while(e!==null);se===0&&(se=5)}function In(t,e,n){var r=H,i=lt.transition;try{lt.transition=null,H=1,kv(t,e,n,r)}finally{lt.transition=i,H=r}return null}function kv(t,e,n,r){do Ar();while(nn!==null);if(V&6)throw Error(N(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Z0(t,o),t===de&&(ne=de=null,ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Io||(Io=!0,Ym(fs,function(){return Ar(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=lt.transition,lt.transition=null;var s=H;H=1;var l=V;V|=4,Mc.current=null,hv(t,n),Vm(n,t),_1(qa),ps=!!Ja,qa=Ja=null,t.current=n,pv(n),U0(),V=l,H=s,lt.transition=o}else t.current=n;if(Io&&(Io=!1,nn=t,Ds=i),o=t.pendingLanes,o===0&&(hn=null),J0(n.stateNode),Ue(t,te()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(bs)throw bs=!1,t=pu,pu=null,t;return Ds&1&&t.tag!==0&&Ar(),o=t.pendingLanes,o&1?t===mu?Ni++:(Ni=0,mu=t):Ni=0,Mn(),null}function Ar(){if(nn!==null){var t=Op(Ds),e=lt.transition,n=H;try{if(lt.transition=null,H=16>t?16:t,nn===null)var r=!1;else{if(t=nn,nn=null,Ds=0,V&6)throw Error(N(331));var i=V;for(V|=4,D=t.current;D!==null;){var o=D,s=o.child;if(D.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(D=u;D!==null;){var c=D;switch(c.tag){case 0:case 11:case 15:Ei(8,c,o)}var d=c.child;if(d!==null)d.return=c,D=d;else for(;D!==null;){c=D;var f=c.sibling,h=c.return;if(_m(c),c===u){D=null;break}if(f!==null){f.return=h,D=f;break}D=h}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}D=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,D=s;else e:for(;D!==null;){if(o=D,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ei(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,D=m;break e}D=o.return}}var y=t.current;for(D=y;D!==null;){s=D;var k=s.child;if(s.subtreeFlags&2064&&k!==null)k.return=s,D=k;else e:for(s=y;D!==null;){if(l=D,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){X(l,l.return,w)}if(l===s){D=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,D=x;break e}D=l.return}}if(V=i,Mn(),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(Qs,t)}catch{}r=!0}return r}finally{H=n,lt.transition=e}}return!1}function gf(t,e,n){e=Vr(n,e),e=Om(t,e,1),t=fn(t,e,1),e=Ie(),t!==null&&(ao(t,1,e),Ue(t,e))}function X(t,e,n){if(t.tag===3)gf(t,t,n);else for(;e!==null;){if(e.tag===3){gf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hn===null||!hn.has(r))){t=Vr(n,t),t=bm(e,t,1),e=fn(e,t,1),t=Ie(),e!==null&&(ao(e,1,t),Ue(e,t));break}}e=e.return}}function xv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ie(),t.pingedLanes|=t.suspendedLanes&n,de===t&&(ke&n)===n&&(se===4||se===3&&(ke&130023424)===ke&&500>te()-Tc?Vn(t,0):Nc|=n),Ue(t,e)}function Qm(t,e){e===0&&(t.mode&1?(e=Co,Co<<=1,!(Co&130023424)&&(Co=4194304)):e=1);var n=Ie();t=Vt(t,e),t!==null&&(ao(t,e,n),Ue(t,n))}function Sv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Qm(t,n)}function wv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(N(314))}r!==null&&r.delete(e),Qm(t,n)}var Gm;Gm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ve.current)$e=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $e=!1,uv(t,e,n);$e=!!(t.flags&131072)}else $e=!1,q&&e.flags&1048576&&em(e,Ss,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yo(t,e),t=e.pendingProps;var i=Fr(e,be.current);Pr(e,n),i=xc(null,e,r,t,i,n);var o=Sc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,He(r)?(o=!0,ks(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mc(e),i.updater=nl,e.stateNode=i,i._reactInternals=e,ru(e,r,t,n),e=su(null,e,r,!0,o,n)):(e.tag=0,q&&o&&ac(e),Ae(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yo(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Ev(r),t=ht(r,t),i){case 0:e=ou(null,e,r,t,n);break e;case 1:e=sf(null,e,r,t,n);break e;case 11:e=rf(null,e,r,t,n);break e;case 14:e=of(null,e,r,ht(r.type,t),n);break e}throw Error(N(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ht(r,i),ou(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ht(r,i),sf(t,e,r,i,n);case 3:e:{if(Im(e),t===null)throw Error(N(387));r=e.pendingProps,o=e.memoizedState,i=o.element,sm(t,e),Es(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Vr(Error(N(423)),e),e=lf(t,e,r,n,i);break e}else if(r!==i){i=Vr(Error(N(424)),e),e=lf(t,e,r,n,i);break e}else for(Ge=dn(e.stateNode.containerInfo.firstChild),Ye=e,q=!0,mt=null,n=im(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_r(),r===i){e=Ht(t,e,n);break e}Ae(t,e,r,n)}e=e.child}return e;case 5:return lm(e),t===null&&eu(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Qa(r,i)?s=null:o!==null&&Qa(r,o)&&(e.flags|=32),Am(t,e),Ae(t,e,s,n),e.child;case 6:return t===null&&eu(e),null;case 13:return Rm(t,e,n);case 4:return gc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=jr(e,null,r,n):Ae(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ht(r,i),rf(t,e,r,i,n);case 7:return Ae(t,e,e.pendingProps,n),e.child;case 8:return Ae(t,e,e.pendingProps.children,n),e.child;case 12:return Ae(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,W(ws,r._currentValue),r._currentValue=s,o!==null)if(kt(o.value,s)){if(o.children===i.children&&!Ve.current){e=Ht(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Ft(-1,n&-n),a.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tu(o.return,n,e),l.lanes|=n;break}a=a.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(N(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),tu(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ae(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Pr(e,n),i=ct(i),r=r(i),e.flags|=1,Ae(t,e,r,n),e.child;case 14:return r=e.type,i=ht(r,e.pendingProps),i=ht(r.type,i),of(t,e,r,i,n);case 15:return Dm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ht(r,i),Yo(t,e),e.tag=1,He(r)?(t=!0,ks(e)):t=!1,Pr(e,n),Tm(e,r,i),ru(e,r,i,n),su(null,e,r,!0,t,n);case 19:return zm(t,e,n);case 22:return Pm(t,e,n)}throw Error(N(156,e.tag))};function Ym(t,e){return Ep(t,e)}function Cv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ot(t,e,n,r){return new Cv(t,e,n,r)}function Pc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ev(t){if(typeof t=="function")return Pc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gu)return 11;if(t===Yu)return 14}return 2}function mn(t,e){var n=t.alternate;return n===null?(n=ot(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function es(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Pc(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case pr:return Hn(n.children,i,o,e);case Qu:s=8,i|=8;break;case Ta:return t=ot(12,n,e,i|2),t.elementType=Ta,t.lanes=o,t;case Oa:return t=ot(13,n,e,i),t.elementType=Oa,t.lanes=o,t;case ba:return t=ot(19,n,e,i),t.elementType=ba,t.lanes=o,t;case lp:return ol(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case op:s=10;break e;case sp:s=9;break e;case Gu:s=11;break e;case Yu:s=14;break e;case qt:s=16,r=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return e=ot(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Hn(t,e,n,r){return t=ot(7,t,r,e),t.lanes=n,t}function ol(t,e,n,r){return t=ot(22,t,r,e),t.elementType=lp,t.lanes=n,t.stateNode={isHidden:!1},t}function Zl(t,e,n){return t=ot(6,t,null,e),t.lanes=n,t}function ea(t,e,n){return e=ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Mv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rl(0),this.expirationTimes=Rl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ac(t,e,n,r,i,o,s,l,a){return t=new Mv(t,e,n,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ot(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mc(o),t}function Nv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Xm(t){if(!t)return Sn;t=t._reactInternals;e:{if(or(t)!==t||t.tag!==1)throw Error(N(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(He(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(t.tag===1){var n=t.type;if(He(n))return Xp(t,n,e)}return e}function Zm(t,e,n,r,i,o,s,l,a){return t=Ac(n,r,!0,t,i,o,s,l,a),t.context=Xm(null),n=t.current,r=Ie(),i=pn(n),o=Ft(r,i),o.callback=e??null,fn(n,o,i),t.current.lanes=i,ao(t,i,r),Ue(t,r),t}function sl(t,e,n,r){var i=e.current,o=Ie(),s=pn(i);return n=Xm(n),e.context===null?e.context=n:e.pendingContext=n,e=Ft(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fn(i,e,s),t!==null&&(vt(t,i,s,o),qo(t,i,s)),s}function As(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ic(t,e){yf(t,e),(t=t.alternate)&&yf(t,e)}function Tv(){return null}var eg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rc(t){this._internalRoot=t}ll.prototype.render=Rc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(N(409));sl(t,e,null,null)};ll.prototype.unmount=Rc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;er(function(){sl(null,t,null,null)}),e[$t]=null}};function ll(t){this._internalRoot=t}ll.prototype.unstable_scheduleHydration=function(t){if(t){var e=Pp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xt.length&&e!==0&&e<Xt[n].priority;n++);Xt.splice(n,0,t),n===0&&Ip(t)}};function zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function al(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vf(){}function Ov(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=As(s);o.call(u)}}var s=Zm(e,r,t,0,null,!1,!1,"",vf);return t._reactRootContainer=s,t[$t]=s.current,$i(t.nodeType===8?t.parentNode:t),er(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=As(a);l.call(u)}}var a=Ac(t,0,!1,null,null,!1,!1,"",vf);return t._reactRootContainer=a,t[$t]=a.current,$i(t.nodeType===8?t.parentNode:t),er(function(){sl(e,a,n,r)}),a}function ul(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=As(s);l.call(a)}}sl(e,s,t,i)}else s=Ov(n,e,t,i,r);return As(s)}bp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hi(e.pendingLanes);n!==0&&(ec(e,n|1),Ue(e,te()),!(V&6)&&(Hr=te()+500,Mn()))}break;case 13:er(function(){var r=Vt(t,1);if(r!==null){var i=Ie();vt(r,t,1,i)}}),Ic(t,1)}};tc=function(t){if(t.tag===13){var e=Vt(t,134217728);if(e!==null){var n=Ie();vt(e,t,134217728,n)}Ic(t,134217728)}};Dp=function(t){if(t.tag===13){var e=pn(t),n=Vt(t,e);if(n!==null){var r=Ie();vt(n,t,e,r)}Ic(t,e)}};Pp=function(){return H};Ap=function(t,e){var n=H;try{return H=t,e()}finally{H=n}};_a=function(t,e,n){switch(e){case"input":if(Aa(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Zs(r);if(!i)throw Error(N(90));up(r),Aa(r,i)}}}break;case"textarea":dp(t,n);break;case"select":e=n.value,e!=null&&Tr(t,!!n.multiple,e,!1)}};vp=Oc;kp=er;var bv={usingClientEntryPoint:!1,Events:[co,vr,Zs,gp,yp,Oc]},ui={findFiberByHostInstance:Ln,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dv={bundleType:ui.bundleType,version:ui.version,rendererPackageName:ui.rendererPackageName,rendererConfig:ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wp(t),t===null?null:t.stateNode},findFiberByHostInstance:ui.findFiberByHostInstance||Tv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ro=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ro.isDisabled&&Ro.supportsFiber)try{Qs=Ro.inject(Dv),Nt=Ro}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bv;Ze.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zc(e))throw Error(N(200));return Nv(t,e,null,n)};Ze.createRoot=function(t,e){if(!zc(t))throw Error(N(299));var n=!1,r="",i=eg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ac(t,1,!1,null,null,n,!1,r,i),t[$t]=e.current,$i(t.nodeType===8?t.parentNode:t),new Rc(e)};Ze.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=wp(e),t=t===null?null:t.stateNode,t};Ze.flushSync=function(t){return er(t)};Ze.hydrate=function(t,e,n){if(!al(e))throw Error(N(200));return ul(null,t,e,!0,n)};Ze.hydrateRoot=function(t,e,n){if(!zc(t))throw Error(N(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=eg;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Zm(e,null,t,1,n??null,i,!1,o,s),t[$t]=e.current,$i(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ll(e)};Ze.render=function(t,e,n){if(!al(e))throw Error(N(200));return ul(null,t,e,!1,n)};Ze.unmountComponentAtNode=function(t){if(!al(t))throw Error(N(40));return t._reactRootContainer?(er(function(){ul(null,null,t,!1,function(){t._reactRootContainer=null,t[$t]=null})}),!0):!1};Ze.unstable_batchedUpdates=Oc;Ze.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!al(n))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return ul(t,e,n,!1,r)};Ze.version="18.3.1-next-f1338f8080-20240426";function tg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tg)}catch(t){console.error(t)}}tg(),tp.exports=Ze;var ng=tp.exports;const Pv=Hh(ng);var rg,kf=ng;rg=kf.createRoot,kf.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gi(){return Gi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gi.apply(this,arguments)}var rn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(rn||(rn={}));const xf="popstate";function Av(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:l}=r.location;return vu("",{pathname:o,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:og(i)}return Rv(e,n,null,t)}function le(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ig(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Iv(){return Math.random().toString(36).substr(2,8)}function Sf(t,e){return{usr:t.state,key:t.key,idx:e}}function vu(t,e,n,r){return n===void 0&&(n=null),Gi({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zr(e):e,{state:n,key:e&&e.key||r||Iv()})}function og(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Rv(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l=rn.Pop,a=null,u=c();u==null&&(u=0,s.replaceState(Gi({},s.state,{idx:u}),""));function c(){return(s.state||{idx:null}).idx}function d(){l=rn.Pop;let v=c(),m=v==null?null:v-u;u=v,a&&a({action:l,location:g.location,delta:m})}function f(v,m){l=rn.Push;let y=vu(g.location,v,m);u=c()+1;let k=Sf(y,u),x=g.createHref(y);try{s.pushState(k,"",x)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(x)}o&&a&&a({action:l,location:g.location,delta:1})}function h(v,m){l=rn.Replace;let y=vu(g.location,v,m);u=c();let k=Sf(y,u),x=g.createHref(y);s.replaceState(k,"",x),o&&a&&a({action:l,location:g.location,delta:0})}function p(v){let m=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof v=="string"?v:og(v);return y=y.replace(/ $/,"%20"),le(m,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,m)}let g={get action(){return l},get location(){return t(i,s)},listen(v){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(xf,d),a=v,()=>{i.removeEventListener(xf,d),a=null}},createHref(v){return e(i,v)},createURL:p,encodeLocation(v){let m=p(v);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:h,go(v){return s.go(v)}};return g}var wf;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(wf||(wf={}));function zv(t,e,n){return n===void 0&&(n="/"),Lv(t,e,n,!1)}function Lv(t,e,n,r){let i=typeof e=="string"?Zr(e):e,o=ag(i.pathname||"/",n);if(o==null)return null;let s=sg(t);Bv(s);let l=null;for(let a=0;l==null&&a<s.length;++a){let u=qv(o);l=Kv(s[a],u,r)}return l}function sg(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,l)=>{let a={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};a.relativePath.startsWith("/")&&(le(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=Un([r,a.relativePath]),c=n.concat(a);o.children&&o.children.length>0&&(le(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),sg(o.children,e,c,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:Uv(u,o.index),routesMeta:c})};return t.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,s);else for(let a of lg(o.path))i(o,s,a)}),e}function lg(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=lg(r.join("/")),l=[];return l.push(...s.map(a=>a===""?o:[o,a].join("/"))),i&&l.push(...s),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function Bv(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Wv(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Fv=/^:[\w-]+$/,_v=3,jv=2,$v=1,Vv=10,Hv=-2,Cf=t=>t==="*";function Uv(t,e){let n=t.split("/"),r=n.length;return n.some(Cf)&&(r+=Hv),e&&(r+=jv),n.filter(i=>!Cf(i)).reduce((i,o)=>i+(Fv.test(o)?_v:o===""?$v:Vv),r)}function Wv(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Kv(t,e,n){let{routesMeta:r}=t,i={},o="/",s=[];for(let l=0;l<r.length;++l){let a=r[l],u=l===r.length-1,c=o==="/"?e:e.slice(o.length)||"/",d=Ef({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},c),f=a.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Ef({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:Un([o,d.pathname]),pathnameBase:ek(Un([o,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(o=Un([o,d.pathnameBase]))}return s}function Ef(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Jv(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let g=l[d]||"";s=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const p=l[d];return h&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:t}}function Jv(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ig(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function qv(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ig(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ag(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Qv(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Zr(t):t;return{pathname:n?n.startsWith("/")?n:Gv(n,e):e,search:tk(r),hash:nk(i)}}function Gv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ta(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Yv(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xv(t,e){let n=Yv(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Zv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Zr(t):(i=Gi({},t),le(!i.pathname||!i.pathname.includes("?"),ta("?","pathname","search",i)),le(!i.pathname||!i.pathname.includes("#"),ta("#","pathname","hash",i)),le(!i.search||!i.search.includes("#"),ta("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,l;if(s==null)l=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}l=d>=0?e[d]:"/"}let a=Qv(i,l),u=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||c)&&(a.pathname+="/"),a}const Un=t=>t.join("/").replace(/\/\/+/g,"/"),ek=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),tk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function rk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ug=["post","put","patch","delete"];new Set(ug);const ik=["get",...ug];new Set(ik);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yi(){return Yi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yi.apply(this,arguments)}const Lc=M.createContext(null),ok=M.createContext(null),cl=M.createContext(null),dl=M.createContext(null),sr=M.createContext({outlet:null,matches:[],isDataRoute:!1}),cg=M.createContext(null);function fl(){return M.useContext(dl)!=null}function Bc(){return fl()||le(!1),M.useContext(dl).location}function dg(t){M.useContext(cl).static||M.useLayoutEffect(t)}function fg(){let{isDataRoute:t}=M.useContext(sr);return t?kk():sk()}function sk(){fl()||le(!1);let t=M.useContext(Lc),{basename:e,future:n,navigator:r}=M.useContext(cl),{matches:i}=M.useContext(sr),{pathname:o}=Bc(),s=JSON.stringify(Xv(i,n.v7_relativeSplatPath)),l=M.useRef(!1);return dg(()=>{l.current=!0}),M.useCallback(function(u,c){if(c===void 0&&(c={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let d=Zv(u,JSON.parse(s),o,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Un([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,s,o,t])}function lk(){let{matches:t}=M.useContext(sr),e=t[t.length-1];return e?e.params:{}}function ak(t,e){return uk(t,e)}function uk(t,e,n,r){fl()||le(!1);let{navigator:i}=M.useContext(cl),{matches:o}=M.useContext(sr),s=o[o.length-1],l=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let u=Bc(),c;if(e){var d;let v=typeof e=="string"?Zr(e):e;a==="/"||(d=v.pathname)!=null&&d.startsWith(a)||le(!1),c=v}else c=u;let f=c.pathname||"/",h=f;if(a!=="/"){let v=a.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=zv(t,{pathname:h}),g=pk(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Un([a,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:Un([a,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return e&&g?M.createElement(dl.Provider,{value:{location:Yi({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:rn.Pop}},g):g}function ck(){let t=vk(),e=rk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,null)}const dk=M.createElement(ck,null);class fk extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(sr.Provider,{value:this.props.routeContext},M.createElement(cg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hk(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(Lc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(sr.Provider,{value:e},r)}function pk(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let c=s.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);c>=0||le(!1),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){a=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,d,f)=>{let h,p=!1,g=null,v=null;n&&(h=l&&d.route.id?l[d.route.id]:void 0,g=d.route.errorElement||dk,a&&(u<0&&f===0?(p=!0,v=null):u===f&&(p=!0,v=d.route.hydrateFallbackElement||null)));let m=e.concat(s.slice(0,f+1)),y=()=>{let k;return h?k=g:p?k=v:d.route.Component?k=M.createElement(d.route.Component,null):d.route.element?k=d.route.element:k=c,M.createElement(hk,{match:d,routeContext:{outlet:c,matches:m,isDataRoute:n!=null},children:k})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?M.createElement(fk,{location:n.location,revalidation:n.revalidation,component:g,error:h,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):y()},null)}var hg=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(hg||{}),Is=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Is||{});function mk(t){let e=M.useContext(Lc);return e||le(!1),e}function gk(t){let e=M.useContext(ok);return e||le(!1),e}function yk(t){let e=M.useContext(sr);return e||le(!1),e}function pg(t){let e=yk(),n=e.matches[e.matches.length-1];return n.route.id||le(!1),n.route.id}function vk(){var t;let e=M.useContext(cg),n=gk(Is.UseRouteError),r=pg(Is.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function kk(){let{router:t}=mk(hg.UseNavigateStable),e=pg(Is.UseNavigateStable),n=M.useRef(!1);return dg(()=>{n.current=!0}),M.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Yi({fromRouteId:e},o)))},[t,e])}function ts(t){le(!1)}function xk(t){let{basename:e="/",children:n=null,location:r,navigationType:i=rn.Pop,navigator:o,static:s=!1,future:l}=t;fl()&&le(!1);let a=e.replace(/^\/*/,"/"),u=M.useMemo(()=>({basename:a,navigator:o,static:s,future:Yi({v7_relativeSplatPath:!1},l)}),[a,l,o,s]);typeof r=="string"&&(r=Zr(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,g=M.useMemo(()=>{let v=ag(c,a);return v==null?null:{location:{pathname:v,search:d,hash:f,state:h,key:p},navigationType:i}},[a,c,d,f,h,p,i]);return g==null?null:M.createElement(cl.Provider,{value:u},M.createElement(dl.Provider,{children:n,value:g}))}function Sk(t){let{children:e,location:n}=t;return ak(ku(e),n)}new Promise(()=>{});function ku(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let o=[...e,i];if(r.type===M.Fragment){n.push.apply(n,ku(r.props.children,o));return}r.type!==ts&&le(!1),!r.props.index||!r.props.children||le(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=ku(r.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const wk="6";try{window.__reactRouterVersion=wk}catch{}const Ck="startTransition",Mf=x0[Ck];function Ek(t){let{basename:e,children:n,future:r,window:i}=t,o=M.useRef();o.current==null&&(o.current=Av({window:i,v5Compat:!0}));let s=o.current,[l,a]=M.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},c=M.useCallback(d=>{u&&Mf?Mf(()=>a(d)):a(d)},[a,u]);return M.useLayoutEffect(()=>s.listen(c),[s,c]),M.createElement(xk,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:s,future:r})}var Nf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Nf||(Nf={}));var Tf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Tf||(Tf={}));const mg=M.createContext(void 0),Mk=({children:t})=>{const[e,n]=M.useState(()=>{try{const l=localStorage.getItem("notes");return l?JSON.parse(l):[]}catch(l){return console.error("Failed to parse notes from localStorage:",l),[]}});M.useEffect(()=>{try{localStorage.setItem("notes",JSON.stringify(e))}catch(l){console.error("Failed to save notes to localStorage:",l)}},[e]);const r=l=>{var u,c;const a={...l,id:crypto.randomUUID(),createdAt:Date.now(),updatedAt:Date.now(),isFavorite:l.isFavorite||!1,category:((u=l.category)==null?void 0:u.trim())||"",title:((c=l.title)==null?void 0:c.trim())||"",content:l.content||""};n(d=>[a,...d])},i=(l,a)=>{n(u=>u.map(c=>{var d,f;return c.id===l?{...c,...a,updatedAt:Date.now(),title:((d=a.title)==null?void 0:d.trim())||c.title,category:((f=a.category)==null?void 0:f.trim())||c.category}:c}))},o=l=>{l&&n(a=>a.filter(u=>u.id!==l))},s=l=>{if(l)return e.find(a=>a.id===l)};return S.jsx(mg.Provider,{value:{notes:e,addNote:r,updateNote:i,deleteNote:o,getCurrentNote:s},children:t})},Fc=()=>{const t=M.useContext(mg);if(!t)throw new Error("useNotes must be used within NotesProvider");return t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gg=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...l},a)=>M.createElement("svg",{ref:a,...Tk,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:gg("lucide",i),...l},[...s.map(([u,c])=>M.createElement(u,c)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(t,e)=>{const n=M.forwardRef(({className:r,...i},o)=>M.createElement(Ok,{ref:o,iconNode:e,className:gg(`lucide-${Nk(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=Se("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=Se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=Se("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=Se("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=Se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=Se("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=Se("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=Se("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=Se("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=Se("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=Se("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=Se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=Se("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=Se("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=Se("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=Se("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),Wk=({onCreateNote:t})=>S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 animate-slide-up space-y-4 sm:space-y-0",children:[S.jsx("div",{className:"flex items-center space-x-4 w-full sm:w-auto justify-center sm:justify-start",children:S.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-center sm:text-left",children:"8313"})}),S.jsxs("button",{onClick:t,className:"button flex items-center space-x-2 animate-float w-full sm:w-auto justify-center",children:[S.jsx(jk,{className:"w-4 h-4"}),S.jsx("span",{children:""})]})]}),Kk=({searchQuery:t,onSearch:e})=>S.jsxs("div",{className:"glass p-2 flex items-center space-x-2",children:[S.jsx($k,{className:"w-4 h-4 text-gray-400"}),S.jsx("input",{type:"text",value:t,onChange:n=>e(n.target.value),placeholder:"...",className:"bg-transparent border-none outline-none w-full text-white placeholder-gray-400"})]}),Jk=["","","","",""],vg=({category:t,onChange:e})=>S.jsxs("div",{className:"glass p-2 flex items-center space-x-2",children:[S.jsx(Rk,{className:"w-4 h-4 text-gray-400"}),S.jsx("select",{value:t,onChange:n=>e(n.target.value),className:"bg-transparent border-none outline-none w-full text-white",children:Jk.map(n=>S.jsx("option",{value:n,className:"bg-midnight",children:n},n))})]}),qk=({sortBy:t,onSortChange:e,direction:n,onDirectionChange:r,favoriteFirst:i,onFavoriteFirstChange:o})=>S.jsxs("div",{className:"glass p-2 flex items-center space-x-2",children:[S.jsxs("select",{value:t,onChange:s=>e(s.target.value),className:"bg-transparent border-none outline-none flex-1 text-white text-sm",children:[S.jsx("option",{value:"date",className:"bg-midnight",children:""}),S.jsx("option",{value:"title",className:"bg-midnight",children:""}),S.jsx("option",{value:"category",className:"bg-midnight",children:""})]}),S.jsx("button",{onClick:()=>r(n==="asc"?"desc":"asc"),className:"p-1 hover:text-gold transition-colors",title:n==="asc"?"":"",children:n==="asc"?S.jsx(Pk,{className:"w-4 h-4 text-gray-400"}):S.jsx(bk,{className:"w-4 h-4 text-gray-400"})}),S.jsx("button",{onClick:()=>o(!i),className:`p-1 transition-colors ${i?"text-gold":"text-gray-400 hover:text-gold"}`,title:"",children:S.jsx(yg,{className:"w-4 h-4",fill:i?"currentColor":"none"})})]}),Qk=({searchQuery:t,onSearch:e,selectedCategory:n,onCategoryChange:r,sortBy:i,onSortChange:o,sortDirection:s,onSortDirectionChange:l,favoriteFirst:a,onFavoriteFirstChange:u})=>S.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6 px-2 sm:px-0",children:[S.jsx("div",{className:"flex-1",children:S.jsx(Kk,{searchQuery:t,onSearch:e})}),S.jsxs("div",{className:"flex gap-2 sm:w-96",children:[S.jsx("div",{className:"flex-1 sm:w-48",children:S.jsx(vg,{category:n,onChange:r})}),S.jsx("div",{className:"flex-1 sm:w-48",children:S.jsx(qk,{sortBy:i,onSortChange:o,direction:s,onDirectionChange:l,favoriteFirst:a,onFavoriteFirstChange:u})})]})]}),kg=({isFavorite:t,onClick:e,className:n=""})=>S.jsx("button",{onClick:e,className:`p-1 transition-colors ${t?"text-gold":"text-gray-400 hover:text-gold"} ${n}`,children:S.jsx(yg,{className:"w-4 h-4",fill:t?"currentColor":"none"})}),Gk=({note:t})=>{const e=fg(),{deleteNote:n,updateNote:r}=Fc(),i=()=>{r(t.id,{isFavorite:!t.isFavorite})},s=(l=>l.replace(/<[^>]*>/g,""))(t.content);return S.jsxs("div",{className:"glass p-4 sm:p-6 rounded-xl space-y-2 sm:space-y-3 hover:bg-glass/20 transition-all cursor-pointer animate-fade-in border border-white/5 hover:border-gold/20 hover-glow",children:[S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[S.jsx("h3",{className:"text-lg sm:text-xl font-medium truncate pr-4",title:t.title,children:t.title}),S.jsx("p",{className:"text-xs sm:text-sm text-gray-400 line-clamp-2",title:s,children:s||""})]}),S.jsxs("div",{className:"flex space-x-1 sm:space-x-2 items-start ml-2",children:[S.jsx(kg,{isFavorite:t.isFavorite,onClick:i,className:"hover-scale"}),S.jsx("button",{onClick:()=>e(`/note/${t.id}`),className:"p-1 sm:p-1.5 hover:text-gold transition-colors hover-scale",children:S.jsx(_k,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),S.jsx("button",{onClick:()=>n(t.id),className:"p-1 sm:p-1.5 hover:text-red-500 transition-colors hover-scale",children:S.jsx(Hk,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center text-xs sm:text-sm space-y-2 sm:space-y-0",children:[S.jsx("span",{className:"text-gray-400 text-xs",children:new Date(t.updatedAt).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),S.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-gold/10 text-gold pulse-subtle",children:t.category})]})]})},Yk=({notes:t})=>t.length===0?S.jsxs("div",{className:"text-center py-12 sm:py-20 animate-fade-in px-4",children:[S.jsx("div",{className:"inline-block animate-float mb-4",children:S.jsxs("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-400 mx-auto",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",children:[S.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),S.jsx("path",{d:"M14 2v6h6"}),S.jsx("path",{d:"M12 18v-6"}),S.jsx("path",{d:"M8 15h8"})]})}),S.jsx("p",{className:"text-gray-400 text-base sm:text-lg animate-pulse-glow",children:""}),S.jsx("p",{className:"text-gray-500 text-xs sm:text-sm mt-2",children:""})]}):S.jsx("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 animate-fade-in px-2 sm:px-0",children:t.map((e,n)=>S.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${n*.1}s`},children:S.jsx(Gk,{note:e})},e.id))}),Xk=()=>{const{notes:t,addNote:e}=Fc(),[n,r]=M.useState(""),[i,o]=M.useState(""),[s,l]=M.useState("date"),[a,u]=M.useState("desc"),[c,d]=M.useState(!0),f=()=>{e({title:"",content:"",isFavorite:!1,category:i})},h=(g,v)=>{if(c&&g.isFavorite!==v.isFavorite)return v.isFavorite?1:-1;let m=0;switch(s){case"date":m=v.updatedAt-g.updatedAt;break;case"title":m=g.title.localeCompare(v.title,"ja");break;case"category":m=g.category.localeCompare(v.category,"ja");break}return a==="asc"?-m:m},p=t.filter(g=>g.title.toLowerCase().includes(n.toLowerCase())&&(i===""||g.category===i)).sort(h);return S.jsxs("div",{className:"container mx-auto px-4 py-8",children:[S.jsx(Wk,{onCreateNote:f}),S.jsx(Qk,{searchQuery:n,onSearch:r,selectedCategory:i,onCategoryChange:o,sortBy:s,onSortChange:l,sortDirection:a,onSortDirectionChange:u,favoriteFirst:c,onFavoriteFirstChange:d}),S.jsx(Yk,{notes:p})]})};function ge(t){this.content=t}ge.prototype={constructor:ge,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new ge(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new ge(n)},addToStart:function(t,e){return new ge([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ge(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new ge(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ge.from(t),t.size?new ge(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ge.from(t),t.size?new ge(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ge.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};ge.from=function(t){if(t instanceof ge)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ge(e)};function xg(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=xg(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function Sg(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){n-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let u=0,c=Math.min(s.text.length,l.text.length);for(;u<c&&s.text[s.text.length-u-1]==l.text[l.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let u=Sg(s.content,l.content,n-1,r-1);if(u)return u}n-=a,r-=a}}class C{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,l=0;l<n;s++){let a=this.content[s],u=l+a.nodeSize;if(u>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let c=l+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,n-c),r,i+c)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(l,a)=>{let u=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(s?s=!1:o+=r),o+=u},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new C(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),r.push(l),i+=l.nodeSize),s=a}return new C(r,i)}cutByIndex(e,n){return e==n?C.empty:e==0&&n==this.content.length?this:new C(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new C(i,o)}addToStart(e){return new C([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new C(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return xg(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Sg(this,e,n,r)}findIndex(e,n=-1){if(e==0)return zo(0,e);if(e==this.size)return zo(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?zo(r+1,s):zo(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return C.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new C(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return C.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new C(n||e,r)}static from(e){if(!e)return C.empty;if(e instanceof C)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new C([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}C.empty=new C([],0);const na={index:0,offset:0};function zo(t,e){return na.index=t,na.offset=e,na}function Rs(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Rs(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Rs(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let U=class xu{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Rs(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return xu.none;if(e instanceof xu)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};U.none=[];class zs extends Error{}class b{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Cg(this.content,e+this.openStart,n);return r&&new b(r,this.openStart,this.openEnd)}removeBetween(e,n){return new b(wg(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return b.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new b(C.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new b(e,r,i)}}b.empty=new b(C.empty,0,0);function wg(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:l}=t.findIndex(n);if(i==e||o.isText){if(l!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(wg(o.content,e-i-1,n-i-1)))}function Cg(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=Cg(s.content,e-o-1,n);return l&&t.replaceChild(i,s.copy(l))}function Zk(t,e,n){if(n.openStart>t.depth)throw new zs("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new zs("Inconsistent open depths");return Eg(t,e,n,0)}function Eg(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=Eg(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,l=s.content;return Kn(s,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=ex(n,t);return Kn(o,Ng(t,s,l,e,r))}else return Kn(o,Ls(t,e,r))}function Mg(t,e){if(!e.type.compatibleContent(t.type))throw new zs("Cannot join "+e.type.name+" onto "+t.type.name)}function Su(t,e,n){let r=t.node(n);return Mg(r,e.node(n)),r}function Wn(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ti(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Wn(t.nodeAfter,r),o++));for(let l=o;l<s;l++)Wn(i.child(l),r);e&&e.depth==n&&e.textOffset&&Wn(e.nodeBefore,r)}function Kn(t,e){return t.type.checkContent(e),t.copy(e)}function Ng(t,e,n,r,i){let o=t.depth>i&&Su(t,e,i+1),s=r.depth>i&&Su(n,r,i+1),l=[];return Ti(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(Mg(o,s),Wn(Kn(o,Ng(t,e,n,r,i+1)),l)):(o&&Wn(Kn(o,Ls(t,e,i+1)),l),Ti(e,n,i,l),s&&Wn(Kn(s,Ls(n,r,i+1)),l)),Ti(r,null,i,l),new C(l)}function Ls(t,e,n){let r=[];if(Ti(null,t,n,r),t.depth>n){let i=Su(t,e,n+1);Wn(Kn(i,Ls(t,e,n+1)),r)}return Ti(e,null,n,r),new C(r)}function ex(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(C.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Xi{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return U.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Bs(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),u=o-a;if(r.push(s,l,i+a),!u||(s=s.child(l),s.isText))break;o=u-1,i+=a+1}return new Xi(n,r,o)}static resolveCached(e,n){let r=Of.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else Of.set(e,r=new tx);let i=r.elts[r.i]=Xi.resolve(e,n);return r.i=(r.i+1)%nx,i}}class tx{constructor(){this.elts=[],this.i=0}}const nx=12,Of=new WeakMap;class Bs{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const rx=Object.create(null);let gn=class wu{constructor(e,n,r,i=U.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||C.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Rs(this.attrs,n||e.defaultAttrs||rx)&&U.sameSet(this.marks,r||U.none)}copy(e=null){return e==this.content?this:new wu(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new wu(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return b.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),l=i.start(s),u=i.node(s).content.cut(i.pos-l,o.pos-l);return new b(u,i.depth-s,o.depth-s)}replace(e,n,r){return Zk(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Xi.resolveCached(this,e)}resolveNoCache(e){return Xi.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Tg(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=C.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=U.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!U.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=C.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};gn.prototype.text=void 0;class Fs extends gn{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Tg(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Fs(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Fs(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Tg(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class tr{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new ix(e,n);if(r.next==null)return tr.empty;let i=Og(r);r.next&&r.err("Unexpected trailing text");let o=dx(cx(i));return fx(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!n||a.validEnd))return C.from(l.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:d}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=o(d,l.concat(c));if(f)return f}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}tr.empty=new tr(!0);class ix{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Og(t){let e=[];do e.push(ox(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function ox(t){let e=[];do e.push(sx(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function sx(t){let e=ux(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=lx(t,e);else break;return e}function bf(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function lx(t,e){let n=bf(t),r=n;return t.eat(",")&&(t.next!="}"?r=bf(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function ax(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function ux(t){if(t.eat("(")){let e=Og(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=ax(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function cx(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,l,a){let u={term:a,to:l};return e[s].push(u),u}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,u)=>a.concat(o(u,l)),[]);if(s.type=="seq")for(let a=0;;a++){let u=o(s.exprs[a],l);if(a==s.exprs.length-1)return u;i(u,l=n())}else if(s.type=="star"){let a=n();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=n();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let u=0;u<s.min;u++){let c=n();i(o(s.expr,a),c),a=c}if(s.max==-1)i(o(s.expr,a),a);else for(let u=s.min;u<s.max;u++){let c=n();r(a,c),i(o(s.expr,a),c),a=c}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function bg(t,e){return e-t}function Df(t,e){let n=[];return r(e),n.sort(bg);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&n.indexOf(a)==-1&&r(a)}}}function dx(t){let e=Object.create(null);return n(Df(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:l,to:a})=>{if(!l)return;let u;for(let c=0;c<i.length;c++)i[c][0]==l&&(u=i[c][1]);Df(t,a).forEach(c=>{u||i.push([l,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new tr(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort(bg);o.next.push({type:i[s][0],next:e[l.join(",")]||n(l)})}return o}}function fx(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:u}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Dg(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Pg(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Ag(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function Ig(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new px(t,r,e[r]);return n}let Pf=class Rg{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Ig(e,r.attrs),this.defaultAttrs=Dg(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==tr.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Pg(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new gn(this,this.computeAttrs(e),C.from(n),U.setFrom(r))}createChecked(e=null,n,r){return n=C.from(n),this.checkContent(n),new gn(this,this.computeAttrs(e),n,U.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=C.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(C.empty,!0);return o?new gn(this,e,n.append(o),U.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Ag(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:U.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new Rg(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function hx(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class px{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?hx(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class hl{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Ig(e,i.attrs),this.excluded=null;let o=Dg(this.attrs);this.instance=o?new U(this,o):null}create(e=null){return!e&&this.instance?this.instance:new U(this,Pg(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new hl(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Ag(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class zg{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=ge.from(e.nodes),n.marks=ge.from(e.marks||{}),this.nodes=Pf.compile(this.spec.nodes,this),this.marks=hl.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=tr.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?Af(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:Af(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Pf){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Fs(r,r.defaultAttrs,e,U.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return gn.fromJSON(this,e)}markFromJSON(e){return U.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Af(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function mx(t){return t.tag!=null}function gx(t){return t.style!=null}let Oi=class Cu{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(mx(i))this.tags.push(i);else if(gx(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new Rf(this,n,!1);return r.addAll(e,U.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Rf(this,n,!0);return r.addAll(e,U.none,n.from,n.to),b.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(kx(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){let a=s.getAttrs(n);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let l=n[s];if((l.priority==null?50:l.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=zf(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=zf(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Cu(e,Cu.schemaRules(e)))}};const Lg={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},yx={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Bg={ol:!0,ul:!0},Zi=1,Eu=2,bi=4;function If(t,e,n){return e!=null?(e?Zi:0)|(e==="full"?Eu:0):t&&t.whitespace=="pre"?Zi|Eu:n&~bi}class Lo{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=U.none,this.match=o||(s&bi?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(C.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Zi)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=C.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(C.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Lg.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Rf{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=If(null,n.preserveWhitespace,0)|(r?bi:0);i?o=new Lo(i.type,i.attrs,U.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Lo(null,null,U.none,!0,null,s):o=new Lo(e.schema.topNodeType,null,U.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Eu?"full":this.localPreserveWS||(i.options&Zi)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],l=e.previousSibling;(!s||l&&l.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),l;Bg.hasOwnProperty(s)&&this.parser.normalizeLists&&vx(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:yx.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let u,c=this.needsBlock;if(Lg.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),u=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=a&&a.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),u&&this.sync(o),this.needsBlock=c}else{let u=this.readStyles(e,n);u&&this.addElementByRule(e,a,u,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(o,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(u=>!a.clearMark(u)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(s,n.attrs||null,r,n.preserveWhitespace);a&&(o=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}o&&this.sync(l)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];s!=l;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n){let r,i;for(let o=this.open;o>=0;o--){let s=this.nodes[o],l=s.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,i=s,!l.length)||s.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)n=this.enterInner(r[o],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=U.none;for(let s of r.concat(e.marks))(i.type?i.type.allowsMarkType(s.type):Lf(s.type,e.type))&&(o=s.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=If(e,o,s.options);s.options&bi&&s.content.length==0&&(l|=bi);let a=U.none;return r=r.filter(u=>(s.type?s.type.allowsMarkType(u.type):Lf(u.type,e))?(a=u.addToSet(a),!1):!0),this.nodes.push(new Lo(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Zi)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let u=n[l];if(u==""){if(l==n.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let c=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;a--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function vx(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Bg.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function kx(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function zf(t){let e={};for(let n in t)e[n]=t[n];return e}function Lf(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:u,next:c}=l.edge(a);if(u==e||o.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}class lr{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=ra(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let u=s.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(o[l][0])||u.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let u=s.marks[a++],c=this.serializeMark(u,s.isInline,n);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=ns(ra(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&ns(ra(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return ns(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new lr(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Bf(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Bf(e.marks)}}function Bf(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function ra(t){return t.document||window.document}const Ff=new WeakMap;function xx(t){let e=Ff.get(t);return e===void 0&&Ff.set(t,e=Sx(t)),e}function Sx(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function ns(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=xx(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let d in u)if(u[d]!=null){let f=d.indexOf(" ");f>0?a.setAttributeNS(d.slice(0,f),d.slice(f+1),u[d]):a.setAttribute(d,u[d])}}for(let d=c;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:h,contentDOM:p}=ns(t,f,n,r);if(a.appendChild(h),p){if(l)throw new RangeError("Multiple content holes");l=p}}}return{dom:a,contentDOM:l}}const Fg=65535,_g=Math.pow(2,16);function wx(t,e){return t+e*_g}function _f(t){return t&Fg}function Cx(t){return(t-(t&Fg))/_g}const jg=1,$g=2,rs=4,Vg=8;class Mu{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Vg)>0}get deletedBefore(){return(this.delInfo&(jg|rs))>0}get deletedAfter(){return(this.delInfo&($g|rs))>0}get deletedAcross(){return(this.delInfo&rs)>0}}class Qe{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Qe.empty)return Qe.empty}recover(e){let n=0,r=_f(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Cx(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],d=a+u;if(e<=d){let f=u?e==a?-1:e==d?1:n:n,h=a+i+(f<0?0:c);if(r)return h;let p=e==(n<0?a:d)?null:wx(l/3,e-a),g=e==a?$g:e==d?jg:rs;return(n<0?e!=a:e!=d)&&(g|=Vg),new Mu(h,g,p)}i+=c-u}return r?e+i:new Mu(e+i,0,null)}touches(e,n){let r=0,i=_f(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+n],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new Qe(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Qe.empty:new Qe(e<0?[0,-e,0]:[0,0,e])}}Qe.empty=new Qe([]);class Ir{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new Ir(this.maps,this.mirror,e,n)}copy(){return new Ir(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Ir;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],l=s.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new Mu(e,i,null)}}const ia=Object.create(null);class Pe{getMap(){return Qe.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ia[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in ia)throw new RangeError("Duplicate use of step JSON ID "+e);return ia[e]=n,n.prototype.jsonID=e,n}}class re{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new re(e,null)}static fail(e){return new re(null,e)}static fromReplace(e,n,r,i){try{return re.ok(e.replace(n,r,i))}catch(o){if(o instanceof zs)return re.fail(o.message);throw o}}}function _c(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(_c(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return C.fromArray(r)}class on extends Pe{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new b(_c(n.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return re.fromReplace(e,this.from,this.to,o)}invert(){return new Mt(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new on(n.pos,r.pos,this.mark)}merge(e){return e instanceof on&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new on(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new on(n.from,n.to,e.markFromJSON(n.mark))}}Pe.jsonID("addMark",on);class Mt extends Pe{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new b(_c(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return re.fromReplace(e,this.from,this.to,r)}invert(){return new on(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Mt(n.pos,r.pos,this.mark)}merge(e){return e instanceof Mt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Mt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Mt(n.from,n.to,e.markFromJSON(n.mark))}}Pe.jsonID("removeMark",Mt);class sn extends Pe{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return re.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return re.fromReplace(e,this.pos,this.pos+1,new b(C.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new sn(this.pos,n.marks[i]);return new sn(this.pos,this.mark)}}return new Ur(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new sn(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new sn(n.pos,e.markFromJSON(n.mark))}}Pe.jsonID("addNodeMark",sn);class Ur extends Pe{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return re.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return re.fromReplace(e,this.pos,this.pos+1,new b(C.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new sn(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ur(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ur(n.pos,e.markFromJSON(n.mark))}}Pe.jsonID("removeNodeMark",Ur);class ce extends Pe{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Nu(e,this.from,this.to)?re.fail("Structure replace would overwrite content"):re.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Qe([this.from,this.to-this.from,this.slice.size])}invert(e){return new ce(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ce(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof ce)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?b.empty:new b(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ce(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?b.empty:new b(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ce(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ce(n.from,n.to,b.fromJSON(e,n.slice),!!n.structure)}}Pe.jsonID("replace",ce);class fe extends Pe{constructor(e,n,r,i,o,s,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Nu(e,this.from,this.gapFrom)||Nu(e,this.gapTo,this.to)))return re.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return re.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?re.fromReplace(e,this.from,this.to,r):re.fail("Content does not fit in gap")}getMap(){return new Qe([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new fe(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new fe(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new fe(n.from,n.to,n.gapFrom,n.gapTo,b.fromJSON(e,n.slice),n.insert,!!n.structure)}}Pe.jsonID("replaceAround",fe);function Nu(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function Ex(t,e,n,r){let i=[],o=[],s,l;t.doc.nodesBetween(e,n,(a,u,c)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let f=Math.max(u,e),h=Math.min(u+a.nodeSize,n),p=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(p)||(s&&s.to==f&&s.mark.eq(d[g])?s.to=h:i.push(s=new Mt(f,h,d[g])));l&&l.to==f?l.to=h:o.push(l=new on(f,h,r))}}),i.forEach(a=>t.step(a)),o.forEach(a=>t.step(a))}function Mx(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof hl){let u=s.marks,c;for(;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let u=Math.min(l+s.nodeSize,n);for(let c=0;c<a.length;c++){let d=a[c],f;for(let h=0;h<i.length;h++){let p=i[h];p.step==o-1&&d.eq(i[h].style)&&(f=p)}f?(f.to=u,f.step=o):i.push({style:d,from:Math.max(l,e),to:u,step:o})}}}),i.forEach(s=>t.step(new Mt(s.from,s.to,s.style)))}function jc(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<o.childCount;a++){let u=o.child(a),c=l+u.nodeSize,d=r.matchType(u.type);if(!d)s.push(new ce(l,c,b.empty));else{r=d;for(let f=0;f<u.marks.length;f++)n.allowsMarkType(u.marks[f].type)||t.step(new Mt(l,c,u.marks[f]));if(i&&u.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,p;for(;f=h.exec(u.text);)p||(p=new b(C.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),s.push(new ce(l+f.index,l+f.index+f[0].length,p))}}l=c}if(!r.validEnd){let a=r.fillBefore(C.empty,!0);t.replace(l,l,new b(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function Nx(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ei(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!Nx(i,o,s))break}return null}function Tx(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,u=l,c=C.empty,d=0;for(let p=o,g=!1;p>n;p--)g||r.index(p)>0?(g=!0,c=C.from(r.node(p).copy(c)),d++):a--;let f=C.empty,h=0;for(let p=o,g=!1;p>n;p--)g||i.after(p+1)<i.end(p)?(g=!0,f=C.from(i.node(p).copy(f)),h++):u++;t.step(new fe(a,u,s,l,new b(c.append(f),d,h),c.size-d,!0))}function $c(t,e,n=null,r=t){let i=Ox(t,e),o=i&&bx(r,e);return o?i.map(jf).concat({type:e,attrs:n}).concat(o.map(jf)):null}function jf(t){return{type:t,attrs:null}}function Ox(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function bx(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;a&&u<i;u++)a=a.matchType(n.child(u).type);return!a||!a.validEnd?null:s}function Dx(t,e,n){let r=C.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let l=n[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=C.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new fe(i,o,i,o,new b(r,0,0),n.length,!0))}function Px(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,l)=>{let a=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,a)&&Ax(t.doc,t.mapping.slice(o).map(l),r)){let u=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?u=!1:!h&&p&&(u=!0)}u===!1&&Ug(t,s,l,o),jc(t,t.mapping.slice(o).map(l,1),r,void 0,u===null);let c=t.mapping.slice(o),d=c.map(l,1),f=c.map(l+s.nodeSize,1);return t.step(new fe(d,f,d+1,f-1,new b(C.from(r.create(a,null,s.marks)),0,0),1,!0)),u===!0&&Hg(t,s,l,o),!1}})}function Hg(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function Ug(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function Ax(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Ix(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new fe(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new b(C.from(s),0,0),1,!0))}function Rr(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>o;u--,c--){let d=i.node(u),f=i.index(u);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[c+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[c]||d;if(!d.canReplace(f+1,d.childCount)||!g.type.validContent(h))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function Rx(t,e,n=1,r){let i=t.doc.resolve(e),o=C.empty,s=C.empty;for(let l=i.depth,a=i.depth-n,u=n-1;l>a;l--,u--){o=C.from(i.node(l).copy(o));let c=r&&r[u];s=C.from(c?c.type.create(c.attrs,s):i.node(l).copy(s))}t.step(new ce(e,e,new b(o.append(s),n,n),!0))}function Nn(t,e){let n=t.resolve(e),r=n.index();return Wg(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function zx(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function Wg(t,e){return!!(t&&e&&!t.isLeaf&&zx(t,e))}function pl(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,l=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),l++,s=r.node(i).maybeChild(l)):(o=r.node(i).maybeChild(l-1),s=r.node(i+1)),o&&!o.isTextblock&&Wg(o,s)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Lx(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let c=s.whitespace=="pre",d=!!s.contentMatch.matchType(i);c&&!d?r=!1:!c&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let c=t.doc.resolve(e+n);Ug(t,c.node(),c.before(),l)}s.inlineContent&&jc(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let a=t.mapping.slice(l),u=a.map(e-n);if(t.step(new ce(u,a.map(e+n,-1),b.empty,!0)),r===!0){let c=t.doc.resolve(u);Hg(t,c.node(),c.before(),t.steps.length)}return t}function Bx(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function Kg(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),u=r.node(s),c=!1;if(o==1)c=u.canReplace(a,a,i);else{let d=u.contentMatchAt(a).findWrapping(i.firstChild.type);c=d&&u.canReplaceWith(a,a,d[0])}if(c)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function ml(t,e,n=e,r=b.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return Jg(i,o,r)?new ce(e,n,r):new Fx(i,o,r).fit()}function Jg(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Fx{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=C.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=C.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new b(o,s,l);return e>-1?new fe(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new ce(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=oa(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,d=null;if(n==1&&(s?u.matchType(s.type)||(d=u.fillBefore(C.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:d};if(n==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=oa(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new b(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=oa(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new b(mi(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new b(mi(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,u=0,c=[],{match:d,type:f}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)c.push(i.child(g));d=d.matchFragment(i)}let h=l.size+e-(s.content.size-s.openEnd);for(;u<l.childCount;){let g=l.child(u),v=d.matchType(g.type);if(!v)break;u++,(u>1||a==0||g.content.size)&&(d=v,c.push(qg(g.mark(f.allowedMarks(g.marks)),u==1?a:0,u==l.childCount?h:-1)))}let p=u==l.childCount;p||(h=-1),this.placed=gi(this.placed,n,C.from(c)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=l;g<h;g++){let m=v.lastChild;this.frontier.push({type:m.type,match:m.contentMatchAt(m.childCount)}),v=m.content}this.unplaced=p?e==0?b.empty:new b(mi(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new b(mi(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!sa(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=sa(e,n,i,r,o);if(s){for(let l=n-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=sa(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=gi(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=gi(this.placed,this.depth,C.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(C.empty,!0);n.childCount&&(this.placed=gi(this.placed,this.frontier.length,n))}}function mi(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(mi(t.firstChild.content,e-1,n)))}function gi(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(gi(t.lastChild.content,e-1,n)))}function oa(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function qg(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,qg(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(C.empty,!0)))),t.copy(r)}function sa(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!_x(n,o.content,s)?l:null}function _x(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function jx(t){return t.spec.defining||t.spec.definingForContent}function $x(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(Jg(i,o,r))return t.step(new ce(e,n,r));let s=Gg(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(f)>-1?l=f:i.before(f)==h&&s.splice(1,0,-f)}let a=s.indexOf(l),u=[],c=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(u.push(p),h==r.openStart)break;f=p.content}for(let f=c-1;f>=0;f--){let h=u[f],p=jx(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(l)-1)))c=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+c+1)%(r.openStart+1),p=u[h];if(p)for(let g=0;g<s.length;g++){let v=s[(g+a)%s.length],m=!0;v<0&&(m=!1,v=-v);let y=i.node(v-1),k=i.index(v-1);if(y.canReplaceWith(k,k,p.type,p.marks))return t.replace(i.before(v),m?o.after(v):n,new b(Qg(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=s.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=s[f];h<0||(e=i.before(h),n=o.after(h))}}function Qg(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(Qg(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(C.empty,!0))}return t}function Vx(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Bx(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new b(C.from(r),0,0))}function Hx(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=Gg(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function Gg(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class zr extends Pe{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return re.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return re.fromReplace(e,this.pos,this.pos+1,new b(C.from(i),0,n.isLeaf?0:1))}getMap(){return Qe.empty}invert(e){return new zr(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new zr(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new zr(n.pos,n.attr,n.value)}}Pe.jsonID("attr",zr);class eo extends Pe{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return re.ok(r)}getMap(){return Qe.empty}invert(e){return new eo(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new eo(n.attr,n.value)}}Pe.jsonID("docAttr",eo);let Wr=class extends Error{};Wr=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Wr.prototype=Object.create(Error.prototype);Wr.prototype.constructor=Wr;Wr.prototype.name="TransformError";class Ux{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ir}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Wr(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=b.empty){let i=ml(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new b(C.from(r),0,0))}delete(e,n){return this.replace(e,n,b.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return $x(this,e,n,r),this}replaceRangeWith(e,n,r){return Vx(this,e,n,r),this}deleteRange(e,n){return Hx(this,e,n),this}lift(e,n){return Tx(this,e,n),this}join(e,n=1){return Lx(this,e,n),this}wrap(e,n){return Dx(this,e,n),this}setBlockType(e,n=e,r,i=null){return Px(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Ix(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new zr(e,n,r)),this}setDocAttribute(e,n){return this.step(new eo(e,n)),this}addNodeMark(e,n){return this.step(new sn(e,n)),this}removeNodeMark(e,n){if(!(n instanceof U)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Ur(e,n)),this}split(e,n=1,r){return Rx(this,e,n,r),this}addMark(e,n,r){return Ex(this,e,n,r),this}removeMark(e,n,r){return Mx(this,e,n,r),this}clearIncompatible(e,n,r){return jc(this,e,n,r),this}}const la=Object.create(null);class F{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Wx(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=b.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:u}=s[l],c=e.mapping.slice(o);e.replaceRange(c.map(a.pos),c.map(u.pos),l?b.empty:n),l==0&&Hf(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),u=a.map(s.pos),c=a.map(l.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),Hf(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new L(e):dr(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?dr(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):dr(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new at(e.node(0))}static atStart(e){return dr(e,e,0,0,1)||new at(e)}static atEnd(e){return dr(e,e,e.content.size,e.childCount,-1)||new at(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=la[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in la)throw new RangeError("Duplicate use of selection JSON ID "+e);return la[e]=n,n.prototype.jsonID=e,n}getBookmark(){return L.between(this.$anchor,this.$head).getBookmark()}}F.prototype.visible=!0;class Wx{constructor(e,n){this.$from=e,this.$to=n}}let $f=!1;function Vf(t){!$f&&!t.parent.inlineContent&&($f=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class L extends F{constructor(e,n=e){Vf(e),Vf(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return F.near(r);let i=e.resolve(n.map(this.anchor));return new L(i.parent.inlineContent?i:r,r)}replace(e,n=b.empty){if(super.replace(e,n),n==b.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof L&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new gl(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new L(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=F.findFrom(n,r,!0)||F.findFrom(n,-r,!0);if(o)n=o.$head;else return F.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(F.findFrom(e,-r,!0)||F.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new L(e,n)}}F.jsonID("text",L);class gl{constructor(e,n){this.anchor=e,this.head=n}map(e){return new gl(e.map(this.anchor),e.map(this.head))}resolve(e){return L.between(e.resolve(this.anchor),e.resolve(this.head))}}class R extends F{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?F.near(o):new R(o)}content(){return new b(C.from(this.node),0,0)}eq(e){return e instanceof R&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Vc(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new R(e.resolve(n.anchor))}static create(e,n){return new R(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}R.prototype.visible=!1;F.jsonID("node",R);class Vc{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new gl(r,r):new Vc(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&R.isSelectable(r)?new R(n):F.near(n)}}class at extends F{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=b.empty){if(n==b.empty){e.delete(0,e.doc.content.size);let r=F.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new at(e)}map(e){return new at(e)}eq(e){return e instanceof at}getBookmark(){return Kx}}F.jsonID("all",at);const Kx={map(){return this},resolve(t){return new at(t)}};function dr(t,e,n,r,i,o=!1){if(e.inlineContent)return L.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&R.isSelectable(l))return R.create(t,n-(i<0?l.nodeSize:0))}else{let a=dr(t,l,n+i,i<0?l.childCount:0,i,o);if(a)return a}n+=l.nodeSize*i}return null}function Hf(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof ce||i instanceof fe))return;let o=t.mapping.maps[r],s;o.forEach((l,a,u,c)=>{s==null&&(s=c)}),t.setSelection(F.near(t.doc.resolve(s),n))}const Uf=1,Bo=2,Wf=4;class Jx extends Ux{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Uf)&~Bo,this.storedMarks=null,this}get selectionSet(){return(this.updated&Uf)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Bo,this}ensureMarks(e){return U.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Bo)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Bo,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||U.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(F.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Wf,this}get scrolledIntoView(){return(this.updated&Wf)>0}}function Kf(t,e){return!e||!t?t:t.bind(e)}class yi{constructor(e,n,r){this.name=e,this.init=Kf(n.init,r),this.apply=Kf(n.apply,r)}}const qx=[new yi("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new yi("selection",{init(t,e){return t.selection||F.atStart(e.doc)},apply(t){return t.selection}}),new yi("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new yi("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class aa{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=qx.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new yi(r.key,r.spec.state,r))})}}class Mr{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,u=i?i[s].state:this,c=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,u,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Mr(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new Jx(this)}static create(e){let n=new aa(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Mr(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new aa(this.schema,e.plugins),r=n.fields,i=new Mr(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new aa(e.schema,e.plugins),o=new Mr(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=gn.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=F.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],u=a.spec.state;if(a.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){o[s.name]=u.fromJSON.call(a,e,n[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function Yg(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Yg(i,e,{})),n[r]=i}return n}class Je{constructor(e){this.spec=e,this.props={},e.props&&Yg(e.props,this,this.props),this.key=e.key?e.key.key:Xg("plugin")}getState(e){return e[this.key]}}const ua=Object.create(null);function Xg(t){return t in ua?t+"$"+ ++ua[t]:(ua[t]=0,t+"$")}class Dt{constructor(e="key"){this.key=Xg(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const ye=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},to=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Tu=null;const It=function(t,e,n){let r=Tu||(Tu=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Qx=function(){Tu=null},nr=function(t,e,n,r){return n&&(Jf(t,e,n,r,-1)||Jf(t,e,n,r,1))},Gx=/^(img|br|input|textarea|hr)$/i;function Jf(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:it(t))){let o=t.parentNode;if(!o||o.nodeType!=1||ho(t)||Gx.test(t.nodeName)||t.contentEditable=="false")return!1;e=ye(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?it(t):0}else return!1}}function it(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Yx(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=it(t)}else if(t.parentNode&&!ho(t))e=ye(t),t=t.parentNode;else return null}}function Xx(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!ho(t))e=ye(t)+1,t=t.parentNode;else return null}}function Zx(t,e,n){for(let r=e==0,i=e==it(t);r||i;){if(t==n)return!0;let o=ye(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==it(t)}}function ho(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const yl=function(t){return t.focusNode&&nr(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Rn(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function eS(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function tS(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(it(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(it(r.startContainer),r.startOffset)}}}const Ot=typeof navigator<"u"?navigator:null,qf=typeof document<"u"?document:null,Tn=Ot&&Ot.userAgent||"",Ou=/Edge\/(\d+)/.exec(Tn),Zg=/MSIE \d/.exec(Tn),bu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Tn),We=!!(Zg||bu||Ou),yn=Zg?document.documentMode:bu?+bu[1]:Ou?+Ou[1]:0,xt=!We&&/gecko\/(\d+)/i.test(Tn);xt&&+(/Firefox\/(\d+)/.exec(Tn)||[0,0])[1];const Du=!We&&/Chrome\/(\d+)/.exec(Tn),Oe=!!Du,ey=Du?+Du[1]:0,Re=!We&&!!Ot&&/Apple Computer/.test(Ot.vendor),Kr=Re&&(/Mobile\/\w+/.test(Tn)||!!Ot&&Ot.maxTouchPoints>2),tt=Kr||(Ot?/Mac/.test(Ot.platform):!1),nS=Ot?/Win/.test(Ot.platform):!1,Bt=/Android \d/.test(Tn),po=!!qf&&"webkitFontSmoothing"in qf.documentElement.style,rS=po?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function iS(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Pt(t,e){return typeof t=="number"?t:t[e]}function oS(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Qf(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;s=to(s)){if(s.nodeType!=1)continue;let l=s,a=l==o.body,u=a?iS(o):oS(l),c=0,d=0;if(e.top<u.top+Pt(r,"top")?d=-(u.top-e.top+Pt(i,"top")):e.bottom>u.bottom-Pt(r,"bottom")&&(d=e.bottom-e.top>u.bottom-u.top?e.top+Pt(i,"top")-u.top:e.bottom-u.bottom+Pt(i,"bottom")),e.left<u.left+Pt(r,"left")?c=-(u.left-e.left+Pt(i,"left")):e.right>u.right-Pt(r,"right")&&(c=e.right-u.right+Pt(i,"right")),c||d)if(a)o.defaultView.scrollBy(c,d);else{let f=l.scrollLeft,h=l.scrollTop;d&&(l.scrollTop+=d),c&&(l.scrollLeft+=c);let p=l.scrollLeft-f,g=l.scrollTop-h;e={left:e.left-p,top:e.top-g,right:e.right-p,bottom:e.bottom-g}}if(a||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function sS(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=t.root.elementFromPoint(o,s);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:ty(t.dom)}}function ty(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=to(r));return e}function lS({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;ny(n,r==0?0:r-e)}function ny(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let ur=null;function aS(t){if(t.setActive)return t.setActive();if(ur)return t.focus(ur);let e=ty(t);t.focus(ur==null?{get preventScroll(){return ur={preventScroll:!0},!0}}:void 0),ur||(ur=!1,ny(e,0))}function ry(t,e){let n,r=2e8,i,o=0,s=e.top,l=e.top,a,u;for(let c=t.firstChild,d=0;c;c=c.nextSibling,d++){let f;if(c.nodeType==1)f=c.getClientRects();else if(c.nodeType==3)f=It(c).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=s&&p.bottom>=l){s=Math.max(p.bottom,s),l=Math.min(p.top,l);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){n=c,r=g,i=g&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,c.nodeType==1&&g&&(o=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!a&&p.left<=e.left&&p.right>=e.left&&(a=c,u={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(o=d+1)}}return!n&&a&&(n=a,i=u,r=0),n&&n.nodeType==3?uS(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:ry(n,i)}function uS(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=Jt(r,1);if(o.top!=o.bottom&&Hc(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function Hc(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function cS(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function dS(t,e,n){let{node:r,offset:i}=ry(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function fS(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let l=t.docView.nearestDesc(o,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&(!s&&a.left>r.left||a.top>r.top?i=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),s=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;o=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function iy(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let u=l[a];if(Hc(e,u))return iy(s,e,u)}}if((o=(o+1)%r)==i)break}return t}function hS(t,e){let n=t.dom.ownerDocument,r,i=0,o=tS(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let u=t.dom.getBoundingClientRect();if(!Hc(e,u)||(s=iy(t.dom,e,u),!s))return null}if(Re)for(let u=s;r&&u;u=to(u))u.draggable&&(r=void 0);if(s=cS(s,e),r){if(xt&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let u;po&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=fS(t,r,i,e))}l==null&&(l=dS(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function Gf(t){return t.top<t.bottom||t.left<t.right}function Jt(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Gf(r))return r}return Array.prototype.find.call(n,Gf)||t.getBoundingClientRect()}const pS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function oy(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=po||xt;if(r.nodeType==3)if(s&&(pS.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=Jt(It(r,i,i),n);if(xt&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=Jt(It(r,i-1,i-1),-1);if(u.top==a.top){let c=Jt(It(r,i,i+1),-1);if(c.top!=a.top)return ci(c,c.left<u.left)}}return a}else{let a=i,u=i,c=n<0?1:-1;return n<0&&!i?(u++,c=-1):n>=0&&i==r.nodeValue.length?(a--,c=1):n<0?a--:u++,ci(Jt(It(r,a,u),c),c<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==it(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return ca(a.getBoundingClientRect(),!1)}if(o==null&&i<it(r)){let a=r.childNodes[i];if(a.nodeType==1)return ca(a.getBoundingClientRect(),!0)}return ca(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==it(r))){let a=r.childNodes[i-1],u=a.nodeType==3?It(a,it(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(u)return ci(Jt(u,1),!1)}if(o==null&&i<it(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let u=a?a.nodeType==3?It(a,0,s?0:1):a.nodeType==1?a:null:null;if(u)return ci(Jt(u,-1),!0)}return ci(Jt(r.nodeType==3?It(r):r,-n),n>=0)}function ci(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ca(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function sy(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function mS(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return sy(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.contentDOM||l.dom;break}o=l.dom.parentNode}let s=oy(t,i.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=It(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<a.length;u++){let c=a[u];if(c.bottom>c.top+1&&(n=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}const gS=/[\u0590-\u08ac]/;function yS(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,l=t.domSelection();return l?!gS.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?o:s:sy(t,e,()=>{let{focusNode:a,focusOffset:u,anchorNode:c,anchorOffset:d}=t.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:g}=t.domSelectionRange(),v=p&&!h.contains(p.nodeType==1?p:p.parentNode)||a==p&&u==g;try{l.collapse(c,d),a&&(a!=c||u!=d)&&l.extend&&l.extend(a,u)}catch{}return f!=null&&(l.caretBidiLevel=f),v}):r.pos==r.start()||r.pos==r.end()}let Yf=null,Xf=null,Zf=!1;function vS(t,e,n){return Yf==e&&Xf==n?Zf:(Yf=e,Xf=n,Zf=n=="up"||n=="down"?mS(t,e,n):yS(t,e,n))}const ut=0,eh=1,_n=2,bt=3;class mo{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ut,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>ye(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let l=i.children[s];if(l.size){i=l;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.size;if(l>e||s instanceof ay){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof ly&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?ye(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?ye(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){let a=this.children[l],u=s+a.size;if(i==-1&&e<=u){let c=s+a.border;if(e>=c&&n<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,c);e=s;for(let d=l;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=ye(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(u>n||l==this.children.length-1)){n=u;for(let c=l+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=ye(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let h=0,p=0;h<this.children.length;h++){let g=this.children[h],v=p+g.size;if(o>p&&s<v)return g.setSelection(e-p-g.border,n-p-g.border,r,i);p=v}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((xt||Re)&&e==n){let{node:h,offset:p}=l;if(h.nodeType==3){if(d=!!(p&&h.nodeValue[p-1]==`
`),d&&p==h.nodeValue.length)for(let g=h,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(l=a={node:v.parentNode,offset:ye(v)+1});break}let m=g.pmViewDesc;if(m&&m.node&&m.node.isBlock)break}}else{let g=h.childNodes[p-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(xt&&c.focusNode&&c.focusNode!=a.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&Re)&&nr(l.node,l.offset,c.anchorNode,c.anchorOffset)&&nr(a.node,a.offset,c.focusNode,c.focusOffset))return;let f=!1;if((u.extend||e==n)&&!d){u.collapse(l.node,l.offset);try{e!=n&&u.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>n){let p=l;l=a,a=p}let h=document.createRange();h.setEnd(a.node,a.offset),h.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let l=r+o.border,a=s-o.border;if(e>=l&&n<=a){this.dirty=e==r||n==s?_n:eh,e==l&&n==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=bt:o.markDirty(e-l,n-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?_n:bt}r=s}this.dirty=_n}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?_n:eh;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class ly extends mo{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==ut&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class kS extends mo{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class rr extends mo{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=lr.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new rr(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&bt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=bt&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ut){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ut}}slice(e,n,r){let i=rr.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Au(o,n,s,r)),e>0&&(o=Au(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class vn extends mo{constructor(e,n,r,i,o,s,l,a,u){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,o,s){let l=o.nodeViews[n.type.name],a,u=l&&l(n,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,i),c=u&&u.dom,d=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=lr.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let f=c;return c=dy(c,r,n),u?a=new xS(e,n,r,i,c,d||null,f,u,o,s+1):n.isText?new vl(e,n,r,i,c,f,o):new vn(e,n,r,i,c,d||null,f,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>C.empty)}return e}matchesNode(e,n,r){return this.dirty==ut&&e.eq(this.node)&&_s(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new wS(this,s&&s.node,e);MS(this.node,this.innerDeco,(u,c,d)=>{u.spec.marks?a.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!d&&a.syncToMarks(c==this.node.childCount?U.none:this.node.child(c).marks,r,e),a.placeWidget(u,e,i)},(u,c,d,f)=>{a.syncToMarks(u.marks,r,e);let h;a.findNodeMatch(u,c,d,f)||l&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(h=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(u,c,d,h,e)||a.updateNextNode(u,c,d,e,f,i)||a.addNode(u,c,d,e,i),i+=u.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==_n)&&(s&&this.protectLocalComposition(e,s),uy(this.contentDOM,this.children,e),Kr&&NS(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof L)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,l=TS(this.node.content,s,r-n,i-n);return l<0?null:{node:o,pos:l,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new kS(this,o,n,i);e.input.compositionNodes.push(s),this.children=Au(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==bt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ut}updateOuterDeco(e){if(_s(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=cy(this.dom,this.nodeDOM,Pu(this.outerDeco,this.node,n),Pu(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function th(t,e,n,r,i){dy(r,e,t);let o=new vn(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class vl extends vn{constructor(e,n,r,i,o,s,l){super(e,n,r,i,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==bt||this.dirty!=ut&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ut||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ut,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new vl(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=bt)}get domAtom(){return!1}isText(e){return this.node.text==e}}class ay extends mo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ut&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class xS extends vn{constructor(e,n,r,i,o,s,l,a,u,c){super(e,n,r,i,o,s,l,u,c),this.spec=a}update(e,n,r,i){if(this.dirty==bt)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function uy(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==t){for(;l!=r;)r=nh(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(s instanceof rr){let a=r?r.previousSibling:t.lastChild;uy(s.contentDOM,s.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=nh(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Di=function(t){t&&(this.nodeName=t)};Di.prototype=Object.create(null);const jn=[new Di];function Pu(t,e,n){if(t.length==0)return jn;let r=n?jn[0]:new Di,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new Di(s.nodeName));for(let l in s){let a=s[l];a!=null&&(n&&i.length==1&&i.push(r=new Di(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function cy(t,e,n,r){if(n==jn&&r==jn)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],l=n[o];if(o){let a;l&&l.nodeName==s.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=jn[0]),i=a}SS(i,l||jn[0],s)}return i}function SS(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function dy(t,e,n){return cy(t,t,jn,Pu(e,n,t.nodeType!=1))}function _s(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function nh(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class wS{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=CS(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=ut,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let u=this.top.children[a];if(u.matchesMark(e[o])&&!this.isLocked(u.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=rr.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let u=this.top.children[l];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==bt&&s.dom==s.contentDOM&&(s.dirty=_n),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof vn){let u=this.preMatch.matched.get(a);if(u!=null&&u!=o)return!1;let c=a.dom,d,f=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=bt&&_s(n,a.outerDeco));if(!f&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(a,e,n,r,i,s)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=_n,d.updateChildren(i,s+1),d.dirty=ut),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!_s(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=vn.create(this.top,n,r,i,o,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,o){let s=vn.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new ly(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof rr;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof vl)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Re||Oe)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new ay(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function CS(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let l;for(;;)if(r){let u=n.children[r-1];if(u instanceof rr)n=u,r=u.children.length;else{l=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,o.set(l,i),s.push(l)}}return{index:i,matched:o,matches:s.reverse()}}function ES(t,e){return t.type.side-e.type.side}function MS(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,i,e.forChild(o,c),u),o+=c.nodeSize}return}let s=0,l=[],a=null;for(let u=0;;){let c,d;for(;s<i.length&&i[s].to==o;){let v=i[s++];v.widget&&(c?(d||(d=[c])).push(v):c=v)}if(c)if(d){d.sort(ES);for(let v=0;v<d.length;v++)n(d[v],u,!!a)}else n(c,u,!!a);let f,h;if(a)h=-1,f=a,a=null;else if(u<t.childCount)h=u,f=t.child(u++);else break;for(let v=0;v<l.length;v++)l[v].to<=o&&l.splice(v--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let p=o+f.nodeSize;if(f.isText){let v=p;s<i.length&&i[s].from<v&&(v=i[s].from);for(let m=0;m<l.length;m++)l[m].to<v&&(v=l[m].to);v<p&&(a=f.cut(v-o),f=f.cut(0,v-o),p=v,h=-1)}else for(;s<i.length&&i[s].to<p;)s++;let g=f.isInline&&!f.isLeaf?l.filter(v=>!v.inline):l.slice();r(f,g,e.forChild(o,f),h),o=p}}function NS(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function TS(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;i<t.childCount;){let u=t.child(i++);if(o+=u.nodeSize,!u.isText)break;a+=u.text}if(o>=n){if(o>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let u=l<r?a.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=n)return l+u;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Au(t,e,n,r,i){let o=[];for(let s=0,l=0;s<t.length;s++){let a=t[s],u=l,c=l+=a.size;u>=n||c<=e?o.push(a):(u<e&&o.push(a.slice(0,e-u,r)),i&&(o.push(i),i=void 0),c>n&&o.push(a.slice(n-u,a.size,r)))}return o}function Uc(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,u;if(yl(n)){for(a=s;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&R.isSelectable(d)&&i.parent&&!(d.isInline&&Zx(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;u=new R(s==f?l:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=s,f=s;for(let h=0;h<n.rangeCount;h++){let p=n.getRangeAt(h);d=Math.min(d,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[a,s]=f==t.state.selection.anchor?[f,d]:[d,f],l=r.resolve(s)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let c=r.resolve(a);if(!u){let d=e=="pointer"||t.state.selection.head<l.pos&&!o?1:-1;u=Wc(t,c,l,d)}return u}function fy(t){return t.editable?t.hasFocus():py(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function _t(t,e=!1){let n=t.state.selection;if(hy(t,n),!!fy(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Oe){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&nr(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)bS(t);else{let{anchor:r,head:i}=n,o,s;rh&&!(n instanceof L)&&(n.$from.parent.inlineContent||(o=ih(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=ih(t,n.to))),t.docView.setSelection(r,i,t,e),rh&&(o&&oh(o),s&&oh(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&OS(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const rh=Re||Oe&&ey<63;function ih(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Re&&i&&i.contentEditable=="false")return da(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return da(i);if(o)return da(o)}}function da(t){return t.contentEditable="true",Re&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function oh(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function OS(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!fy(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function bS(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,ye(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&We&&yn<=11&&(r.disabled=!0,r.disabled=!1)}function hy(t,e){if(e instanceof R){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(sh(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else sh(t)}function sh(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Wc(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||L.between(e,n,r)}function lh(t){return t.editable&&!t.hasFocus()?!1:py(t)}function py(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function DS(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return nr(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Iu(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&F.findFrom(o,e)}function Gt(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function ah(t,e,n){let r=t.state.selection;if(r instanceof L)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return Gt(t,new L(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Iu(t.state,e);return i&&i instanceof R?Gt(t,i):!1}else if(!(tt&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM?R.isSelectable(o)?Gt(t,new R(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):po?Gt(t,new L(t.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof R&&r.node.isInline)return Gt(t,new L(e>0?r.$to:r.$from));{let i=Iu(t.state,e);return i?Gt(t,i):!1}}}function js(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Pi(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function cr(t,e){return e<0?PS(t):AS(t)}function PS(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(xt&&n.nodeType==1&&r<js(n)&&Pi(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(Pi(l,-1))i=n,o=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(my(n))break;{let l=n.previousSibling;for(;l&&Pi(l,-1);)i=n.parentNode,o=ye(l),l=l.previousSibling;if(l)n=l,r=js(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Ru(t,n,r):i&&Ru(t,i,o)}function AS(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=js(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(Pi(l,1))o=n,s=++r;else break}else{if(my(n))break;{let l=n.nextSibling;for(;l&&Pi(l,1);)o=l.parentNode,s=ye(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=js(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Ru(t,o,s)}function my(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function IS(t,e){for(;t&&e==t.childNodes.length&&!ho(t);)e=ye(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function RS(t,e){for(;t&&!e&&!ho(t);)e=ye(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Ru(t,e,n){if(e.nodeType!=3){let o,s;(s=IS(e,n))?(e=s,n=0):(o=RS(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(yl(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&_t(t)},50)}function uh(t,e){let n=t.state.doc.resolve(e);if(!(Oe||nS)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function ch(t,e,n){let r=t.state.selection;if(r instanceof L&&!r.empty||n.indexOf("s")>-1||tt&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Iu(t.state,e);if(s&&s instanceof R)return Gt(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof at?F.near(s,e):F.findFrom(s,e);return l?Gt(t,l):!1}return!1}function dh(t,e){if(!(t.state.selection instanceof L))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function fh(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function zS(t){if(!Re||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;fh(t,r,"true"),setTimeout(()=>fh(t,r,"false"),20)}return!1}function LS(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function BS(t,e){let n=e.keyCode,r=LS(e);if(n==8||tt&&n==72&&r=="c")return dh(t,-1)||cr(t,-1);if(n==46&&!e.shiftKey||tt&&n==68&&r=="c")return dh(t,1)||cr(t,1);if(n==13||n==27)return!0;if(n==37||tt&&n==66&&r=="c"){let i=n==37?uh(t,t.state.selection.from)=="ltr"?-1:1:-1;return ah(t,i,r)||cr(t,i)}else if(n==39||tt&&n==70&&r=="c"){let i=n==39?uh(t,t.state.selection.from)=="ltr"?1:-1:1;return ah(t,i,r)||cr(t,i)}else{if(n==38||tt&&n==80&&r=="c")return ch(t,-1,r)||cr(t,-1);if(n==40||tt&&n==78&&r=="c")return zS(t)||ch(t,1,r)||cr(t,1);if(r==(tt?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Kc(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||lr.fromSchema(t.state.schema),l=Sy(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let u=a.firstChild,c,d=0;for(;u&&u.nodeType==1&&(c=xy[u.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let p=l.createElement(c[h]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),d++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function gy(t,e,n,r,i){let o=i.parent.type.spec.code,s,l;if(!n&&!e)return null;let a=e&&(r||o||!n);if(a){if(t.someProp("transformPastedText",f=>{e=f(e,o||r,t)}),o)return e?new b(C.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):b.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)l=d;else{let f=i.marks(),{schema:h}=t.state,p=lr.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=s.appendChild(document.createElement("p"));g&&v.appendChild(p.serializeNode(h.text(g,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=$S(n),po&&VS(s);let u=s&&s.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||Oi.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||c),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!FS.test(f.parentNode.nodeName)?{ignore:!0}:null}})),c)l=HS(hh(l,+c[1],+c[2]),c[4]);else if(l=b.maxOpen(_S(l.content,i),!0),l.openStart||l.openEnd){let d=0,f=0;for(let h=l.content.firstChild;d<l.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=l.content.lastChild;f<l.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);l=hh(l,d,f)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const FS=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function _S(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),u;if(!a)return s=null;if(u=s.length&&o.length&&vy(a,o,l,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=ky(s[s.length-1],o.length));let c=yy(l,a);s.push(c),i=i.matchType(c.type),o=a}}),s)return C.from(s)}return t}function yy(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,C.from(t));return t}function vy(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=vy(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(C.from(yy(n,t,i+1))))}}function ky(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,ky(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(C.empty,!0);return t.copy(n.append(r))}function zu(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,l=s.content;return t.childCount>1&&(o=0),i<r-1&&(l=zu(l,e,n,r,i+1,o)),i>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(C.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function hh(t,e,n){return e<t.openStart&&(t=new b(zu(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new b(zu(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const xy={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ph=null;function Sy(){return ph||(ph=document.implementation.createHTMLDocument("title"))}let fa=null;function jS(t){let e=window.trustedTypes;return e?(fa||(fa=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),fa.createHTML(t)):t}function $S(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Sy().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&xy[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=jS(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function VS(t){let e=t.querySelectorAll(Oe?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function HS(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=C.from(a.create(r[l+1],i)),o++,s++}return new b(i,o,s)}const ze={},Le={},US={touchstart:!0,touchmove:!0};class WS{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function KS(t){for(let e in ze){let n=ze[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{qS(t,r)&&!Jc(t,r)&&(t.editable||!(r.type in Le))&&n(t,r)},US[e]?{passive:!0}:void 0)}Re&&t.dom.addEventListener("input",()=>null),Lu(t)}function ln(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function JS(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Lu(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Jc(t,r))})}function Jc(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function qS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function QS(t,e){!Jc(t,e)&&ze[e.type]&&(t.editable||!(e.type in Le))&&ze[e.type](t,e)}Le.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Cy(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Bt&&Oe&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Kr&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Rn(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||BS(t,n)?n.preventDefault():ln(t,"key")};Le.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Le.keypress=(t,e)=>{let n=e;if(Cy(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||tt&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof L)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function kl(t){return{left:t.clientX,top:t.clientY}}function GS(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function qc(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,l=>s>o.depth?l(t,n,o.nodeAfter,o.before(s),i,!0):l(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Lr(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function YS(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&R.isSelectable(r)?(Lr(t,new R(n)),!0):!1}function XS(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof R&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if(R.isSelectable(l)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Lr(t,R.create(t.state.doc,i)),!0):!1}function ZS(t,e,n,r,i){return qc(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?XS(t,n):YS(t,n))}function ew(t,e,n,r){return qc(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function tw(t,e,n,r){return qc(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||nw(t,n,r)}function nw(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Lr(t,L.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)Lr(t,L.create(r,l+1,l+1+s.content.size));else if(R.isSelectable(s))Lr(t,R.create(r,l));else continue;return!0}}function Qc(t){return $s(t)}const wy=tt?"metaKey":"ctrlKey";ze.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Qc(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&GS(n,t.input.lastClick)&&!n[wy]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(kl(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new rw(t,s,n,!!r)):(o=="doubleClick"?ew:tw)(t,s.pos,s.inside,n)?n.preventDefault():ln(t,"pointer"))};class rw{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[wy],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let c=e.state.doc.resolve(n.pos);o=c.parent,s=c.depth?c.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:u}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof R&&u.from<=s&&u.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&xt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ln(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>_t(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(kl(e))),this.updateAllowDefault(e),this.allowDefault||!n?ln(this.view,"pointer"):ZS(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Re&&this.mightDrag&&!this.mightDrag.node.isAtom||Oe&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Lr(this.view,F.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ln(this.view,"pointer")}move(e){this.updateAllowDefault(e),ln(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ze.touchstart=t=>{t.input.lastTouch=Date.now(),Qc(t),ln(t,"pointer")};ze.touchmove=t=>{t.input.lastTouch=Date.now(),ln(t,"pointer")};ze.contextmenu=t=>Qc(t);function Cy(t,e){return t.composing?!0:Re&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const iw=Bt?5e3:-1;Le.compositionstart=Le.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof L&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),$s(t,!0),t.markCursor=null;else if($s(t,!e.selection.empty),xt&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let l=t.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}Ey(t,iw)};Le.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Ey(t,20))};function Ey(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>$s(t),e))}function My(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=sw());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function ow(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Yx(e.focusNode,e.focusOffset),r=Xx(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function sw(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function $s(t,e=!1){if(!(Bt&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),My(t),e||t.docView&&t.docView.dirty){let n=Uc(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function lw(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const no=We&&yn<15||Kr&&rS<604;ze.copy=Le.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=no?null:n.clipboardData,s=r.content(),{dom:l,text:a}=Kc(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):lw(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function aw(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function uw(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ro(t,r.value,null,i,e):ro(t,r.textContent,r.innerHTML,i,e)},50)}function ro(t,e,n,r,i){let o=gy(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,o||b.empty)))return!0;if(!o)return!1;let s=aw(o),l=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Ny(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Le.paste=(t,e)=>{let n=e;if(t.composing&&!Bt)return;let r=no?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&ro(t,Ny(r),r.getData("text/html"),i,n)?n.preventDefault():uw(t,n)};class Ty{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Oy=tt?"altKey":"ctrlKey";ze.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(kl(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof R?i.to-1:i.to))){if(r&&r.mightDrag)s=R.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=R.create(t.state.doc,d.posBefore))}}let l=(s||t.state.selection).content(),{dom:a,text:u,slice:c}=Kc(t,l);(!n.dataTransfer.files.length||!Oe||ey>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(no?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",no||n.dataTransfer.setData("text/plain",u),t.dragging=new Ty(c,!n[Oy],s)};ze.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Le.dragover=Le.dragenter=(t,e)=>e.preventDefault();Le.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(kl(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t)}):s=gy(t,Ny(n.dataTransfer),no?null:n.dataTransfer.getData("text/html"),!1,o);let l=!!(r&&!n[Oy]);if(t.someProp("handleDrop",p=>p(t,n,s||b.empty,l))){n.preventDefault();return}if(!s)return;n.preventDefault();let a=s?Kg(t.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let u=t.state.tr;if(l){let{node:p}=r;p?p.replace(u):u.deleteSelection()}let c=u.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=u.doc;if(d?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(f))return;let h=u.doc.resolve(c);if(d&&R.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new R(h));else{let p=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((g,v,m,y)=>p=y),u.setSelection(Wc(t,h,u.doc.resolve(p)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};ze.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&_t(t)},20))};ze.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};ze.beforeinput=(t,e)=>{if(Oe&&Bt&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Rn(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Le)ze[t]=Le[t];function io(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Vs{constructor(e,n){this.toDOM=e,this.spec=n||Jn,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new st(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Vs&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&io(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class kn{constructor(e,n){this.attrs=e,this.spec=n||Jn}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new st(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof kn&&io(this.attrs,e.attrs)&&io(this.spec,e.spec)}static is(e){return e.type instanceof kn}destroy(){}}class Gc{constructor(e,n){this.attrs=e,this.spec=n||Jn}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new st(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof Gc&&io(this.attrs,e.attrs)&&io(this.spec,e.spec)}destroy(){}}class st{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new st(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new st(e,e,new Vs(n,r))}static inline(e,n,r,i){return new st(e,n,new kn(r,i))}static node(e,n,r,i){return new st(e,n,new Gc(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof kn}get widget(){return this.type instanceof Vs}}const fr=[],Jn={};class oe{constructor(e,n){this.local=e.length?e:fr,this.children=n.length?n:fr}static create(e,n){return n.length?Hs(n,e,0,Jn):Me}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=n&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,n-l,r,i+l,o)}}map(e,n,r){return this==Me||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Jn)}mapInner(e,n,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?cw(this.children,s||[],e,n,r,i,o):s?new oe(s.sort(qn),fr):Me}add(e,n){return n.length?this==Me?oe.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((l,a)=>{let u=a+r,c;if(c=Dy(n,l,u)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,c,u+1):i.splice(o,0,a,a+l.nodeSize,Hs(c,l,u+1,Jn)),o+=3}});let s=by(o?Py(n):n,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new oe(s.length?this.local.concat(s).sort(qn):this.local,i||this.children)}remove(e){return e.length==0||this==Me?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+n,a=r[o+1]+n;for(let c=0,d;c<e.length;c++)(d=e[c])&&d.from>l&&d.to<a&&(e[c]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(s,l+1);u!=Me?r[o+2]=u:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new oe(i,r):Me}forChild(e,n){if(this==Me)return this;if(n.isLeaf)return oe.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof kn){let u=Math.max(o,a.from)-o,c=Math.min(s,a.to)-o;u<c&&(i||(i=[])).push(a.copy(u,c))}}if(i){let l=new oe(i.sort(qn),fr);return r?new en([l,r]):l}return r||Me}eq(e){if(this==e)return!0;if(!(e instanceof oe)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Yc(this.localsInner(e))}localsInner(e){if(this==Me)return fr;if(e.inlineContent||!this.local.some(kn.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof kn||n.push(this.local[r]);return n}forEachSet(e){e(this)}}oe.empty=new oe([],[]);oe.removeOverlap=Yc;const Me=oe.empty;class en{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Jn));return en.from(r)}forChild(e,n){if(n.isLeaf)return oe.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=Me&&(o instanceof en?r=r.concat(o.members):r.push(o))}return en.from(r)}eq(e){if(!(e instanceof en)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?Yc(r?n:n.sort(qn)):fr}static from(e){switch(e.length){case 0:return Me;case 1:return e[0];default:return new en(e.every(n=>n instanceof oe)?e:e.reduce((n,r)=>n.concat(r instanceof oe?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function cw(t,e,n,r,i,o,s){let l=t.slice();for(let u=0,c=o;u<n.maps.length;u++){let d=0;n.maps[u].forEach((f,h,p,g)=>{let v=g-p-(h-f);for(let m=0;m<l.length;m+=3){let y=l[m+1];if(y<0||f>y+c-d)continue;let k=l[m]+c-d;h>=k?l[m+1]=f<=k?-2:-1:f>=c&&v&&(l[m]+=v,l[m+1]+=v)}d+=v}),c=n.maps[u].map(c,-1)}let a=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){a=!0,l[u+1]=-1;continue}let c=n.map(t[u]+o),d=c-i;if(d<0||d>=r.content.size){a=!0;continue}let f=n.map(t[u+1]+o,-1),h=f-i,{index:p,offset:g}=r.content.findIndex(d),v=r.maybeChild(p);if(v&&g==d&&g+v.nodeSize==h){let m=l[u+2].mapInner(n,v,c+1,t[u]+o+1,s);m!=Me?(l[u]=d,l[u+1]=h,l[u+2]=m):(l[u+1]=-2,a=!0)}else a=!0}if(a){let u=dw(l,t,e,n,i,o,s),c=Hs(u,r,0,s);e=c.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,f=0;d<c.children.length;d+=3){let h=c.children[d];for(;f<l.length&&l[f]<h;)f+=3;l.splice(f,0,c.children[d],c.children[d+1],c.children[d+2])}}return new oe(e.sort(qn),l)}function by(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new st(i.from+e,i.to+e,i.type))}return n}function dw(t,e,n,r,i,o,s){function l(a,u){for(let c=0;c<a.local.length;c++){let d=a.local[c].map(r,i,u);d?n.push(d):s.onRemove&&s.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)l(a.children[c+2],a.children[c]+u+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+o+1);return n}function Dy(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function Py(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Hs(t,e,n,r){let i=[],o=!1;e.forEach((l,a)=>{let u=Dy(t,l,a+n);if(u){o=!0;let c=Hs(u,l,n+a+1,r);c!=Me&&i.push(a,a+l.nodeSize,c)}});let s=by(o?Py(t):t,-n).sort(qn);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new oe(s,i):Me}function qn(t,e){return t.from-e.from||t.to-e.to}function Yc(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),mh(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),mh(e,i,r.copy(o.from,r.to)));break}}}return e}function mh(t,e,n){for(;e<t.length&&qn(n,t[e])>0;)e++;t.splice(e,0,n)}function ha(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Me&&e.push(r)}),t.cursorWrapper&&e.push(oe.create(t.state.doc,[t.cursorWrapper.deco])),en.from(e)}const fw={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},hw=We&&yn<=11;class pw{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class mw{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new pw,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);We&&yn<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),hw&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,fw)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(lh(this.view)){if(this.suppressingSelectionUpdates)return _t(this.view);if(We&&yn<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&nr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=to(o))n.add(o);for(let o=e.anchorNode;o;o=to(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&lh(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,l=!1,a=[];if(e.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],a);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(l=!0))}if(xt&&a.length){let c=a.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,f]=c;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of c){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||vw(e,d)!=h)&&f.remove()}}}let u=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&yl(r)&&(u=Uc(e))&&u.eq(F.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,_t(e),this.currentSelection.set(r)):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),gw(e)),this.handleDOMChange(o,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||_t(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let d=e.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(We&&yn<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:d,nextSibling:f}=e.addedNodes[c];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f)}let s=i&&i.parentNode==e.target?ye(i)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?ye(o):e.target.childNodes.length,u=r.localPosFromDOM(e.target,a,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let gh=new WeakMap,yh=!1;function gw(t){if(!gh.has(t)&&(gh.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=xt,yh)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),yh=!0}}function vh(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return nr(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function yw(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return vh(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?vh(t,n):null}function vw(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function kw(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),u,c=a.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:a.anchorOffset}],yl(a)||u.push({node:a.focusNode,offset:a.focusOffset})),Oe&&t.input.lastKeyCode===8)for(let v=o;v>i;v--){let m=r.childNodes[v-1],y=m.pmViewDesc;if(m.nodeName=="BR"&&!y){o=v;break}if(!y||y.size)break}let d=t.state.doc,f=t.someProp("domParser")||Oi.fromSchema(t.state.schema),h=d.resolve(s),p=null,g=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:o,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:xw,context:h});if(u&&u[0].pos!=null){let v=u[0].pos,m=u[1]&&u[1].pos;m==null&&(m=v),p={anchor:v+s,head:m+s}}return{doc:g,sel:p,from:s,to:l}}function xw(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Re&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Re&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Sw=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function ww(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let I=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,z=Uc(t,I);if(z&&!t.state.selection.eq(z)){if(Oe&&Bt&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",bn=>bn(t,Rn(13,"Enter"))))return;let we=t.state.tr.setSelection(z);I=="pointer"?we.setMeta("pointer",!0):I=="key"&&we.scrollIntoView(),o&&we.setMeta("composition",o),t.dispatch(we)}return}let s=t.state.doc.resolve(e),l=s.sharedDepth(n);e=s.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,u=kw(t,e,n),c=t.state.doc,d=c.slice(u.from,u.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let p=Mw(d.content,u.doc.content,u.from,f,h);if(p&&t.input.domChangeCount++,(Kr&&t.input.lastIOSEnter>Date.now()-225||Bt)&&i.some(I=>I.nodeType==1&&!Sw.test(I.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",I=>I(t,Rn(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&a instanceof L&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))p={start:a.from,endA:a.to,endB:a.to};else{if(u.sel){let I=kh(t,t.state.doc,u.sel);if(I&&!I.eq(t.state.selection)){let z=t.state.tr.setSelection(I);o&&z.setMeta("composition",o),t.dispatch(z)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof L&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),We&&yn<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>u.from&&u.doc.textBetween(p.start-u.from-1,p.start-u.from+1)==" "&&(p.start--,p.endA--,p.endB--);let g=u.doc.resolveNoCache(p.start-u.from),v=u.doc.resolveNoCache(p.endB-u.from),m=c.resolve(p.start),y=g.sameParent(v)&&g.parent.inlineContent&&m.end()>=p.endA,k;if((Kr&&t.input.lastIOSEnter>Date.now()-225&&(!y||i.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!y&&g.pos<u.doc.content.size&&!g.sameParent(v)&&(k=F.findFrom(u.doc.resolve(g.pos+1),1,!0))&&k.head==v.pos)&&t.someProp("handleKeyDown",I=>I(t,Rn(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&Ew(c,p.start,p.endA,g,v)&&t.someProp("handleKeyDown",I=>I(t,Rn(8,"Backspace")))){Bt&&Oe&&t.domObserver.suppressSelectionUpdates();return}Oe&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),Bt&&!y&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==p.endA&&(p.endB-=2,v=u.doc.resolveNoCache(p.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(I){return I(t,Rn(13,"Enter"))})},20));let x=p.start,w=p.endA,E,T,O;if(y){if(g.pos==v.pos)We&&yn<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>_t(t),20)),E=t.state.tr.delete(x,w),T=c.resolve(p.start).marksAcross(c.resolve(p.endA));else if(p.endA==p.endB&&(O=Cw(g.parent.content.cut(g.parentOffset,v.parentOffset),m.parent.content.cut(m.parentOffset,p.endA-m.start()))))E=t.state.tr,O.type=="add"?E.addMark(x,w,O.mark):E.removeMark(x,w,O.mark);else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let I=g.parent.textBetween(g.parentOffset,v.parentOffset);if(t.someProp("handleTextInput",z=>z(t,x,w,I)))return;E=t.state.tr.insertText(I,x,w)}}if(E||(E=t.state.tr.replace(x,w,u.doc.slice(p.start-u.from,p.endB-u.from))),u.sel){let I=kh(t,E.doc,u.sel);I&&!(Oe&&t.composing&&I.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(I.head==x||I.head==E.mapping.map(w)-1)||We&&I.empty&&I.head==x)&&E.setSelection(I)}T&&E.ensureMarks(T),o&&E.setMeta("composition",o),t.dispatch(E.scrollIntoView())}function kh(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Wc(t,e.resolve(n.anchor),e.resolve(n.head))}function Cw(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,l,a;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)o=n[c].removeFromSet(o);if(i.length==1&&o.length==0)l=i[0],s="add",a=c=>c.mark(l.addToSet(c.marks));else if(i.length==0&&o.length==1)l=o[0],s="remove",a=c=>c.mark(l.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(a(e.child(c)));if(C.from(u).eq(t))return{mark:l,type:s}}function Ew(t,e,n,r,i){if(n-e<=i.pos-r.pos||pa(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let l=o.nodeAfter;return l!=null&&n==e+l.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(pa(o,!0,!0));return!s.parent.isTextblock||s.pos>n||pa(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function pa(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function Mw(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,o-Math.min(s,l));r-=s+a-o}if(s<o&&t.size<e.size){let a=r<=o&&r>=s?o-r:0;o-=a,o&&o<e.size&&xh(e.textBetween(o-1,o+1))&&(o+=a?1:-1),l=o+(l-s),s=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,o&&o<t.size&&xh(t.textBetween(o-1,o+1))&&(o+=a?1:-1),s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}function xh(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Nw{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new WS,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Mh),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Ch(this),wh(this),this.nodeViews=Eh(this),this.docView=th(this.state.doc,Sh(this),ha(this),this.dom,this),this.domObserver=new mw(this,(r,i,o,s)=>ww(this,r,i,o,s)),this.domObserver.start(),KS(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Lu(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Mh),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(My(this),s=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Eh(this);Ow(h,this.nodeViews)&&(this.nodeViews=h,o=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Lu(this),this.editable=Ch(this),wh(this);let a=ha(this),u=Sh(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(e.doc,u,a);(d||!e.selection.eq(i.selection))&&(s=!0);let f=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&sS(this);if(s){this.domObserver.stop();let h=d&&(We||Oe)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Tw(i.selection,e.selection);if(d){let p=Oe?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=ow(this)),(o||!this.docView.update(e.doc,u,a,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=th(e.doc,u,a,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&DS(this))?_t(this,h):(hy(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():f&&lS(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof R){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Qf(this,n.getBoundingClientRect(),e)}else Qf(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new Ty(e.slice,e.move,i<0?void 0:R.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(i=n?n(l):l))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(We){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&aS(this.dom),_t(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return hS(this,e)}coordsAtPos(e,n=1){return oy(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return vS(this,n||this.state,e)}pasteHTML(e,n){return ro(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return ro(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Kc(this,e)}destroy(){this.docView&&(JS(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ha(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Qx())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return QS(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Re&&this.root.nodeType===11&&eS(this.dom.ownerDocument)==this.dom&&yw(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Sh(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[st.node(0,t.state.doc.content.size,e)]}function wh(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:st.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Ch(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Tw(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Eh(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Ow(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Mh(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var wn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Us={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},bw=typeof navigator<"u"&&/Mac/.test(navigator.platform),Dw=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ve=0;ve<10;ve++)wn[48+ve]=wn[96+ve]=String(ve);for(var ve=1;ve<=24;ve++)wn[ve+111]="F"+ve;for(var ve=65;ve<=90;ve++)wn[ve]=String.fromCharCode(ve+32),Us[ve]=String.fromCharCode(ve);for(var ma in wn)Us.hasOwnProperty(ma)||(Us[ma]=wn[ma]);function Pw(t){var e=bw&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Dw&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Us:wn)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Aw=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Iw(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Aw?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function Rw(t){let e=Object.create(null);for(let n in t)e[Iw(n)]=t[n];return e}function ga(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function zw(t){return new Je({props:{handleKeyDown:Ay(t)}})}function Ay(t){let e=Rw(t);return function(n,r){let i=Pw(r),o,s=e[ga(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[ga(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=wn[r.keyCode])&&o!=i){let l=e[ga(o,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const Lw=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Iy(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Bw=(t,e,n)=>{let r=Iy(t,n);if(!r)return!1;let i=Xc(r);if(!i){let s=r.blockRange(),l=s&&ei(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(By(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Jr(o,"end")||R.isSelectable(o)))for(let s=r.depth;;s--){let l=ml(t.doc,r.before(s),r.after(s),b.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(Jr(o,"end")?F.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):R.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},Fw=(t,e,n)=>{let r=Iy(t,n);if(!r)return!1;let i=Xc(r);return i?Ry(t,i,e):!1},_w=(t,e,n)=>{let r=zy(t,n);if(!r)return!1;let i=Zc(r);return i?Ry(t,i,e):!1};function Ry(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let c=l.firstChild;if(!c)return!1;l=c}let u=ml(t.doc,o,a,b.empty);if(!u||u.from!=o||u instanceof ce&&u.slice.size>=a-o)return!1;if(n){let c=t.tr.step(u);c.setSelection(L.create(c.doc,o)),n(c.scrollIntoView())}return!0}function Jr(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const jw=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Xc(r)}let s=o&&o.nodeBefore;return!s||!R.isSelectable(s)?!1:(e&&e(t.tr.setSelection(R.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Xc(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function zy(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const $w=(t,e,n)=>{let r=zy(t,n);if(!r)return!1;let i=Zc(r);if(!i)return!1;let o=i.nodeAfter;if(By(t,i,e,1))return!0;if(r.parent.content.size==0&&(Jr(o,"start")||R.isSelectable(o))){let s=ml(t.doc,r.before(),r.after(),b.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(Jr(o,"start")?F.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):R.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},Vw=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Zc(r)}let s=o&&o.nodeAfter;return!s||!R.isSelectable(s)?!1:(e&&e(t.tr.setSelection(R.create(t.doc,o.pos)).scrollIntoView()),!0)};function Zc(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Hw=(t,e)=>{let n=t.selection,r=n instanceof R,i;if(r){if(n.node.isTextblock||!Nn(t.doc,n.from))return!1;i=n.from}else if(i=pl(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(R.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Uw=(t,e)=>{let n=t.selection,r;if(n instanceof R){if(n.node.isTextblock||!Nn(t.doc,n.to))return!1;r=n.to}else if(r=pl(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Ww=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&ei(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},Kw=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Ly(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Jw=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Ly(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,s.createAndFill());a.setSelection(F.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},qw=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof at||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Ly(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(s,o.createAndFill());l.setSelection(L.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},Qw=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Rr(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&ei(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},Gw=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(R.create(t.doc,i))),!0)};function Yw(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Nn(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function By(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,l,a=i.type.spec.isolating||o.type.spec.isolating;if(!a&&Yw(t,e,n))return!0;let u=!a&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(s=(l=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&l.matchType(s[0]||o.type).validEnd){if(n){let h=e.pos+o.nodeSize,p=C.empty;for(let m=s.length-1;m>=0;m--)p=C.from(s[m].create(null,p));p=C.from(i.copy(p));let g=t.tr.step(new fe(e.pos-1,h,e.pos,h,new b(p,1,0),s.length,!0)),v=g.doc.resolve(h+2*s.length);v.nodeAfter&&v.nodeAfter.type==i.type&&Nn(g.doc,v.pos)&&g.join(v.pos),n(g.scrollIntoView())}return!0}let c=o.type.spec.isolating||r>0&&a?null:F.findFrom(e,1),d=c&&c.$from.blockRange(c.$to),f=d&&ei(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(u&&Jr(o,"start",!0)&&Jr(i,"end")){let h=i,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let g=o,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(h.canReplace(h.childCount,h.childCount,g.content)){if(n){let m=C.empty;for(let k=p.length-1;k>=0;k--)m=C.from(p[k].copy(m));let y=t.tr.step(new fe(e.pos-p.length,e.pos+o.nodeSize,e.pos+v,e.pos+o.nodeSize-v,new b(m,p.length,0),0,!0));n(y.scrollIntoView())}return!0}}return!1}function Fy(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(L.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const Xw=Fy(-1),Zw=Fy(1);function eC(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&$c(s,t,e);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function Nh(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[o];n.doc.nodesBetween(s,l,(a,u)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let c=n.doc.resolve(u),d=c.index();i=c.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[s];o.setBlockType(l,a,t,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function tC(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let l=r?n.tr:null;return nC(l,s,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function nC(t,e,n,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=s.resolve(e.start-2);o=new Bs(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new Bs(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=$c(o,n,r,e);return l?(t&&rC(t,e,l,i,n),!0):!1}function rC(t,e,n,r,i){let o=C.empty;for(let c=n.length-1;c>=0;c--)o=C.from(n[c].type.create(n[c].attrs,o));t.step(new fe(e.start-(r?2:0),e.end,e.start,e.end,new b(o,0,0),n.length,!0));let s=0;for(let c=0;c<n.length;c++)n[c].type==i&&(s=c+1);let l=n.length-s,a=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,d=e.endIndex,f=!0;c<d;c++,f=!1)!f&&Rr(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=u.child(c).nodeSize;return t}function iC(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?oC(e,n,t,o):sC(e,n,o):!0:!1}}function oC(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new fe(o-1,s,o,s,new b(C.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Bs(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const l=ei(r);if(l==null)return!1;i.lift(r,l);let a=i.mapping.map(o,-1)-1;return Nn(i.doc,a)&&i.join(a),e(i.scrollIntoView()),!0}function sC(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,g=n.startIndex;p>g;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(l?0:1),c+1,s.content.append(a?C.empty:C.from(i))))return!1;let d=o.pos,f=d+s.nodeSize;return r.step(new fe(d-(l?1:0),f+(a?1:0),d+1,f-1,new b((l?C.empty:C.from(i.copy(C.empty))).append(a?C.empty:C.from(i.copy(C.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function lC(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=t)return!1;if(n){let u=a.lastChild&&a.lastChild.type==l.type,c=C.from(u?t.create():null),d=new b(C.from(t.create(null,C.from(l.type.create(null,c)))),u?3:1,0),f=o.start,h=o.end;n(e.tr.step(new fe(f-(u?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function xl(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class Sl{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...c)=>{const d=a(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l=[],a=!!e,u=e||o.tr,c=()=>(!a&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),l.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...g)=>{const v=this.buildProps(u,n),m=h(...g)(v);return l.push(m),d}])),run:c};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([a,u])=>[a,(...c)=>u(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l={tr:e,editor:i,view:s,state:xl({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,u])=>[a,(...c)=>u(...c)(l)]))}};return l}}class aC{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function A(t,e,n){return t.config[e]===void 0&&t.parent?A(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?A(t.parent,e,n):null}):t.config[e]}function wl(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function _y(t){const e=[],{nodeExtensions:n,markExtensions:r}=wl(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage,extensions:i},a=A(s,"addGlobalAttributes",l);if(!a)return;a().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...o,...h}})})})})}),i.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=A(s,"addAttributes",l);if(!a)return;const u=a();Object.entries(u).forEach(([c,d])=>{const f={...o,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:s.name,name:c,attribute:f})})}),e}function pe(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function De(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const l=o?String(o).split(" "):[],a=r[i]?r[i].split(" "):[],u=l.filter(c=>!a.includes(c));r[i]=[...a,...u].join(" ")}else if(i==="style"){const l=o?o.split(";").map(c=>c.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],u=new Map;a.forEach(c=>{const[d,f]=c.split(":").map(h=>h.trim());u.set(d,f)}),l.forEach(c=>{const[d,f]=c.split(":").map(h=>h.trim());u.set(d,f)}),r[i]=Array.from(u.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[i]=o}),r},{})}function Bu(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>De(n,r),{})}function jy(t){return typeof t=="function"}function _(t,e=void 0,...n){return jy(t)?e?t.bind(e)(...n):t(...n):t}function uC(t={}){return Object.keys(t).length===0&&t.constructor===Object}function cC(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Th(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(n):cC(n.getAttribute(s.name));return l==null?o:{...o,[s.name]:l}},{});return{...r,...i}}}}function Oh(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&uC(n)?!1:n!=null))}function dC(t,e){var n;const r=_y(t),{nodeExtensions:i,markExtensions:o}=wl(t),s=(n=i.find(u=>A(u,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(u=>{const c=r.filter(m=>m.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((m,y)=>{const k=A(y,"extendNodeSchema",d);return{...m,...k?k(u):{}}},{}),h=Oh({...f,content:_(A(u,"content",d)),marks:_(A(u,"marks",d)),group:_(A(u,"group",d)),inline:_(A(u,"inline",d)),atom:_(A(u,"atom",d)),selectable:_(A(u,"selectable",d)),draggable:_(A(u,"draggable",d)),code:_(A(u,"code",d)),whitespace:_(A(u,"whitespace",d)),linebreakReplacement:_(A(u,"linebreakReplacement",d)),defining:_(A(u,"defining",d)),isolating:_(A(u,"isolating",d)),attrs:Object.fromEntries(c.map(m=>{var y;return[m.name,{default:(y=m==null?void 0:m.attribute)===null||y===void 0?void 0:y.default}]}))}),p=_(A(u,"parseHTML",d));p&&(h.parseDOM=p.map(m=>Th(m,c)));const g=A(u,"renderHTML",d);g&&(h.toDOM=m=>g({node:m,HTMLAttributes:Bu(m,c)}));const v=A(u,"renderText",d);return v&&(h.toText=v),[u.name,h]})),a=Object.fromEntries(o.map(u=>{const c=r.filter(v=>v.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((v,m)=>{const y=A(m,"extendMarkSchema",d);return{...v,...y?y(u):{}}},{}),h=Oh({...f,inclusive:_(A(u,"inclusive",d)),excludes:_(A(u,"excludes",d)),group:_(A(u,"group",d)),spanning:_(A(u,"spanning",d)),code:_(A(u,"code",d)),attrs:Object.fromEntries(c.map(v=>{var m;return[v.name,{default:(m=v==null?void 0:v.attribute)===null||m===void 0?void 0:m.default}]}))}),p=_(A(u,"parseHTML",d));p&&(h.parseDOM=p.map(v=>Th(v,c)));const g=A(u,"renderHTML",d);return g&&(h.toDOM=v=>g({mark:v,HTMLAttributes:Bu(v,c)})),[u.name,h]}));return new zg({topNode:s,nodes:l,marks:a})}function ya(t,e){return e.nodes[t]||e.marks[t]||null}function bh(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function ed(t,e){const n=lr.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const fC=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,l)=>{var a,u;const c=((u=(a=i.type.spec).toText)===null||u===void 0?void 0:u.call(a,{node:i,pos:o,parent:s,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-o))}),n};function td(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Cl{constructor(e){this.find=e.find,this.handler=e.handler}}const hC=(t,e)=>{if(td(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Fo(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const u=a.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let c=!1;const d=fC(u)+o;return s.forEach(f=>{if(c)return;const h=hC(d,f.find);if(!h)return;const p=a.state.tr,g=xl({state:a.state,transaction:p}),v={from:r-(h[0].length-o.length),to:i},{commands:m,chain:y,can:k}=new Sl({editor:n,state:g});f.handler({state:g,range:v,match:h,commands:m,chain:y,can:k})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:r,to:i,text:o}),a.dispatch(p),c=!0)}),c}function pC(t){const{editor:e,rules:n}=t,r=new Je({state:{init(){return null},apply(i,o,s){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:c}=a;typeof c=="string"?c=c:c=ed(C.from(c),s.schema);const{from:d}=a,f=d+c.length;Fo({editor:e,from:d,to:f,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,l){return Fo({editor:e,from:o,to:s,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Fo({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?Fo({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function mC(t){return Object.prototype.toString.call(t).slice(8,-1)}function _o(t){return mC(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function El(t,e){const n={...t};return _o(t)&&_o(e)&&Object.keys(e).forEach(r=>{_o(e[r])&&_o(t[r])?n[r]=El(t[r],e[r]):n[r]=e[r]}),n}class Ut{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=_(A(this,"addOptions",{name:this.name}))),this.storage=_(A(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ut(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>El(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ut(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=_(A(n,"addOptions",{name:n.name})),n.storage=_(A(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const a=s.find(u=>(u==null?void 0:u.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function gC(t){return typeof t=="number"}class yC{constructor(e){this.find=e.find,this.handler=e.handler}}const vC=(t,e,n)=>{if(td(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function kC(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:l}=t,{commands:a,chain:u,can:c}=new Sl({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const g=Math.max(r,p),v=Math.min(i,p+h.content.size),m=h.textBetween(g-p,v-p,void 0,"");vC(m,o.find,s).forEach(k=>{if(k.index===void 0)return;const x=g+k.index+1,w=x+k[0].length,E={from:n.tr.mapping.map(x),to:n.tr.mapping.map(w)},T=o.handler({state:n,range:E,match:k,commands:a,chain:u,can:c,pasteEvent:s,dropEvent:l});d.push(T)})}),d.every(h=>h!==null)}let jo=null;const xC=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function SC(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:c,from:d,to:f,rule:h,pasteEvt:p})=>{const g=c.tr,v=xl({state:c,transaction:g});if(!(!kC({editor:e,state:v,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:p,dropEvent:l})||!g.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(c=>new Je({view(d){const f=p=>{var g;r=!((g=d.dom.parentElement)===null||g===void 0)&&g.contains(p.target)?d.dom.parentElement:null,r&&(jo=e)},h=()=>{jo&&(jo=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(o=r===d.dom.parentElement,l=f,!o){const h=jo;h&&setTimeout(()=>{const p=h.state.selection;p&&h.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(d,f)=>{var h;const p=(h=f.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return s=f,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const p=d[0],g=p.getMeta("uiEvent")==="paste"&&!i,v=p.getMeta("uiEvent")==="drop"&&!o,m=p.getMeta("applyPasteRules"),y=!!m;if(!g&&!v&&!y)return;if(y){let{text:w}=m;typeof w=="string"?w=w:w=ed(C.from(w),h.schema);const{from:E}=m,T=E+w.length,O=xC(w);return a({rule:c,state:h,from:E,to:{b:T},pasteEvt:O})}const k=f.doc.content.findDiffStart(h.doc.content),x=f.doc.content.findDiffEnd(h.doc.content);if(!(!gC(k)||!x||k===x.b))return a({rule:c,state:h,from:k,to:x,pasteEvt:s})}}))}function wC(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Nr{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Nr.resolve(e),this.schema=dC(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Nr.sort(Nr.flatten(e)),r=wC(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=A(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=A(r,"priority")||100,s=A(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:ya(n.name,this.schema)},i=A(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Nr.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:ya(s.name,this.schema)},a=[],u=A(s,"addKeyboardShortcuts",l);let c={};if(s.type==="mark"&&A(s,"exitable",l)&&(c.ArrowRight=()=>Ut.handleExit({editor:e,mark:s})),u){const g=Object.fromEntries(Object.entries(u()).map(([v,m])=>[v,()=>m({editor:e})]));c={...c,...g}}const d=zw(c);a.push(d);const f=A(s,"addInputRules",l);bh(s,e.options.enableInputRules)&&f&&r.push(...f());const h=A(s,"addPasteRules",l);bh(s,e.options.enablePasteRules)&&h&&i.push(...h());const p=A(s,"addProseMirrorPlugins",l);if(p){const g=p();a.push(...g)}return a}).flat();return[pC({editor:e,rules:r}),...SC({editor:e,rules:i}),...o]}get attributes(){return _y(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=wl(this.extensions);return Object.fromEntries(n.filter(r=>!!A(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:pe(r.name,this.schema)},s=A(r,"addNodeView",o);if(!s)return[];const l=(a,u,c,d,f)=>{const h=Bu(a,i);return s()({node:a,view:u,getPos:c,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:h})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ya(e.name,this.schema)};e.type==="mark"&&(!((n=_(A(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=A(e,"onBeforeCreate",r),o=A(e,"onCreate",r),s=A(e,"onUpdate",r),l=A(e,"onSelectionUpdate",r),a=A(e,"onTransaction",r),u=A(e,"onFocus",r),c=A(e,"onBlur",r),d=A(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}}class Be{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=_(A(this,"addOptions",{name:this.name}))),this.storage=_(A(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Be(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>El(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Be({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=_(A(n,"addOptions",{name:n.name})),n.storage=_(A(n,"addStorage",{name:n.name,options:n.options})),n}}function $y(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let l="";return t.nodesBetween(r,i,(a,u,c,d)=>{var f;a.isBlock&&u>r&&(l+=o);const h=s==null?void 0:s[a.type.name];if(h)return c&&(l+=h({node:a,pos:u,parent:c,index:d,range:e})),!1;a.isText&&(l+=(f=a==null?void 0:a.text)===null||f===void 0?void 0:f.slice(Math.max(r,u)-u,i-u))}),l}function Vy(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const CC=Be.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Je({key:new Dt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(c=>c.$from.pos)),l=Math.max(...o.map(c=>c.$to.pos)),a=Vy(n);return $y(r,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),EC=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),MC=(t=!1)=>({commands:e})=>e.setContent("",t),NC=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:u,mapping:c}=e,d=u.resolve(c.map(a)),f=u.resolve(c.map(a+l.nodeSize)),h=d.blockRange(f);if(!h)return;const p=ei(h);if(l.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,g)}(p||p===0)&&e.lift(h,p)})}),!0},TC=t=>e=>t(e),OC=()=>({state:t,dispatch:e})=>qw(t,e),bC=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new L(r.doc.resolve(s-1))),!0},DC=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const l=i.before(o),a=i.after(o);t.delete(l,a).scrollIntoView()}return!0}return!1},PC=t=>({tr:e,state:n,dispatch:r})=>{const i=pe(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const a=o.before(s),u=o.after(s);e.delete(a,u).scrollIntoView()}return!0}return!1},AC=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},IC=()=>({state:t,dispatch:e})=>Lw(t,e),RC=()=>({commands:t})=>t.keyboardShortcut("Enter"),zC=()=>({state:t,dispatch:e})=>Jw(t,e);function Ws(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:td(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Hy(t,e,n={}){return t.find(r=>r.type===e&&Ws(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function Dh(t,e,n={}){return!!Hy(t,e,n)}function nd(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!Hy([...i.node.marks],e,n)))return;let s=i.index,l=t.start()+i.offset,a=s+1,u=l+i.node.nodeSize;for(;s>0&&Dh([...t.parent.child(s-1).marks],e,n);)s-=1,l-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&Dh([...t.parent.child(a).marks],e,n);)u+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:u}}function On(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const LC=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=On(t,r.schema),{doc:s,selection:l}=n,{$from:a,from:u,to:c}=l;if(i){const d=nd(a,o,e);if(d&&d.from<=u&&d.to>=c){const f=L.create(s,d.from,d.to);n.setSelection(f)}}return!0},BC=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function Uy(t){return t instanceof L}function $n(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Wy(t,e=null){if(!e)return null;const n=F.atStart(t),r=F.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?L.create(t,$n(0,i,o),$n(t.content.size,i,o)):L.create(t,$n(e,i,o),$n(e,i,o))}function FC(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function rd(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const _C=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(rd()||FC())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!Uy(n.state.selection))return s(),!0;const l=Wy(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return o&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},jC=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),$C=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Ky=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Ky(r)}return t};function $o(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Ky(n)}function Ks(t,e,n){if(t instanceof gn||t instanceof C)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return C.fromArray(t.map(l=>e.nodeFromJSON(l)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Ks("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,l="";const a=new zg({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(s=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?Oi.fromSchema(a).parseSlice($o(t),n.parseOptions):Oi.fromSchema(a).parse($o(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const o=Oi.fromSchema(e);return n.slice?o.parseSlice($o(t),n.parseOptions).content:o.parse($o(t),n.parseOptions)}return Ks("",e,n)}function VC(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof ce||i instanceof fe))return;const o=t.mapping.maps[r];let s=0;o.forEach((l,a,u,c)=>{s===0&&(s=c)}),t.setSelection(F.near(t.doc.resolve(s),n))}const HC=t=>!("type"in t),UC=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;try{l=Ks(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(p){return o.emit("contentError",{editor:o,error:p,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}}),!1}let{from:a,to:u}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,d=!0;if((HC(l)?l:[l]).forEach(p=>{p.check(),c=c?p.isText&&p.marks.length===0:!1,d=d?p.isBlock:!1}),a===u&&d){const{parent:p}=r.doc.resolve(a);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(a-=1,u+=1)}let h;if(c){if(Array.isArray(e))h=e.map(p=>p.text||"").join("");else if(e instanceof C){let p="";e.forEach(g=>{g.text&&(p+=g.text)}),h=p}else typeof e=="object"&&e&&e.text?h=e.text:h=e;r.insertText(h,a,u)}else h=l,r.replaceWith(a,u,h);n.updateSelection&&VC(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:h}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:h})}return!0},WC=()=>({state:t,dispatch:e})=>Hw(t,e),KC=()=>({state:t,dispatch:e})=>Uw(t,e),JC=()=>({state:t,dispatch:e})=>Bw(t,e),qC=()=>({state:t,dispatch:e})=>$w(t,e),QC=()=>({state:t,dispatch:e,tr:n})=>{try{const r=pl(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},GC=()=>({state:t,dispatch:e,tr:n})=>{try{const r=pl(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},YC=()=>({state:t,dispatch:e})=>Fw(t,e),XC=()=>({state:t,dispatch:e})=>_w(t,e);function Jy(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function ZC(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))rd()||Jy()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const eE=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=ZC(t).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,l))});return a==null||a.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function oo(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?pe(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);l.push({node:d,from:h,to:p})});const a=i-r,u=l.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>Ws(d.node.attrs,n,{strict:!1}));return o?!!u.length:u.reduce((d,f)=>d+f.to-f.from,0)>=a}const tE=(t,e={})=>({state:n,dispatch:r})=>{const i=pe(t,n.schema);return oo(n,i,e)?Ww(n,r):!1},nE=()=>({state:t,dispatch:e})=>Qw(t,e),rE=t=>({state:e,dispatch:n})=>{const r=pe(t,e.schema);return iC(r)(e,n)},iE=()=>({state:t,dispatch:e})=>Kw(t,e);function Ml(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Ph(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const oE=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Ml(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=pe(t,r.schema)),l==="mark"&&(s=On(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(u,c)=>{o&&o===u.type&&n.setNodeMarkup(c,void 0,Ph(u.attrs,e)),s&&u.marks.length&&u.marks.forEach(d=>{s===d.type&&n.addMark(c,c+u.nodeSize,s.create(Ph(d.attrs,e)))})})}),!0):!1},sE=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),lE=()=>({tr:t,dispatch:e})=>{if(e){const n=new at(t.doc);t.setSelection(n)}return!0},aE=()=>({state:t,dispatch:e})=>jw(t,e),uE=()=>({state:t,dispatch:e})=>Vw(t,e),cE=()=>({state:t,dispatch:e})=>Gw(t,e),dE=()=>({state:t,dispatch:e})=>Zw(t,e),fE=()=>({state:t,dispatch:e})=>Xw(t,e);function Fu(t,e,n={},r={}){return Ks(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const hE=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:l})=>{var a,u;const{doc:c}=o;if(n.preserveWhitespace!=="full"){const d=Fu(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return s&&o.replaceWith(0,c.content.size,d).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:c.content.size},t,{parseOptions:n,errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:i.options.enableContentCheck})};function qy(t,e){const n=On(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function pE(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function mE(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function id(t){return e=>mE(e.$from,t)}function gE(t,e){const n={from:0,to:t.content.size};return $y(t,n,e)}function yE(t,e){const n=pe(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,l=>{o.push(l)});const s=o.reverse().find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function vE(t,e){const n=Ml(typeof e=="string"?e:e.name,t.schema);return n==="node"?yE(t,e):n==="mark"?qy(t,e):{}}function Qy(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),s=nd(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function is(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function _u(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?On(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>Ws(d.attrs,n,{strict:!1}));let s=0;const l=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;t.doc.nodesBetween(h,p,(g,v)=>{if(!g.isText&&!g.marks.length)return;const m=Math.max(h,v),y=Math.min(p,v+g.nodeSize),k=y-m;s+=k,l.push(...g.marks.map(x=>({mark:x,from:m,to:y})))})}),s===0)return!1;const a=l.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>Ws(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),u=l.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,f)=>d+f.to-f.from,0);return(a>0?a+u:a)>=s}function kE(t,e,n={}){if(!e)return oo(t,null,n)||_u(t,null,n);const r=Ml(e,t.schema);return r==="node"?oo(t,e,n):r==="mark"?_u(t,e,n):!1}function Ah(t,e){const{nodeExtensions:n}=wl(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=_(A(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function od(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(od(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function xE(t){return t instanceof R}function SE(t,e,n){var r;const{selection:i}=e;let o=null;if(Uy(i)&&(o=i.$cursor),o){const l=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:l,$to:a})=>{let u=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(c,d,f)=>{if(u)return!1;if(c.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(c.marks)||!c.marks.some(g=>g.type.excludes(n));u=h&&p}return!u}),u})}const wE=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:l}=o,a=On(t,r.schema);if(i)if(s){const u=qy(r,a);n.addStoredMark(a.create({...u,...e}))}else l.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;r.doc.nodesBetween(c,d,(f,h)=>{const p=Math.max(h,c),g=Math.min(h+f.nodeSize,d);f.marks.find(m=>m.type===a)?f.marks.forEach(m=>{a===m.type&&n.addMark(p,g,a.create({...m.attrs,...e}))}):n.addMark(p,g,a.create(e))})});return SE(r,n,a)},CE=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),EE=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=pe(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:l})=>Nh(o,{...s,...e})(n)?!0:l.clearNodes()).command(({state:l})=>Nh(o,{...s,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},ME=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=$n(t,0,r.content.size),o=R.create(r,i);e.setSelection(o)}return!0},NE=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=L.atStart(r).from,l=L.atEnd(r).to,a=$n(i,s,l),u=$n(o,s,l),c=L.create(r,a,u);e.setSelection(c)}return!0},TE=t=>({state:e,dispatch:n})=>{const r=pe(t,e.schema);return lC(r)(e,n)};function Ih(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const OE=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:l,$to:a}=o,u=i.extensionManager.attributes,c=is(u,l.node().type.name,l.node().attrs);if(o instanceof R&&o.node.isBlock)return!l.parentOffset||!Rr(s,l.pos)?!1:(r&&(t&&Ih(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,f=l.depth===0?void 0:pE(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=d&&f?[{type:f,attrs:c}]:void 0,p=Rr(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!p&&Rr(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:c}]:void 0),r){if(p&&(o instanceof L&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,h),f&&!d&&!l.parentOffset&&l.parent.type!==f)){const g=e.mapping.map(l.before()),v=e.doc.resolve(g);l.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}t&&Ih(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},bE=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const l=pe(t,r.schema),{$from:a,$to:u}=r.selection,c=r.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(u))return!1;const d=a.node(-1);if(d.type!==l)return!1;const f=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let m=C.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let O=a.depth-y;O>=a.depth-3;O-=1)m=C.from(a.node(O).copy(m));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,x={...is(f,a.node().type.name,a.node().attrs),...e},w=((s=l.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(x))||void 0;m=m.append(C.from(l.createAndFill(null,w)||void 0));const E=a.before(a.depth-(y-1));n.replace(E,a.after(-k),new b(m,4-y,0));let T=-1;n.doc.nodesBetween(E,n.doc.content.size,(O,I)=>{if(T>-1)return!1;O.isTextblock&&O.content.size===0&&(T=I+1)}),T>-1&&n.setSelection(L.near(n.doc.resolve(T))),n.scrollIntoView()}return!0}const h=u.pos===a.end()?d.contentMatchAt(0).defaultType:null,p={...is(f,d.type.name,d.attrs),...e},g={...is(f,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,u.pos);const v=h?[{type:l,attrs:p},{type:h,attrs:g}]:[{type:l,attrs:p}];if(!Rr(n.doc,a.pos,2))return!1;if(i){const{selection:m,storedMarks:y}=r,{splittableMarks:k}=o.extensionManager,x=y||m.$to.parentOffset&&m.$from.marks();if(n.split(a.pos,2,v).scrollIntoView(),!x||!i)return!0;const w=x.filter(E=>k.includes(E.type.name));n.ensureMarks(w)}return!0},va=(t,e)=>{const n=id(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Nn(t.doc,n.pos)&&t.join(n.pos),!0},ka=(t,e)=>{const n=id(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Nn(t.doc,r)&&t.join(r),!0},DE=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:l,chain:a,commands:u,can:c})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=pe(t,s.schema),p=pe(e,s.schema),{selection:g,storedMarks:v}=s,{$from:m,$to:y}=g,k=m.blockRange(y),x=v||g.$to.parentOffset&&g.$from.marks();if(!k)return!1;const w=id(E=>Ah(E.type.name,d))(g);if(k.depth>=1&&w&&k.depth-w.depth<=1){if(w.node.type===h)return u.liftListItem(p);if(Ah(w.node.type.name,d)&&h.validContent(w.node.content)&&l)return a().command(()=>(o.setNodeMarkup(w.pos,h),!0)).command(()=>va(o,h)).command(()=>ka(o,h)).run()}return!n||!x||!l?a().command(()=>c().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>va(o,h)).command(()=>ka(o,h)).run():a().command(()=>{const E=c().wrapInList(h,r),T=x.filter(O=>f.includes(O.type.name));return o.ensureMarks(T),E?!0:u.clearNodes()}).wrapInList(h,r).command(()=>va(o,h)).command(()=>ka(o,h)).run()},PE=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=On(t,r.schema);return _u(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},AE=(t,e,n={})=>({state:r,commands:i})=>{const o=pe(t,r.schema),s=pe(e,r.schema),l=oo(r,o,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(s,a):i.setNode(o,{...a,...n})},IE=(t,e={})=>({state:n,commands:r})=>{const i=pe(t,n.schema);return oo(n,i,e)?r.lift(i):r.wrapIn(i,e)},RE=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,a))}else s.delete(o.from,o.to)}return!0}}return!1},zE=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},LE=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=n,a=On(t,r.schema),{$from:u,empty:c,ranges:d}=l;if(!i)return!0;if(c&&s){let{from:f,to:h}=l;const p=(o=u.marks().find(v=>v.type===a))===null||o===void 0?void 0:o.attrs,g=nd(u,a,p);g&&(f=g.from,h=g.to),n.removeMark(f,h,a)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,a)});return n.removeStoredMark(a),!0},BE=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Ml(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=pe(t,r.schema)),l==="mark"&&(s=On(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const u=a.$from.pos,c=a.$to.pos;let d,f,h,p;n.selection.empty?r.doc.nodesBetween(u,c,(g,v)=>{o&&o===g.type&&(h=Math.max(v,u),p=Math.min(v+g.nodeSize,c),d=v,f=g)}):r.doc.nodesBetween(u,c,(g,v)=>{v<u&&o&&o===g.type&&(h=Math.max(v,u),p=Math.min(v+g.nodeSize,c),d=v,f=g),v>=u&&v<=c&&(o&&o===g.type&&n.setNodeMarkup(v,void 0,{...g.attrs,...e}),s&&g.marks.length&&g.marks.forEach(m=>{if(s===m.type){const y=Math.max(v,u),k=Math.min(v+g.nodeSize,c);n.addMark(y,k,s.create({...m.attrs,...e}))}}))}),f&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),s&&f.marks.length&&f.marks.forEach(g=>{s===g.type&&n.addMark(h,p,s.create({...g.attrs,...e}))}))}),!0):!1},FE=(t,e={})=>({state:n,dispatch:r})=>{const i=pe(t,n.schema);return eC(i,e)(n,r)},_E=(t,e={})=>({state:n,dispatch:r})=>{const i=pe(t,n.schema);return tC(i,e)(n,r)};var jE=Object.freeze({__proto__:null,blur:EC,clearContent:MC,clearNodes:NC,command:TC,createParagraphNear:OC,cut:bC,deleteCurrentNode:DC,deleteNode:PC,deleteRange:AC,deleteSelection:IC,enter:RC,exitCode:zC,extendMarkRange:LC,first:BC,focus:_C,forEach:jC,insertContent:$C,insertContentAt:UC,joinBackward:JC,joinDown:KC,joinForward:qC,joinItemBackward:QC,joinItemForward:GC,joinTextblockBackward:YC,joinTextblockForward:XC,joinUp:WC,keyboardShortcut:eE,lift:tE,liftEmptyBlock:nE,liftListItem:rE,newlineInCode:iE,resetAttributes:oE,scrollIntoView:sE,selectAll:lE,selectNodeBackward:aE,selectNodeForward:uE,selectParentNode:cE,selectTextblockEnd:dE,selectTextblockStart:fE,setContent:hE,setMark:wE,setMeta:CE,setNode:EE,setNodeSelection:ME,setTextSelection:NE,sinkListItem:TE,splitBlock:OE,splitListItem:bE,toggleList:DE,toggleMark:PE,toggleNode:AE,toggleWrap:IE,undoInputRule:RE,unsetAllMarks:zE,unsetMark:LE,updateAttributes:BE,wrapIn:FE,wrapInList:_E});const $E=Be.create({name:"commands",addCommands(){return{...jE}}}),VE=Be.create({name:"drop",addProseMirrorPlugins(){return[new Je({key:new Dt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),HE=Be.create({name:"editable",addProseMirrorPlugins(){return[new Je({key:new Dt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),UE=Be.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Je({key:new Dt("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),WE=Be.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:u}=l,{empty:c,$anchor:d}=a,{pos:f,parent:h}=d,p=d.parent.isTextblock&&f>0?l.doc.resolve(f-1):d,g=p.parent.type.spec.isolating,v=d.pos-d.parentOffset,m=g&&p.parent.childCount===1?v===d.pos:F.atStart(u).from===f;return!c||!h.type.isTextblock||h.textContent.length||!m||m&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return rd()||Jy()?o:i},addProseMirrorPlugins(){return[new Je({key:new Dt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:l}=e.selection,a=F.atStart(e.doc).from,u=F.atEnd(e.doc).to;if(o||!(s===a&&l===u)||!od(n.doc))return;const f=n.tr,h=xl({state:n,transaction:f}),{commands:p}=new Sl({editor:this.editor,state:h});if(p.clearNodes(),!!f.steps.length)return f}})]}}),KE=Be.create({name:"paste",addProseMirrorPlugins(){return[new Je({key:new Dt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),JE=Be.create({name:"tabindex",addProseMirrorPlugins(){return[new Je({key:new Dt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class zn{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new zn(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new zn(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new zn(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1),l=this.resolvedPos.doc.resolve(s);if(!i&&l.depth<=this.depth)return;const a=new zn(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new zn(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let l=0;l<s.length;l+=1){const a=s[l];if(o[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(a=>n[a]===s.node.attrs[a])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const qE=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function QE(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class GE extends aC{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=QE(qE,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=jy(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;r=n.filter(l=>!l.key.startsWith(s))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[HE,CC.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),$E,UE,WE,JE,VE,KE].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Nr(i,this)}createCommandManager(){this.commandManager=new Sl({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Fu(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=Fu(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Wy(n,this.options.autofocus);this.view=new Nw(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Mr.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return vE(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return kE(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return ed(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return gE(this.state.doc,{blockSeparator:n,textSerializers:{...Vy(this.schema),...r}})}get isEmpty(){return od(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new zn(n,this)}get $doc(){return this.$pos(0)}}function qr(t){return new Cl({find:t.find,handler:({state:e,range:n,match:r})=>{const i=_(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],l=r[0];if(s){const a=l.search(/\S/),u=n.from+l.indexOf(s),c=u+s.length;if(Qy(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===t.type&&g!==h.mark.type)).filter(h=>h.to>u).length)return null;c<n.to&&o.delete(c,n.to),u>n.from&&o.delete(n.from+a,u);const f=n.from+a+s.length;o.addMark(n.from+a,f,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function YE(t){return new Cl({find:t.find,handler:({state:e,range:n,match:r})=>{const i=_(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let c=s+u;c>l?c=l:l=c+r[1].length;const d=r[0][r[0].length-1];o.insertText(d,s+r[0].length-1),o.replaceWith(c,l,a)}else if(r[0]){const u=t.type.isInline?s:s-1;o.insert(u,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(l))}o.scrollIntoView()}})}function ju(t){return new Cl({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=_(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function so(t){return new Cl({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=_(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),u=a&&$c(a,t.type,o);if(!u)return null;if(s.wrap(a,u),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const g=p.filter(v=>h.includes(v.type.name));s.ensureMarks(g)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,o).run()}const c=s.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&Nn(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&s.join(n.from-1)}})}class Ke{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=_(A(this,"addOptions",{name:this.name}))),this.storage=_(A(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ke(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>El(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ke(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=_(A(n,"addOptions",{name:n.name})),n.storage=_(A(n,"addStorage",{name:n.name,options:n.options})),n}}function Qr(t){return new yC({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=_(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,l=r[r.length-1],a=r[0];let u=n.to;if(l){const c=a.search(/\S/),d=n.from+a.indexOf(l),f=d+l.length;if(Qy(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(v=>v===t.type&&v!==p.mark.type)).filter(p=>p.to>d).length)return null;f<n.to&&s.delete(f,n.to),d>n.from&&s.delete(n.from+c,d),u=n.from+c+l.length,s.addMark(n.from+c,u,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function XE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gy={exports:{}},xa={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rh;function ZE(){if(Rh)return xa;Rh=1;var t=Ne;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function l(d,f){var h=f(),p=r({inst:{value:h,getSnapshot:f}}),g=p[0].inst,v=p[1];return o(function(){g.value=h,g.getSnapshot=f,a(g)&&v({inst:g})},[d,h,f]),i(function(){return a(g)&&v({inst:g}),d(function(){a(g)&&v({inst:g})})},[d]),s(h),h}function a(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!n(d,h)}catch{return!0}}function u(d,f){return f()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return xa.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:c,xa}Gy.exports=ZE();var sd=Gy.exports;const eM=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},tM=({contentComponent:t})=>{const e=sd.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return Ne.createElement(Ne.Fragment,null,Object.values(e))};function nM(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Pv.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class rM extends Ne.Component{constructor(e){var n;super(e),this.editorContentRef=Ne.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=nM(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return Ne.createElement(Ne.Fragment,null,Ne.createElement("div",{ref:eM(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Ne.createElement(tM,{contentComponent:e.contentComponent}))}}const iM=M.forwardRef((t,e)=>{const n=Ne.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Ne.createElement(rM,{key:n,innerRef:e,...t})}),oM=Ne.memo(iM);var sM=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!(s==="_owner"&&e.$$typeof)&&!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n},lM=XE(sM),Yy={exports:{}},Sa={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh;function aM(){if(zh)return Sa;zh=1;var t=Ne,e=sd;function n(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,l=t.useMemo,a=t.useDebugValue;return Sa.useSyncExternalStoreWithSelector=function(u,c,d,f,h){var p=o(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=l(function(){function m(E){if(!y){if(y=!0,k=E,E=f(E),h!==void 0&&g.hasValue){var T=g.value;if(h(T,E))return x=T}return x=E}if(T=x,r(k,E))return T;var O=f(E);return h!==void 0&&h(T,O)?T:(k=E,x=O)}var y=!1,k,x,w=d===void 0?null:d;return[function(){return m(c())},w===null?void 0:function(){return m(w())}]},[c,d,f,h]);var v=i(u,p[0],p[1]);return s(function(){g.hasValue=!0,g.value=v},[v]),a(v),v},Sa}Yy.exports=aM();var uM=Yy.exports;const cM=typeof window<"u"?M.useLayoutEffect:M.useEffect;class dM{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function fM(t){var e;const[n]=M.useState(()=>new dM(t.editor)),r=uM.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:lM);return cM(()=>n.watch(t.editor),[t.editor,n]),M.useDebugValue(r),r}const hM=!1,$u=typeof window>"u",pM=$u||!!(typeof window<"u"&&window.next);class ld{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return $u||pM?null:this.createEditor();if(this.options.current.immediatelyRender&&$u&&hM)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)===null||o===void 0?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)===null||o===void 0?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)===null||o===void 0?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)===null||o===void 0?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)===null||o===void 0?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)===null||o===void 0?void 0:o.call(i,...r)}};return new GE(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,o)=>{var s;return i===((s=n.extensions)===null||s===void 0?void 0:s[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?ld.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function mM(t={},e=[]){const n=M.useRef(t);n.current=t;const[r]=M.useState(()=>new ld(n)),i=sd.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return M.useDebugValue(i),M.useEffect(r.onRender(e)),fM({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&o===0?0:o+1}),i}const gM=M.createContext({editor:null});gM.Consumer;const yM=M.createContext({onDragStart:void 0}),vM=()=>M.useContext(yM);Ne.forwardRef((t,e)=>{const{onDragStart:n}=vM(),r=t.as||"div";return Ne.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const kM=/^\s*>\s$/,xM=Ke.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[so({find:kM,type:this.type})]}}),SM=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,wM=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,CM=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,EM=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,MM=Ut.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[qr({find:SM,type:this.type}),qr({find:CM,type:this.type})]},addPasteRules(){return[Qr({find:wM,type:this.type}),Qr({find:EM,type:this.type})]}}),NM="listItem",Lh="textStyle",Bh=/^\s*([-+*])\s$/,TM=Ke.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",De(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(NM,this.editor.getAttributes(Lh)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=so({find:Bh,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=so({find:Bh,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Lh),editor:this.editor})),[t]}}),OM=/(^|[^`])`([^`]+)`(?!`)/,bM=/(^|[^`])`([^`]+)`(?!`)/g,DM=Ut.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[qr({find:OM,type:this.type})]},addPasteRules(){return[Qr({find:bM,type:this.type})]}}),PM=/^```([a-z]+)?[\s\n]$/,AM=/^~~~([a-z]+)?[\s\n]$/,IM=Ke.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",De(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:u})=>(u.setSelection(F.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[ju({find:PM,type:this.type,getAttributes:t=>({language:t[1]})}),ju({find:AM,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Je({key:new Dt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},a)),s.selection.$from.parent.type!==this.type&&s.setSelection(L.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),RM=Ke.create({name:"doc",topNode:!0,content:"block+"});function zM(t={}){return new Je({view(e){return new LM(e,t)}})}class LM{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let u=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(u){let c=u.getBoundingClientRect(),d=l?c.bottom:c.top;l&&a&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:c.left,right:c.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let l=i.getBoundingClientRect();o=l.left-i.scrollLeft,s=l.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=Kg(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const BM=Be.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[zM(this.options)]}});class Z extends F{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Z.valid(r)?new Z(r):F.near(r)}content(){return b.empty}eq(e){return e instanceof Z&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Z(e.resolve(n.pos))}getBookmark(){return new ad(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!FM(e)||!_M(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Z.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(n>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let a=e.doc.resolve(i);if(Z.valid(a))return a}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!R.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let l=e.doc.resolve(i);if(Z.valid(l))return l}return null}}}Z.prototype.visible=!1;Z.findFrom=Z.findGapCursorFrom;F.jsonID("gapcursor",Z);class ad{constructor(e){this.pos=e}map(e){return new ad(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Z.valid(n)?new Z(n):F.near(n)}}function FM(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function _M(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function jM(){return new Je({props:{decorations:UM,createSelectionBetween(t,e,n){return e.pos==n.pos&&Z.valid(n)?new Z(n):null},handleClick:VM,handleKeyDown:$M,handleDOMEvents:{beforeinput:HM}}})}const $M=Ay({ArrowLeft:Vo("horiz",-1),ArrowRight:Vo("horiz",1),ArrowUp:Vo("vert",-1),ArrowDown:Vo("vert",1)});function Vo(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof L){if(!o.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=Z.findGapCursorFrom(l,e,a);return u?(i&&i(r.tr.setSelection(new Z(u))),!0):!1}}function VM(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Z.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&R.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Z(r))),!0)}function HM(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Z))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=C.empty;for(let s=r.length-1;s>=0;s--)i=C.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new b(i,0,0));return o.setSelection(L.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function UM(t){if(!(t.selection instanceof Z))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",oe.create(t.doc,[st.widget(t.selection.head,e,{key:"gapcursor"})])}const WM=Be.create({name:"gapCursor",addProseMirrorPlugins(){return[jM()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=_(A(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),KM=Ke.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",De(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&a&&s){const d=a.filter(f=>l.includes(f.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),JM=Ke.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,De(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>ju({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Js=200,he=function(){};he.prototype.append=function(e){return e.length?(e=he.from(e),!this.length&&e||e.length<Js&&this.leafAppend(e)||this.length<Js&&e.leafPrepend(this)||this.appendInner(e)):this};he.prototype.prepend=function(e){return e.length?he.from(e).append(this):this};he.prototype.appendInner=function(e){return new qM(this,e)};he.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?he.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};he.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};he.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};he.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};he.from=function(e){return e instanceof he?e:e&&e.length?new Xy(e):he.empty};var Xy=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,l){for(var a=o;a<s;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,l){for(var a=o-1;a>=s;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Js)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Js)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(he);he.empty=new Xy([]);var qM=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(r,Math.min(i,l),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(he);const QM=500;class gt{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,l,a,u=[],c=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),o=i.maps.length),o--,c.push(d);return}if(i){c.push(new Ct(d.map));let h=d.step.map(i.slice(o)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],u.push(new Ct(p,void 0,void 0,u.length+c.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(o)):d.selection,a=new gt(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,n,r,i){let o=[],s=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let c=0;c<e.steps.length;c++){let d=e.steps[c].invert(e.docs[c]),f=new Ct(e.mapping.maps[c],d,n),h;(h=a&&a.merge(f))&&(f=h,c?o.pop():l=l.slice(0,l.length-1)),o.push(f),n&&(s++,n=void 0),i||(a=f)}let u=s-r.depth;return u>YM&&(l=GM(l,u),s-=u),new gt(l.append(o),s)}remapping(e,n){let r=new Ir;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new gt(this.items.append(e.map(n=>new Ct(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},i);let a=n;this.items.forEach(f=>{let h=o.getMirror(--a);if(h==null)return;s=Math.min(s,h);let p=o.maps[h];if(f.step){let g=e.steps[h].invert(e.docs[h]),v=f.selection&&f.selection.map(o.slice(a+1,h));v&&l++,r.push(new Ct(p,g,v))}else r.push(new Ct(p))},i);let u=[];for(let f=n;f<s;f++)u.push(new Ct(o.maps[f]));let c=this.items.slice(0,i).append(u).append(r),d=new gt(c,l);return d.emptyItemCount()>QM&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,l)=>{if(l>=e)i.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(n.slice(r)),u=a&&a.getMap();if(r--,u&&n.appendMap(u,r),a){let c=s.selection&&s.selection.map(n.slice(r));c&&o++;let d=new Ct(u.invert(),a,c),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else s.map&&r--},this.items.length,0),new gt(he.from(i.reverse()),o)}}gt.empty=new gt(he.empty,0);function GM(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Ct{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Ct(n.getMap().invert(),n,this.selection)}}}class Yt{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const YM=20;function XM(t,e,n,r){let i=n.getMeta(Qn),o;if(i)return i.historyState;n.getMeta(tN)&&(t=new Yt(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Qn))return s.getMeta(Qn).redo?new Yt(t.done.addTransform(n,void 0,r,ss(e)),t.undone,Fh(n.mapping.maps),t.prevTime,t.prevComposition):new Yt(t.done,t.undone.addTransform(n,void 0,r,ss(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!s&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!ZM(n,t.prevRanges)),u=s?wa(t.prevRanges,n.mapping):Fh(n.mapping.maps);return new Yt(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,ss(e)),gt.empty,u,n.time,l??t.prevComposition)}else return(o=n.getMeta("rebased"))?new Yt(t.done.rebased(n,o),t.undone.rebased(n,o),wa(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Yt(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),wa(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function ZM(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function Fh(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function wa(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function eN(t,e,n){let r=ss(e),i=Qn.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),a=new Yt(n?l:o.remaining,n?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(Qn,{redo:n,historyState:a})}let Ca=!1,_h=null;function ss(t){let e=t.plugins;if(_h!=e){Ca=!1,_h=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ca=!0;break}}return Ca}const Qn=new Dt("history"),tN=new Dt("closeHistory");function nN(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Je({key:Qn,state:{init(){return new Yt(gt.empty,gt.empty,null,0,-1)},apply(e,n,r){return XM(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?e0:r=="historyRedo"?t0:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function Zy(t,e){return(n,r)=>{let i=Qn.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=eN(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const e0=Zy(!1,!0),t0=Zy(!0,!0),rN=Be.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>e0(t,e),redo:()=>({state:t,dispatch:e})=>t0(t,e)}},addProseMirrorPlugins(){return[nN(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),iN=Ke.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",De(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):xE(n)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:l})=>{var a;if(l){const{$to:u}=s.selection,c=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(L.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(R.create(s.doc,u.pos)):s.setSelection(L.create(s.doc,u.pos));else{const d=(a=u.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(s.insert(c,d),s.setSelection(L.create(s.doc,c+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[YE({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),oN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,sN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,lN=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,aN=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,uN=Ut.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[qr({find:oN,type:this.type}),qr({find:lN,type:this.type})]},addPasteRules(){return[Qr({find:sN,type:this.type}),Qr({find:aN,type:this.type})]}}),cN=Ke.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",De(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),dN="listItem",jh="textStyle",$h=/^(\d+)\.\s$/,fN=Ke.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",De(this.options.HTMLAttributes,n),0]:["ol",De(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(dN,this.editor.getAttributes(jh)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=so({find:$h,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=so({find:$h,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(jh)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),hN=Ke.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),pN=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,mN=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,gN=Ut.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[qr({find:pN,type:this.type})]},addPasteRules(){return[Qr({find:mN,type:this.type})]}}),yN=Ke.create({name:"text",group:"inline"}),vN=Be.create({name:"starterKit",addExtensions(){var t,e,n,r,i,o,s,l,a,u,c,d,f,h,p,g,v,m;const y=[];return this.options.bold!==!1&&y.push(MM.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&y.push(xM.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&y.push(TM.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&y.push(DM.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&y.push(IM.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&y.push(RM.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&y.push(BM.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&y.push(WM.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&y.push(KM.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&y.push(JM.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&y.push(rN.configure((c=this.options)===null||c===void 0?void 0:c.history)),this.options.horizontalRule!==!1&&y.push(iN.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&y.push(uN.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&y.push(cN.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&y.push(fN.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&y.push(hN.configure((g=this.options)===null||g===void 0?void 0:g.paragraph)),this.options.strike!==!1&&y.push(gN.configure((v=this.options)===null||v===void 0?void 0:v.strike)),this.options.text!==!1&&y.push(yN.configure((m=this.options)===null||m===void 0?void 0:m.text)),y}}),kN=Ut.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",De(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),xN=({editor:t})=>t?S.jsxs("div",{className:"flex items-center gap-1 p-2 mb-2 glass rounded-lg",children:[S.jsx("button",{onClick:()=>t.chain().focus().toggleHeading({level:1}).run(),className:`p-2 rounded hover:bg-purple/20 ${t.isActive("heading",{level:1})?"text-gold":""}`,title:"1",children:S.jsx(zk,{className:"w-4 h-4"})}),S.jsx("button",{onClick:()=>t.chain().focus().toggleHeading({level:2}).run(),className:`p-2 rounded hover:bg-purple/20 ${t.isActive("heading",{level:2})?"text-gold":""}`,title:"2",children:S.jsx(Lk,{className:"w-4 h-4"})}),S.jsx("button",{onClick:()=>t.chain().focus().toggleHeading({level:3}).run(),className:`p-2 rounded hover:bg-purple/20 ${t.isActive("heading",{level:3})?"text-gold":""}`,title:"3",children:S.jsx(Bk,{className:"w-4 h-4"})}),S.jsx("div",{className:"w-px h-5 bg-white/10 mx-1"}),S.jsx("button",{onClick:()=>t.chain().focus().toggleBold().run(),className:`p-2 rounded hover:bg-purple/20 ${t.isActive("bold")?"text-gold":""}`,title:"",children:S.jsx(Ak,{className:"w-4 h-4"})}),S.jsx("button",{onClick:()=>t.chain().focus().toggleItalic().run(),className:`p-2 rounded hover:bg-purple/20 ${t.isActive("italic")?"text-gold":""}`,title:"",children:S.jsx(Fk,{className:"w-4 h-4"})}),S.jsx("button",{onClick:()=>t.chain().focus().toggleUnderline().run(),className:`p-2 rounded hover:bg-purple/20 ${t.isActive("underline")?"text-gold":""}`,title:"",children:S.jsx(Uk,{className:"w-4 h-4"})}),S.jsx("button",{onClick:()=>t.chain().focus().toggleStrike().run(),className:`p-2 rounded hover:bg-purple/20 ${t.isActive("strike")?"text-gold":""}`,title:"",children:S.jsx(Vk,{className:"w-4 h-4"})})]}):null,SN=({content:t,onChange:e})=>{const n=mM({extensions:[vN,kN],content:t,editorProps:{attributes:{class:"prose prose-invert min-h-[200px] p-4 focus:outline-none"}},onUpdate:({editor:r})=>{e(r.getHTML())}});return M.useEffect(()=>{n&&t!==n.getHTML()&&n.commands.setContent(t)},[t,n]),S.jsxs("div",{className:"glass",children:[S.jsx(xN,{editor:n}),S.jsx(oM,{editor:n,className:"min-h-[200px]"})]})},wN=1,CN=1e6;let Ea=0;function EN(){return Ea=(Ea+1)%Number.MAX_SAFE_INTEGER,Ea.toString()}const Ma=new Map,Vh=t=>{if(Ma.has(t))return;const e=setTimeout(()=>{Ma.delete(t),Ai({type:"REMOVE_TOAST",toastId:t})},CN);Ma.set(t,e)},MN=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,wN)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Vh(n):t.toasts.forEach(r=>{Vh(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},ls=[];let as={toasts:[]};function Ai(t){as=MN(as,t),ls.forEach(e=>{e(as)})}function NN({...t}){const e=EN(),n=i=>Ai({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Ai({type:"DISMISS_TOAST",toastId:e});return Ai({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function n0(){const[t,e]=M.useState(as);return M.useEffect(()=>(ls.push(e),()=>{const n=ls.indexOf(e);n>-1&&ls.splice(n,1)}),[t]),{...t,toast:NN,dismiss:n=>Ai({type:"DISMISS_TOAST",toastId:n})}}const TN=({title:t,content:e})=>{const{toast:n}=n0(),r=s=>new DOMParser().parseFromString(s,"text/html").body.textContent||"",i=s=>s.replace(/[<>:"/\\|?*]/g,"_").trim()||"note",o=()=>{try{const s=r(e),l=i(t),a=new Blob([s],{type:"text/plain;charset=utf-8"}),u=URL.createObjectURL(a),c=document.createElement("a");c.href=u,c.download=`${l}.txt`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(u),n({title:"",description:""})}catch(s){console.error("Export error:",s),n({title:"",description:"",variant:"destructive"})}};return S.jsx("button",{onClick:o,className:"p-2 hover:text-gold transition-colors",title:"",type:"button",children:S.jsx(Ik,{className:"w-4 h-4"})})},ON=t=>{M.useEffect(()=>{const e=localStorage.getItem(`scroll-${t}`);e&&window.scrollTo(0,parseInt(e));const n=()=>{localStorage.setItem(`scroll-${t}`,window.scrollY.toString())};return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[t])},bN=()=>{const{id:t}=lk(),e=fg(),{getCurrentNote:n,updateNote:r}=Fc(),[i,o]=M.useState(""),[s,l]=M.useState(""),[a,u]=M.useState(""),[c,d]=M.useState(!1),{toast:f}=n0();ON(t||""),M.useEffect(()=>{if(t){const m=n(t);m&&(o(m.title),l(m.content),u(m.category),d(m.isFavorite))}},[t,n]),M.useEffect(()=>{const m=y=>{if(y.ctrlKey||y.metaKey)switch(y.key){case"s":y.preventDefault(),f({title:"",description:""});break;case"h":y.preventDefault(),e("/");break}};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[e,f]);const h=m=>{o(m.target.value),t&&r(t,{title:m.target.value})},p=m=>{l(m),t&&r(t,{content:m})},g=m=>{u(m),t&&r(t,{category:m})},v=()=>{d(!c),t&&r(t,{isFavorite:!c})};return S.jsxs("div",{className:"container mx-auto px-4 py-8",children:[S.jsxs("div",{className:"flex justify-between items-center mb-8",children:[S.jsxs("button",{onClick:()=>e("/"),className:"flex items-center space-x-2 hover:text-gold transition-colors",children:[S.jsx(Dk,{className:"w-4 h-4"}),S.jsx("span",{children:""})]}),S.jsxs("div",{className:"flex items-center space-x-4",children:[S.jsx("div",{className:"w-48",children:S.jsx(vg,{category:a,onChange:g})}),S.jsx(kg,{isFavorite:c,onClick:v}),S.jsx(TN,{title:i,content:s})]})]}),S.jsx("input",{type:"text",value:i,onChange:h,className:"input w-full text-xl mb-4 bg-transparent",placeholder:""}),S.jsx(SN,{content:s,onChange:p})]})},DN=()=>{const t=Bc();return M.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:S.jsxs("div",{className:"text-center",children:[S.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),S.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),S.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function PN(){return S.jsx(Mk,{children:S.jsx(Ek,{children:S.jsxs(Sk,{children:[S.jsx(ts,{path:"/",element:S.jsx(Xk,{})}),S.jsx(ts,{path:"/note/:id",element:S.jsx(bN,{})}),S.jsx(ts,{path:"*",element:S.jsx(DN,{})})]})})})}rg(document.getElementById("root")).render(S.jsx(PN,{}));
